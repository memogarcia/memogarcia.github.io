<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writer - Structured Writing Tool</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>✍️</text></svg>">
    <link rel="stylesheet" href="../shared-design-system.css">
    <link rel="stylesheet" href="style.css">
    
    <!-- React 18 CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Essential utilities -->
    <script>
        // Date formatting utility
        window.dateUtils = {
            format: function(date, format) {
                const d = new Date(date);
                if (format === 'MMM d, yyyy') {
                    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 
                                  'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                    return months[d.getMonth()] + ' ' + d.getDate() + ', ' + d.getFullYear();
                }
                return d.toLocaleDateString();
            }
        };

        // Animation utilities (Framer Motion replacement)
        window.motion = {
            div: function(props) {
                return React.createElement('div', {
                    ...props,
                    style: {
                        ...props.style,
                        transition: 'all 0.2s ease'
                    }
                });
            },
            AnimatePresence: function({ children }) {
                return children;
            }
        };

        // DnD Kit fallbacks (drag & drop disabled to avoid CORS issues)
        window.DndKitCore = {
            DndContext: function({ children }) { return children; },
            useSensor: function() { return null; },
            useSensors: function() { return []; },
            PointerSensor: function() {},
            KeyboardSensor: function() {},
            closestCenter: function() { return null; }
        };
        
        window.DndKitSortable = {
            SortableContext: function({ children }) { return children; },
            useSortable: function() { 
                return {
                    attributes: {},
                    listeners: {},
                    setNodeRef: function() {},
                    transform: null,
                    transition: null,
                    isDragging: false
                };
            },
            sortableKeyboardCoordinates: function() {},
            verticalListSortingStrategy: function() {}
        };
        
        window.DndKitUtilities = {
            CSS: {
                Transform: {
                    toString: function() { return ''; }
                }
            }
        };

        // Error handling
        window.addEventListener('error', function(e) {
            if (e.target.tagName === 'SCRIPT') {
                console.error('Script loading failed:', e.target.src);
            }
        });
        
        // Check React loaded
        window.addEventListener('load', function() {
            if (!window.React || !window.ReactDOM) {
                document.getElementById('root').innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: #ef4444; font-family: system-ui;">
                        <h2>Loading Error</h2>
                        <p>Unable to load React. Please refresh the page.</p>
                    </div>
                `;
            }
        });

        console.log('Writer utilities loaded');
    </script>
</head>
<body>
    <div id="root">
        <div style="display: flex; justify-content: center; align-items: center; min-height: 100vh; color: #64748b;">
            <div style="text-align: center;">
                <div style="font-size: 2rem; margin-bottom: 1rem;">✍️</div>
                <div>Loading Writer...</div>
            </div>
        </div>
    </div>

    <script>
        // Theme initialization
        const savedTheme = localStorage.getItem('pref-theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark');
        }
    </script>

    <!-- Utility components and functions -->
    <script>
        // Simple utility functions
        function cn(...classes) {
            return classes.filter(Boolean).join(' ');
        }

        function debounce(func, wait) {
            let timeout;
            const debounced = function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
            debounced.cancel = function() {
                clearTimeout(timeout);
            };
            debounced.flush = function() {
                clearTimeout(timeout);
                func.apply(this, arguments);
            };
            return debounced;
        }

        function uuid() {
            return 'xxxx-xxxx-4xxx-yxxx'.replace(/[xy]/g, function(c) {
                const r = Math.random() * 16 | 0;
                const v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        // Storage utilities
        const storage = {
            saveDocuments: function(documents) {
                try {
                    localStorage.setItem('writer-documents', JSON.stringify(documents));
                } catch (e) {
                    console.error('Failed to save documents:', e);
                }
            },
            loadDocuments: function() {
                try {
                    const saved = localStorage.getItem('writer-documents');
                    return saved ? JSON.parse(saved) : [];
                } catch (e) {
                    console.error('Failed to load documents:', e);
                    return [];
                }
            },
            saveCurrentDocumentId: function(id) {
                try {
                    localStorage.setItem('writer-current-document', id || '');
                } catch (e) {
                    console.error('Failed to save current document ID:', e);
                }
            },
            loadCurrentDocumentId: function() {
                try {
                    return localStorage.getItem('writer-current-document');
                } catch (e) {
                    console.error('Failed to load current document ID:', e);
                    return null;
                }
            }
        };

        // Export utilities
        function exportToMarkdown(document) {
            if (!document) return;
            const content = document.paragraphs.map(p => p.content).join('\n\n');
            const markdown = `# ${document.title}\n\n${content}`;
            const blob = new Blob([markdown], { type: 'text/markdown;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const link = window.document.createElement('a');
            link.href = url;
            link.download = `${document.title.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.md`;
            window.document.body.appendChild(link);
            link.click();
            window.document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }

        // Text parsing utilities
        function smartSplitParagraphs(content) {
            const normalizedContent = content.replace(/\r\n/g, '\n').replace(/\r/g, '\n');
            const doubleNewlineSplit = normalizedContent.split(/\n\s*\n+/);
            
            if (doubleNewlineSplit.length > 1) {
                return doubleNewlineSplit.filter(p => p.trim().length > 0);
            }
            
            // Fallback: split by single newlines
            return normalizedContent.split('\n').filter(p => p.trim().length > 0);
        }

        // Toast notification system
        window.showToast = function(toast) {
            console.log(`${toast.variant}: ${toast.title} - ${toast.description}`);
            
            // Simple visual toast
            const toastEl = document.createElement('div');
            toastEl.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${toast.variant === 'error' ? '#ef4444' : '#22c55e'};
                color: white;
                padding: 1rem;
                border-radius: 8px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                z-index: 1000;
                max-width: 300px;
                font-family: system-ui, -apple-system, sans-serif;
            `;
            toastEl.innerHTML = `<strong>${toast.title}</strong><br>${toast.description}`;
            document.body.appendChild(toastEl);
            
            setTimeout(() => {
                if (toastEl.parentNode) {
                    toastEl.parentNode.removeChild(toastEl);
                }
            }, 3000);
        };

        console.log('Writer utilities ready');
    </script>

    <!-- Simple state management -->
    <script>
        const { useState, useEffect, useCallback, useMemo, createContext, useContext, useReducer } = React;

        // Simple state management without Zustand
        const WriterContext = createContext();

        function WriterProvider({ children }) {
            // Initial state
            const [state, setState] = useState(() => {
                const documents = storage.loadDocuments();
                const currentDocumentId = storage.loadCurrentDocumentId();
                const currentDocument = documents.find(doc => doc.id === currentDocumentId) || null;
                
                return {
                    documents,
                    currentDocument,
                    isLoading: false,
                    error: null,
                    clipboard: [],
                    selectedParagraphId: null,
                    activeToolTab: 'clipboard',
                    editorMode: 'edit',
                    searchTerm: '',
                    editorSettings: {
                        fontFamily: 'system-ui, -apple-system, sans-serif',
                        fontSize: 16
                    }
                };
            });

            // Actions
            const createDocument = useCallback((title) => {
                const newDoc = {
                    id: uuid(),
                    title,
                    paragraphs: [],
                    createdAt: new Date(),
                    updatedAt: new Date()
                };
                
                setState(prevState => {
                    const newState = {
                        ...prevState,
                        documents: [...prevState.documents, newDoc],
                        currentDocument: newDoc
                    };
                    storage.saveDocuments(newState.documents);
                    storage.saveCurrentDocumentId(newDoc.id);
                    return newState;
                });
                
                return newDoc;
            }, []);

            const selectDocument = useCallback((id) => {
                setState(prevState => {
                    const document = prevState.documents.find(doc => doc.id === id);
                    if (document) {
                        storage.saveCurrentDocumentId(id);
                        return { ...prevState, currentDocument: document };
                    }
                    return prevState;
                });
            }, []);

            const deleteDocument = useCallback((id) => {
                setState(prevState => {
                    const newDocuments = prevState.documents.filter(doc => doc.id !== id);
                    const newCurrentDocument = prevState.currentDocument?.id === id ? null : prevState.currentDocument;
                    
                    storage.saveDocuments(newDocuments);
                    if (newCurrentDocument) {
                        storage.saveCurrentDocumentId(newCurrentDocument.id);
                    } else {
                        storage.saveCurrentDocumentId(null);
                    }
                    
                    return {
                        ...prevState,
                        documents: newDocuments,
                        currentDocument: newCurrentDocument
                    };
                });
            }, []);

            const addParagraph = useCallback((content, index) => {
                setState(prevState => {
                    if (!prevState.currentDocument) return prevState;
                    
                    const newParagraph = {
                        id: uuid(),
                        content: content || '',
                        createdAt: new Date(),
                        updatedAt: new Date()
                    };
                    
                    const paragraphs = [...prevState.currentDocument.paragraphs];
                    if (typeof index === 'number' && index >= 0) {
                        paragraphs.splice(index, 0, newParagraph);
                    } else {
                        paragraphs.push(newParagraph);
                    }
                    
                    const updatedDoc = {
                        ...prevState.currentDocument,
                        paragraphs,
                        updatedAt: new Date()
                    };
                    
                    const newDocuments = prevState.documents.map(doc =>
                        doc.id === updatedDoc.id ? updatedDoc : doc
                    );
                    
                    storage.saveDocuments(newDocuments);
                    
                    return {
                        ...prevState,
                        currentDocument: updatedDoc,
                        documents: newDocuments
                    };
                });
            }, []);

            const updateParagraph = useCallback((id, content) => {
                setState(prevState => {
                    if (!prevState.currentDocument) return prevState;
                    
                    const updatedParagraphs = prevState.currentDocument.paragraphs.map(p =>
                        p.id === id ? { ...p, content, updatedAt: new Date() } : p
                    );
                    
                    const updatedDoc = {
                        ...prevState.currentDocument,
                        paragraphs: updatedParagraphs,
                        updatedAt: new Date()
                    };
                    
                    const newDocuments = prevState.documents.map(doc =>
                        doc.id === updatedDoc.id ? updatedDoc : doc
                    );
                    
                    storage.saveDocuments(newDocuments);
                    
                    return {
                        ...prevState,
                        currentDocument: updatedDoc,
                        documents: newDocuments
                    };
                });
            }, []);

            const deleteParagraph = useCallback((id) => {
                setState(prevState => {
                    if (!prevState.currentDocument) return prevState;
                    
                    const updatedParagraphs = prevState.currentDocument.paragraphs.filter(p => p.id !== id);
                    const updatedDoc = {
                        ...prevState.currentDocument,
                        paragraphs: updatedParagraphs,
                        updatedAt: new Date()
                    };
                    
                    const newDocuments = prevState.documents.map(doc =>
                        doc.id === updatedDoc.id ? updatedDoc : doc
                    );
                    
                    storage.saveDocuments(newDocuments);
                    
                    return {
                        ...prevState,
                        currentDocument: updatedDoc,
                        documents: newDocuments
                    };
                });
            }, []);

            const updateDocumentTitle = useCallback((title) => {
                setState(prevState => {
                    if (!prevState.currentDocument) return prevState;
                    
                    const updatedDoc = {
                        ...prevState.currentDocument,
                        title,
                        updatedAt: new Date()
                    };
                    
                    const newDocuments = prevState.documents.map(doc =>
                        doc.id === updatedDoc.id ? updatedDoc : doc
                    );
                    
                    storage.saveDocuments(newDocuments);
                    
                    return {
                        ...prevState,
                        currentDocument: updatedDoc,
                        documents: newDocuments
                    };
                });
            }, []);

            const value = {
                ...state,
                createDocument,
                selectDocument,
                deleteDocument,
                addParagraph,
                updateParagraph,
                deleteParagraph,
                updateDocumentTitle
            };

            return React.createElement(WriterContext.Provider, { value }, children);
        }

        // Custom hook to use the writer context
        function useWriter() {
            const context = useContext(WriterContext);
            if (!context) {
                throw new Error('useWriter must be used within WriterProvider');
            }
            return context;
        }

        console.log('State management ready');
    </script>

    <!-- Simple App Component -->
    <script>
        function SimpleApp() {
            const {
                documents,
                currentDocument,
                createDocument,
                selectDocument,
                deleteDocument,
                addParagraph,
                updateParagraph,
                deleteParagraph,
                updateDocumentTitle
            } = useWriter();
            
            const [leftSidebarOpen, setLeftSidebarOpen] = useState(true);
            const [rightSidebarOpen, setRightSidebarOpen] = useState(false);

            // Create initial document if none exists
            useEffect(() => {
                if (documents.length === 0) {
                    const welcomeDoc = createDocument('Welcome to Writer');
                    setTimeout(() => {
                        addParagraph('# Welcome to Writer\n\nThis is a simple structured writing tool. Start typing to create your first paragraph.');
                    }, 100);
                }
            }, [documents.length, createDocument, addParagraph]);

            const handleCreateDocument = () => {
                const title = `Document ${documents.length + 1}`;
                createDocument(title);
            };

            const handleDeleteDocument = (id, e) => {
                e.stopPropagation();
                if (window.confirm('Are you sure you want to delete this document?')) {
                    deleteDocument(id);
                }
            };

            return React.createElement('div', { className: 'h-screen flex bg-bg' },
                // Left Sidebar - Documents
                leftSidebarOpen && React.createElement('aside', { 
                    className: 'w-80 bg-bg-secondary border-r border-border flex flex-col'
                },
                    React.createElement('div', { className: 'p-4' },
                        React.createElement('h1', { className: 'text-xl font-semibold text-primary mb-4' }, 'Writer'),
                        React.createElement('button', {
                            onClick: handleCreateDocument,
                            className: 'w-full flex items-center justify-center gap-2 px-4 py-2 bg-accent text-bg rounded-lg hover:bg-accent-dark transition-colors'
                        }, '➕ New Document')
                    ),
                    React.createElement('div', { className: 'flex-1 overflow-y-auto px-4 pb-4' },
                        documents.length === 0 ? 
                            React.createElement('div', { className: 'text-center text-muted py-8' },
                                React.createElement('div', { style: { fontSize: '48px', opacity: 0.5, marginBottom: '12px' } }, '📄'),
                                React.createElement('p', { className: 'text-sm' }, 'No documents yet'),
                                React.createElement('p', { className: 'text-xs mt-1' }, 'Create your first document to get started')
                            ) :
                            React.createElement('div', { className: 'space-y-1' },
                                documents.map(doc => 
                                    React.createElement('div', {
                                        key: doc.id,
                                        onClick: () => selectDocument(doc.id),
                                        className: cn(
                                            'group px-3 py-3 rounded-lg cursor-pointer transition-colors hover:bg-hover',
                                            currentDocument?.id === doc.id && 'bg-hover'
                                        )
                                    },
                                        React.createElement('div', { className: 'flex items-start justify-between gap-2' },
                                            React.createElement('div', { className: 'flex-1 min-w-0' },
                                                React.createElement('h3', { className: 'font-medium text-primary truncate' }, doc.title),
                                                React.createElement('p', { className: 'text-xs text-muted mt-1' }, 
                                                    dateUtils.format(doc.updatedAt, 'MMM d, yyyy')
                                                ),
                                                React.createElement('p', { className: 'text-xs text-muted' }, 
                                                    `${doc.paragraphs.length} paragraphs`
                                                )
                                            ),
                                            React.createElement('div', { className: 'flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity' },
                                                React.createElement('button', {
                                                    onClick: (e) => {
                                                        e.stopPropagation();
                                                        exportToMarkdown(doc);
                                                    },
                                                    className: 'p-1 hover:bg-hover rounded',
                                                    title: 'Export document'
                                                }, '💾'),
                                                React.createElement('button', {
                                                    onClick: (e) => handleDeleteDocument(doc.id, e),
                                                    className: 'p-1 hover:bg-hover rounded',
                                                    title: 'Delete document'
                                                }, '🗑️')
                                            )
                                        )
                                    )
                                )
                            )
                    )
                ),

                // Main Editor
                React.createElement('main', { className: 'flex-1 flex flex-col min-w-0' },
                    React.createElement(SimpleEditor)
                ),

                // Toggle buttons
                React.createElement('div', { className: 'fixed top-4 left-4 z-10 flex gap-2' },
                    !leftSidebarOpen && React.createElement('button', {
                        onClick: () => setLeftSidebarOpen(true),
                        className: 'p-2 bg-bg border border-border rounded-md hover:bg-hover transition-colors',
                        title: 'Show documents'
                    }, '📄'),
                    React.createElement('button', {
                        onClick: () => setRightSidebarOpen(!rightSidebarOpen),
                        className: 'p-2 bg-bg border border-border rounded-md hover:bg-hover transition-colors',
                        title: rightSidebarOpen ? 'Hide tools' : 'Show tools'
                    }, rightSidebarOpen ? '✖️' : '🔧')
                ),

                leftSidebarOpen && React.createElement('button', {
                    onClick: () => setLeftSidebarOpen(false),
                    className: 'fixed top-4 left-[300px] z-10 p-2 bg-bg border border-border rounded-md hover:bg-hover transition-colors',
                    title: 'Hide documents'
                }, '✖️')
            );
        }

        // Simple Editor Component
        function SimpleEditor() {
            const { currentDocument, addParagraph, updateParagraph, deleteParagraph, updateDocumentTitle } = useWriter();
            const [newParagraphContent, setNewParagraphContent] = useState('');

            if (!currentDocument) {
                return React.createElement('div', { 
                    className: 'flex-1 flex items-center justify-center text-muted',
                    style: { textAlign: 'center' }
                },
                    React.createElement('p', null, 'Select or create a document to start writing')
                );
            }

            const handleAddParagraph = (e) => {
                e.preventDefault();
                if (newParagraphContent.trim()) {
                    addParagraph(newParagraphContent.trim());
                    setNewParagraphContent('');
                }
            };

            const handleTitleClick = () => {
                const newTitle = prompt('Enter new title:', currentDocument.title);
                if (newTitle && newTitle.trim() !== currentDocument.title) {
                    updateDocumentTitle(newTitle.trim());
                }
            };

            return React.createElement('div', { className: 'h-full flex flex-col' },
                // Header
                React.createElement('div', { className: 'border-b border-border bg-bg' },
                    React.createElement('div', { className: 'max-w-4xl mx-auto px-8 py-4' },
                        React.createElement('h1', {
                            onClick: handleTitleClick,
                            className: 'text-2xl font-semibold text-primary cursor-pointer hover:opacity-80 transition-opacity',
                            title: 'Click to edit title'
                        }, currentDocument.title)
                    )
                ),

                // Content
                React.createElement('div', { className: 'flex-1 overflow-y-auto' },
                    React.createElement('div', { className: 'max-w-4xl w-full mx-auto px-8 py-8' },
                        // Paragraphs
                        currentDocument.paragraphs.length === 0 ?
                            React.createElement('div', { 
                                className: 'text-center py-16 text-muted cursor-text min-h-[400px] flex items-center justify-center',
                                onClick: () => addParagraph('')
                            },
                                React.createElement('div', null,
                                    React.createElement('p', { className: 'text-lg mb-2' }, 'Your document is empty'),
                                    React.createElement('p', { className: 'text-sm' }, 'Click anywhere to start writing')
                                )
                            ) :
                            React.createElement('div', { className: 'space-y-4' },
                                currentDocument.paragraphs.map((paragraph, index) =>
                                    React.createElement(SimpleParagraph, {
                                        key: paragraph.id,
                                        paragraph,
                                        index,
                                        onUpdate: updateParagraph,
                                        onDelete: deleteParagraph,
                                        onAddAfter: (content) => addParagraph(content, index + 1)
                                    })
                                )
                            ),

                        // Add new paragraph form
                        React.createElement('form', { onSubmit: handleAddParagraph, className: 'mt-8' },
                            React.createElement('textarea', {
                                value: newParagraphContent,
                                onChange: (e) => setNewParagraphContent(e.target.value),
                                placeholder: 'Write your next paragraph...',
                                className: 'w-full p-4 border border-border rounded-lg bg-bg text-primary placeholder:text-muted resize-none focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent',
                                rows: 3,
                                onKeyDown: (e) => {
                                    if (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) {
                                        e.preventDefault();
                                        handleAddParagraph(e);
                                    }
                                }
                            }),
                            React.createElement('div', { className: 'mt-2 flex justify-end' },
                                React.createElement('button', {
                                    type: 'submit',
                                    className: 'px-4 py-2 bg-accent text-bg rounded-lg hover:bg-accent-dark transition-colors disabled:opacity-50',
                                    disabled: !newParagraphContent.trim()
                                }, 'Add Paragraph (Ctrl+Enter)')
                            )
                        )
                    )
                )
            );
        }

        // Simple Paragraph Component
        function SimpleParagraph({ paragraph, index, onUpdate, onDelete, onAddAfter }) {
            const [isEditing, setIsEditing] = useState(paragraph.content === '');
            const [editContent, setEditContent] = useState(paragraph.content);

            const handleSave = () => {
                if (editContent.trim() !== paragraph.content) {
                    onUpdate(paragraph.id, editContent.trim());
                }
                setIsEditing(false);
            };

            const handleCancel = () => {
                setEditContent(paragraph.content);
                setIsEditing(false);
            };

            const handleDelete = () => {
                if (window.confirm('Delete this paragraph?')) {
                    onDelete(paragraph.id);
                }
            };

            return React.createElement('div', { 
                className: 'group relative p-4 border border-transparent hover:border-border rounded-lg transition-colors' 
            },
                isEditing ? 
                    React.createElement('div', null,
                        React.createElement('textarea', {
                            value: editContent,
                            onChange: (e) => setEditContent(e.target.value),
                            className: 'w-full p-3 border border-border rounded-lg bg-bg text-primary resize-none focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent',
                            rows: Math.max(3, editContent.split('\n').length),
                            autoFocus: true,
                            onKeyDown: (e) => {
                                if (e.key === 'Escape') {
                                    handleCancel();
                                } else if (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) {
                                    e.preventDefault();
                                    handleSave();
                                }
                            }
                        }),
                        React.createElement('div', { className: 'mt-2 flex gap-2' },
                            React.createElement('button', {
                                onClick: handleSave,
                                className: 'px-3 py-1 bg-accent text-bg rounded text-sm hover:bg-accent-dark transition-colors'
                            }, 'Save (Ctrl+Enter)'),
                            React.createElement('button', {
                                onClick: handleCancel,
                                className: 'px-3 py-1 border border-border text-secondary rounded text-sm hover:bg-hover transition-colors'
                            }, 'Cancel (Esc)')
                        )
                    ) :
                    React.createElement('div', { 
                        onClick: () => setIsEditing(true),
                        className: 'cursor-text'
                    },
                        React.createElement('div', { 
                            className: 'text-primary whitespace-pre-wrap',
                            style: { minHeight: '1.5rem' }
                        }, paragraph.content || 'Click to edit...')
                    ),

                // Action buttons
                React.createElement('div', { className: 'absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1' },
                    React.createElement('button', {
                        onClick: handleDelete,
                        className: 'p-1 text-red-500 hover:bg-red-50 rounded text-sm',
                        title: 'Delete paragraph'
                    }, '🗑️'),
                    React.createElement('button', {
                        onClick: () => onAddAfter(''),
                        className: 'p-1 text-secondary hover:bg-hover rounded text-sm',
                        title: 'Add paragraph after'
                    }, '➕')
                )
            );
        }

        // Main App
        function App() {
            return React.createElement(WriterProvider, null,
                React.createElement(SimpleApp)
            );
        }

        // Render the app
        setTimeout(() => {
            if (window.React && window.ReactDOM) {
                const root = ReactDOM.createRoot(document.getElementById('root'));
                root.render(React.createElement(App));
                console.log('Simple Writer app loaded successfully!');
            } else {
                console.error('React not loaded');
            }
        }, 100);
    </script>
</body>
</html>
<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Understanding Computer Networks by Analogy: Part 4 - Advanced Architectures | Memo Garcia</title>
<meta name=keywords content><meta name=description content="Networking at scale looks complex, but it still comes down to the same questions: who am I talking to, which path am I using, and what are the rules of the conversation?
License for this chapter: CC BY-NC-ND 4.0
What This Chapter Covers In Parts 1–3 we built up a mental model of:
Buildings as local networks (LANs). A city as the internet (routers, packets, DNS). Hotels as the cloud (VPCs, gateways, IAM)."><link rel=canonical href=https://memo.mx/posts/understanding-computer-networks-by-analogy-part-4/><meta name=google-site-verification content="G-ZRB1GGCC9B"><link crossorigin=anonymous href=/assets/css/stylesheet.d1467e28595903f993a7e37893057cefe5f69aece461c850796bf5b0a3bf422a.css integrity="sha256-0UZ+KFlZA/mTp+N4kwV87+X2muzkYchQeWv1sKO/Qio=" rel="preload stylesheet" as=style><link rel=icon href=https://memo.mx/%20favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://memo.mx/%20favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://memo.mx/%20favicon-32x32.png><link rel=apple-touch-icon href=https://memo.mx/%20apple-touch-icon.png><link rel=mask-icon href=https://memo.mx/%20safari-pinned-tab.svg><meta name=theme-color content="#0d0221"><meta name=msapplication-TileColor content="#0d0221"><link rel=alternate hreflang=en href=https://memo.mx/posts/understanding-computer-networks-by-analogy-part-4/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZRB1GGCC9B"></script><script>var dnt,doNotTrack=!1;if(!0&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZRB1GGCC9B")}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://memo.mx/posts/"},{"@type":"ListItem","position":2,"name":"Understanding Computer Networks by Analogy: Part 4 - Advanced Architectures","item":"https://memo.mx/posts/understanding-computer-networks-by-analogy-part-4/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Understanding Computer Networks by Analogy: Part 4 - Advanced Architectures","name":"Understanding Computer Networks by Analogy: Part 4 - Advanced Architectures","description":"Networking at scale looks complex, but it still comes down to the same questions: who am I talking to, which path am I using, and what are the rules of the conversation?\nLicense for this chapter: CC BY-NC-ND 4.0\nWhat This Chapter Covers In Parts 1–3 we built up a mental model of:\nBuildings as local networks (LANs). A city as the internet (routers, packets, DNS). Hotels as the cloud (VPCs, gateways, IAM).","keywords":[],"articleBody":" Networking at scale looks complex, but it still comes down to the same questions: who am I talking to, which path am I using, and what are the rules of the conversation?\nLicense for this chapter: CC BY-NC-ND 4.0\nWhat This Chapter Covers In Parts 1–3 we built up a mental model of:\nBuildings as local networks (LANs). A city as the internet (routers, packets, DNS). Hotels as the cloud (VPCs, gateways, IAM). In this chapter, we look at three modern pieces of networking that sit on top of those foundations:\nWi-Fi as a shared, noisy street market that uses CSMA/CA to manage access to the air. TLS as a diplomatic ceremony that gives you confidentiality and authenticity on the web. Service meshes as teams of personal ushers (sidecar proxies) that secure and manage service-to-service traffic in large systems. By the end of this chapter you should be able to:\nExplain why Wi-Fi behaves differently from wired Ethernet and what CSMA/CA is trying to solve. Describe, at a high level, what happens during a TLS handshake and why it provides forward secrecy. Explain the value of a service mesh and the trade-offs it introduces. Chapter 4: Advanced Architectures In the earlier chapters we laid out the core of our digital city:\nBuildings and floors for local networks and subnets. Streets and intersections for routing across the internet. A cloud hotel for virtual networks (VPCs) and managed infrastructure. Modern systems add extra layers of behavior on top of that foundation:\nWireless links where everyone shares the same air. Encryption that turns open hallways into secure private tunnels. Meshes of cooperating services that talk constantly to each other. The scale is bigger and the machinery is more sophisticated, but the questions are still the same:\nWho am I talking to?\nWhich path is my traffic taking?\nWhat rules govern the conversation?\nWe will revisit those questions three times in this chapter: once in the Wi-Fi street market, once in the TLS diplomatic ceremony, and once in the service-mesh hallway.\n4.1 The Wi-Fi Street Market: A Noisy Environment So far we have treated the hallway as a private cable: a predictable, one-to-one connection between two doors. That is a good mental model for an Ethernet link.\nWi-Fi is different.\nThe “hallway” for Wi-Fi is the air itself. Every device in range is sharing the same open space:\nYour laptop and phone. Your TV and game console. Your neighbour’s access point on the other side of the wall. Instead of a quiet corridor that belongs to you, the medium is more like a busy street market where many groups are talking at once.\nTwo fundamental problems show up immediately:\nCollisions\nIf two people in the same market start talking at exactly the same moment, the sounds overlap and neither message is clear. Both parties have to stop and try again. On a shared wireless channel, radio signals can collide in the same way.\nInterference\nEven if only one person is speaking, a sudden loud noise – a band starting to play, a blender switching on – can drown out the conversation. In Wi-Fi, other devices, neighbouring networks and household appliances can inject noise into the same frequency band.\nBecause everyone is sharing the same space, Wi-Fi needs a careful set of turn-taking rules. It cannot simply “shout whenever it wants”.\nTo keep the market manageable, Wi-Fi uses a protocol called CSMA/CA (Carrier Sense Multiple Access with Collision Avoidance). You can think of it as etiquette for speaking in a crowded room:\nListen first. Only speak when it sounds quiet. Even then, wait a tiny random amount of time so that not everyone speaks at once. This listening-and-waiting loop is happening all the time, between all devices, at very high speed.\nKey idea: A wired link is like a private corridor. Wi-Fi is a shared street market where everyone must take turns. CSMA/CA is the politeness protocol that gives each device a fair chance to speak.\nTechnical Deep Dive Some practical Wi-Fi concepts, using our market analogy:\nCSMA/CA vs CSMA/CD\nEarly shared-cable Ethernet used CSMA/CD (Collision Detection). Devices listened, started sending, and if they detected a collision on the wire they would stop, wait a random time, and retry.\nA Wi-Fi radio cannot reliably “hear” a collision while it is transmitting – it is busy shouting. So instead of detecting collisions during transmission, Wi-Fi focuses on avoiding them beforehand (CSMA/CA).\nFrequency bands and channels\nA market is not just one big space; you can imagine separate rows or sections. Wi-Fi uses specific frequency bands, each divided into channels:\n2.4 GHz – longer range and better wall penetration, but only a few non-overlapping channels and lots of other devices using it. 5 GHz – more channels and typically less interference, but shorter range and more easily blocked by walls. 6 GHz (Wi-Fi 6E and later) – many clean channels for very high-throughput links, at the cost of even shorter range and the need for newer hardware. Choosing a good channel is like picking a quieter section of the market.\nSignal-to-Noise Ratio (SNR)\nA “strong signal” alone doesn’t guarantee a good experience. What matters is signal compared to noise:\nLoud friend + quiet background = good SNR → high data rates, fewer retries. Loud friend + loud band = poor SNR → many retransmissions, random slowdowns. When Wi-Fi feels unstable, it is often because the SNR has fallen and devices are forced to repeat themselves.\nAnalogy Breakdown – Wired vs Wi-Fi | Feature | Private Hallway (Wired Ethernet) | Street Market (Wi-Fi) | |--------------|-----------------------------------|----------------------------------------| | Medium | Dedicated copper or fibre | Shared radio waves (air) | | Ownership | One link per pair of devices | Many devices sharing one channel | | Rules | Simple, predictable | CSMA/CA turn-taking, backoff | | Main risks | Cable damage, bad connectors | Collisions, interference, poor SNR | | Predictability | High | Varies with crowding and interference | 4.2 Sealed Envelopes and Secret Handshakes: The TLS Ceremony Earlier we treated packets as envelopes travelling through the city. To add basic integrity you might imagine putting a wax seal on the flap: if the seal is intact, the letter wasn’t changed.\nModern web security needs more than that. Before you write anything sensitive in the letter, you want to be sure of two things:\nAuthentication – Who is on the other side?\nAm I really talking to my bank, or to an attacker in a fake building?\nEncryption – Can anyone read this if they intercept it?\nEven if someone on the street copies every envelope, can they understand the contents?\nOn the web, these two goals are handled by TLS (Transport Layer Security) – the protocol behind the “S” in HTTPS. The process starts with the TLS handshake, which you can think of as a short diplomatic ceremony that happens before the real conversation begins.\nThe TLS Handshake as a Diplomatic Ritual Here is a simplified view of what happens when your browser connects securely to a site:\nGreetings and options\nYour browser sends a ClientHello:\n“Hello, I’d like to talk securely. Here are the encryption methods I understand.”\nThe server replies with a ServerHello, choosing a method both sides support.\nPresenting credentials\nThe server now hands over its certificate – a digitally signed ID card.\nIt says something like: “I am www.mybank.com, and here is my public key.”\nChecking the chain of trust\nYour browser checks who signed that ID card.\nThe certificate is signed by a Certificate Authority (CA) – a trusted notary.\nYour operating system and browser ship with a list of CAs they already trust.\nIf the signatures check out and the name on the certificate matches the site you asked for, the browser accepts the server’s identity.\nAgreeing on a shared secret\nNow that identity is established, both sides need a fresh, one-time-use key for this specific session.\nThey use a key-exchange algorithm (often Diffie–Hellman based) to create a shared secret in public:\nEach side generates some private and public values. They exchange the public values. Using those, each side independently derives the same secret key. An eavesdropper can see the exchange but cannot compute the secret key. This gives us forward secrecy: even if the server’s long-term private key is stolen later, past conversations cannot be decrypted.\nSwitching to encrypted conversation\nOnce both sides agree that the handshake is complete, they start using the shared key to encrypt and authenticate all further data. From this point, your HTTP requests and responses travel inside a protected tunnel.\nIn short: TLS starts with a ceremony that proves identity using certificates and then sets up a unique shared key. Only after that do you send sensitive data.\nTechnical Deep Dive Some important TLS details behind the analogy:\nTLS vs SSL\nSSL is the older protocol that TLS replaces. People still say “SSL certificates” in conversation, but modern secure web traffic uses TLS (for example, TLS 1.2 or TLS 1.3).\nCertificate chains\nYour browser may not trust a server’s certificate directly. Instead, the server sends its own certificate plus one or more intermediate certificates.\nThe browser walks this chain until it reaches a root CA in its trusted store. This allows a small number of root CAs to delegate signing authority safely.\nAsymmetric and symmetric cryptography\nTLS uses both:\nAsymmetric crypto (public/private keys) during the handshake for authentication and key exchange. It is flexible but relatively expensive. Symmetric crypto (a shared key) for the bulk of the data once the handshake is done. It is much faster, which is why it is used for day-to-day traffic. Certificates for internal systems\nThe same ideas apply inside your own infrastructure:\nInternal services can use TLS to secure traffic inside a data centre or VPC. Private certificate authorities can issue certificates for internal hostnames. Service meshes (next section) often rely on this to implement mutual TLS automatically. 4.3 The Service Mesh: Personal Ushers for Every Room Our cloud hotel now has:\nGuards at the main entrances (firewalls, gateways). Guards at individual room doors (security groups, host-level firewalls). Badges and keycards that control who may enter which area (IAM). This protects who can get into the building or a room. But in a modern application, most of the traffic is not coming from the outside world – it is room-to-room conversation between internal services.\nIf you use a microservices architecture, you might have:\nA room that only handles authentication. A room that checks inventory. A room that processes payments. Many more that together form one product. All of these rooms are talking to each other constantly. Several problems appear:\nHow do you ensure each internal conversation is encrypted and authenticated? How do you apply consistent policies (timeouts, retries, rate limits) everywhere? How do you get a clear, uniform view of who is talking to whom and how it’s going? Door guards are not enough; you also need help in the hallways.\nThe Personal Usher: Sidecar Proxies Imagine that instead of only having guards at doors, you assign a personal usher to every room on your floor:\nThe usher stands just outside the door. The person inside the room only ever hands messages to their usher. When Room A wants to talk to Room B, the usher for A coordinates with the usher for B. The two ushers handle routing, retries, encryption and logging. The applications inside the rooms no longer have to know about:\nHow to do TLS correctly. Which addresses to call for each service. How to implement complex resilience patterns. They just talk to their local usher in a simple, consistent way.\nIn networking terms, each usher is a sidecar proxy, and the collection of ushers plus their control system is a service mesh.\nThe ushers can provide powerful features:\nZero-trust security\nAll traffic between ushers is encrypted, typically using mutual TLS (mTLS).\nThat means both sides present certificates and verify each other’s identity, even inside your own network.\nTraffic management and resilience\nThe ushers can:\nRetry failed requests with sensible limits. Distribute traffic across multiple instances of a service (load balancing). Stop sending requests to a misbehaving instance temporarily (circuit breaking). Apply rate limits or timeouts without changing application code. Observability\nBecause every request passes through the ushers, they can log:\nWhich service called which other service. How long the request took. Whether it succeeded or failed.\nThis gives you uniform metrics, logs and traces across the entire mesh. Key takeaway: A service mesh moves a lot of networking and security logic out of application code and into a shared layer of proxies. Each service gets a personal usher that speaks the network’s “native language” on its behalf.\nTechnical Deep Dive At a high level, most service meshes share the same building blocks:\nData plane\nThe network of sidecar proxies that sit next to each service instance.\nPopular implementations include Envoy and Linkerd.\nThe data plane handles:\nAccepting and forwarding requests. Applying policies (mTLS, retries, routing rules). Emitting telemetry (metrics, logs, traces). Control plane\nA central component such as Istio or Consul that:\nKnows which services exist and where they are. Distributes configuration and security policies to the proxies. Manages certificate rotation for mTLS. Aggregates telemetry for dashboards and alerts. mTLS (Mutual TLS)\nTraditional TLS on the web authenticates only the server.\nIn mutual TLS, both client and server present certificates and prove their identities.\nThis is a crucial piece of “zero-trust” networking: you do not automatically trust traffic just because it originates from the same VPC or cluster.\nTrade-offs\nA service mesh brings strong security and operational benefits but also:\nAdds another critical component to operate and monitor. Inserts extra hops into each request path, adding some latency. Requires thoughtful rollout and good tooling to avoid complexity. For small systems, the cost of a mesh may not be worth it. For large, fast-moving microservice environments, it can dramatically simplify networking concerns for application teams.\nRecap and Small Exercises What You Should Now Be Able to Explain After this chapter, you should be able to explain, in your own words:\nWhy Wi-Fi behaves like a crowded street market and how CSMA/CA helps devices share the air. What happens during a TLS handshake and why it provides authentication and forward secrecy. What a service mesh is, how sidecar proxies act as personal ushers for each service, and what problems this solves. Exercises Wi-Fi observation at home or work\nUse your router or operating system tools to inspect: Which Wi-Fi band you are using (2.4, 5, or 6 GHz). How many neighbouring networks are visible. Relate what you see back to the street-market analogy (crowding, interference, channel selection). Inspect a TLS connection\nVisit a site that uses HTTPS in your browser. Use the browser’s developer tools or a command like openssl s_client to inspect: The certificate chain. The protocol version (e.g. TLS 1.2 vs TLS 1.3). Write down, step by step, how the diplomatic ceremony you see maps to the TLS handshake stages in this chapter. Draw a service-mesh floor plan\nTake a small microservice system you know (or invent one with 4–6 services). Sketch: Each service as a room. A sidecar proxy/usher next to each room. The control plane as a “head usher” office. Mark where mTLS would be terminating for each hop. Decide if you need a mesh\nThink about an application you work on (or would like to build). List: The number of services. The security requirements. The operational pain around retries, timeouts, and observability. Based on that, argue for or against adopting a service mesh, using the trade-offs discussed above. In the final part of the book, the appendices bring all these ideas together into quick-reference blueprints, troubleshooting checklists, and a glossary you can revisit whenever you feel lost in the city.\n","wordCount":"2628","inLanguage":"en","datePublished":"2025-10-18T22:39:16+09:00","dateModified":"2025-11-13T22:11:49+09:00","author":{"@type":"Person","name":"Memo Garcia"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://memo.mx/posts/understanding-computer-networks-by-analogy-part-4/"},"publisher":{"@type":"Person","name":"Memo Garcia","logo":{"@type":"ImageObject","url":"https://memo.mx/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://memo.mx/ accesskey=h title="Memo Garcia (Alt + H)">Memo Garcia</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://memo.mx/labs/ title=Labs><span>Labs</span></a></li><li><a href=https://memo.mx/books/ title=Books><span>Books</span></a></li><li><a href=https://memo.mx/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Understanding Computer Networks by Analogy: Part 4 - Advanced Architectures</h1><div class=post-meta><span title='2025-10-18 22:39:16 +0900 +0900'>October 18, 2025</span>&nbsp;·&nbsp;13 min&nbsp;·&nbsp;Memo Garcia</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#what-this-chapter-covers aria-label="What This Chapter Covers">What This Chapter Covers</a></li><li><a href=#chapter-4-advanced-architectures aria-label="Chapter 4: Advanced Architectures">Chapter 4: Advanced Architectures</a></li><li><a href=#41-the-wi-fi-street-market-a-noisy-environment aria-label="4.1 The Wi-Fi Street Market: A Noisy Environment">4.1 The Wi-Fi Street Market: A Noisy Environment</a><ul><li><a href=#technical-deep-dive aria-label="Technical Deep Dive">Technical Deep Dive</a><ul><li><a href=#analogy-breakdown--wired-vs-wi-fi aria-label="Analogy Breakdown – Wired vs Wi-Fi">Analogy Breakdown – Wired vs Wi-Fi</a></li></ul></li></ul></li><li><a href=#42-sealed-envelopes-and-secret-handshakes-the-tls-ceremony aria-label="4.2 Sealed Envelopes and Secret Handshakes: The TLS Ceremony">4.2 Sealed Envelopes and Secret Handshakes: The TLS Ceremony</a><ul><li><a href=#the-tls-handshake-as-a-diplomatic-ritual aria-label="The TLS Handshake as a Diplomatic Ritual">The TLS Handshake as a Diplomatic Ritual</a></li><li><a href=#technical-deep-dive-1 aria-label="Technical Deep Dive">Technical Deep Dive</a></li></ul></li><li><a href=#43-the-service-mesh-personal-ushers-for-every-room aria-label="4.3 The Service Mesh: Personal Ushers for Every Room">4.3 The Service Mesh: Personal Ushers for Every Room</a><ul><li><a href=#the-personal-usher-sidecar-proxies aria-label="The Personal Usher: Sidecar Proxies">The Personal Usher: Sidecar Proxies</a></li><li><a href=#technical-deep-dive-2 aria-label="Technical Deep Dive">Technical Deep Dive</a></li></ul></li><li><a href=#recap-and-small-exercises aria-label="Recap and Small Exercises">Recap and Small Exercises</a><ul><li><a href=#what-you-should-now-be-able-to-explain aria-label="What You Should Now Be Able to Explain">What You Should Now Be Able to Explain</a></li><li><a href=#exercises aria-label=Exercises>Exercises</a></li></ul></li></ul></div></details></div><div class=post-content><blockquote><p>Networking at scale looks complex, but it still comes down to the same questions: who am I talking to, which path am I using, and what are the rules of the conversation?</p></blockquote><p>License for this chapter: CC BY-NC-ND 4.0</p><hr><h2 id=what-this-chapter-covers>What This Chapter Covers<a hidden class=anchor aria-hidden=true href=#what-this-chapter-covers>#</a></h2><p>In Parts 1–3 we built up a mental model of:</p><ul><li>Buildings as local networks (LANs).</li><li>A city as the internet (routers, packets, DNS).</li><li>Hotels as the cloud (VPCs, gateways, IAM).</li></ul><p>In this chapter, we look at three modern pieces of networking that sit on top of those foundations:</p><ul><li><strong>Wi-Fi</strong> as a shared, noisy street market that uses CSMA/CA to manage access to the air.</li><li><strong>TLS</strong> as a diplomatic ceremony that gives you confidentiality and authenticity on the web.</li><li><strong>Service meshes</strong> as teams of personal ushers (sidecar proxies) that secure and manage service-to-service traffic in large systems.</li></ul><p>By the end of this chapter you should be able to:</p><ul><li>Explain why Wi-Fi behaves differently from wired Ethernet and what CSMA/CA is trying to solve.</li><li>Describe, at a high level, what happens during a TLS handshake and why it provides forward secrecy.</li><li>Explain the value of a service mesh and the trade-offs it introduces.</li></ul><hr><h2 id=chapter-4-advanced-architectures>Chapter 4: Advanced Architectures<a hidden class=anchor aria-hidden=true href=#chapter-4-advanced-architectures>#</a></h2><p>In the earlier chapters we laid out the core of our digital city:</p><ul><li>Buildings and floors for local networks and subnets.</li><li>Streets and intersections for routing across the internet.</li><li>A cloud hotel for virtual networks (VPCs) and managed infrastructure.</li></ul><p>Modern systems add extra layers of behavior on top of that foundation:</p><ul><li>Wireless links where everyone shares the same air.</li><li>Encryption that turns open hallways into secure private tunnels.</li><li>Meshes of cooperating services that talk constantly to each other.</li></ul><p>The scale is bigger and the machinery is more sophisticated, but the questions are still the same:</p><blockquote><p>Who am I talking to?<br>Which path is my traffic taking?<br>What rules govern the conversation?</p></blockquote><p>We will revisit those questions three times in this chapter: once in the Wi-Fi street market, once in the TLS diplomatic ceremony, and once in the service-mesh hallway.</p><hr><h2 id=41-the-wi-fi-street-market-a-noisy-environment>4.1 The Wi-Fi Street Market: A Noisy Environment<a hidden class=anchor aria-hidden=true href=#41-the-wi-fi-street-market-a-noisy-environment>#</a></h2><p>So far we have treated the hallway as a private cable: a predictable, one-to-one connection between two doors. That is a good mental model for an Ethernet link.</p><p>Wi-Fi is different.</p><p>The “hallway” for Wi-Fi is the air itself. Every device in range is sharing the same open space:</p><ul><li>Your laptop and phone.</li><li>Your TV and game console.</li><li>Your neighbour’s access point on the other side of the wall.</li></ul><p>Instead of a quiet corridor that belongs to you, the medium is more like a <strong>busy street market</strong> where many groups are talking at once.</p><p>Two fundamental problems show up immediately:</p><ol><li><p><strong>Collisions</strong><br>If two people in the same market start talking at exactly the same moment, the sounds overlap and neither message is clear. Both parties have to stop and try again. On a shared wireless channel, radio signals can collide in the same way.</p></li><li><p><strong>Interference</strong><br>Even if only one person is speaking, a sudden loud noise – a band starting to play, a blender switching on – can drown out the conversation. In Wi-Fi, other devices, neighbouring networks and household appliances can inject noise into the same frequency band.</p></li></ol><p>Because everyone is sharing the same space, Wi-Fi needs a careful set of turn-taking rules. It cannot simply “shout whenever it wants”.</p><p>To keep the market manageable, Wi-Fi uses a protocol called <strong>CSMA/CA</strong> (Carrier Sense Multiple Access with Collision Avoidance). You can think of it as etiquette for speaking in a crowded room:</p><ul><li>Listen first.</li><li>Only speak when it sounds quiet.</li><li>Even then, wait a tiny random amount of time so that not everyone speaks at once.</li></ul><p>This listening-and-waiting loop is happening all the time, between all devices, at very high speed.</p><blockquote><p><strong>Key idea:</strong> A wired link is like a private corridor. Wi-Fi is a shared street market where everyone must take turns. CSMA/CA is the politeness protocol that gives each device a fair chance to speak.</p></blockquote><h3 id=technical-deep-dive>Technical Deep Dive<a hidden class=anchor aria-hidden=true href=#technical-deep-dive>#</a></h3><p>Some practical Wi-Fi concepts, using our market analogy:</p><ul><li><p><strong>CSMA/CA vs CSMA/CD</strong><br>Early shared-cable Ethernet used <strong>CSMA/CD</strong> (Collision Detection). Devices listened, started sending, and if they detected a collision on the wire they would stop, wait a random time, and retry.<br>A Wi-Fi radio cannot reliably “hear” a collision while it is transmitting – it is busy shouting. So instead of detecting collisions during transmission, Wi-Fi focuses on <strong>avoiding</strong> them beforehand (CSMA/CA).</p></li><li><p><strong>Frequency bands and channels</strong><br>A market is not just one big space; you can imagine separate rows or sections. Wi-Fi uses specific <strong>frequency bands</strong>, each divided into <strong>channels</strong>:</p><ul><li><strong>2.4 GHz</strong> – longer range and better wall penetration, but only a few non-overlapping channels and lots of other devices using it.</li><li><strong>5 GHz</strong> – more channels and typically less interference, but shorter range and more easily blocked by walls.</li><li><strong>6 GHz (Wi-Fi 6E and later)</strong> – many clean channels for very high-throughput links, at the cost of even shorter range and the need for newer hardware.</li></ul><p>Choosing a good channel is like picking a quieter section of the market.</p></li><li><p><strong>Signal-to-Noise Ratio (SNR)</strong><br>A “strong signal” alone doesn’t guarantee a good experience. What matters is <strong>signal compared to noise</strong>:</p><ul><li>Loud friend + quiet background = good SNR → high data rates, fewer retries.</li><li>Loud friend + loud band = poor SNR → many retransmissions, random slowdowns.</li></ul><p>When Wi-Fi feels unstable, it is often because the SNR has fallen and devices are forced to repeat themselves.</p></li></ul><h4 id=analogy-breakdown--wired-vs-wi-fi>Analogy Breakdown – Wired vs Wi-Fi<a hidden class=anchor aria-hidden=true href=#analogy-breakdown--wired-vs-wi-fi>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>| Feature       | Private Hallway (Wired Ethernet) | Street Market (Wi-Fi)                  |
</span></span><span class=line><span class=cl>|--------------|-----------------------------------|----------------------------------------|
</span></span><span class=line><span class=cl>| Medium       | Dedicated copper or fibre         | Shared radio waves (air)               |
</span></span><span class=line><span class=cl>| Ownership    | One link per pair of devices      | Many devices sharing one channel       |
</span></span><span class=line><span class=cl>| Rules        | Simple, predictable               | CSMA/CA turn-taking, backoff           |
</span></span><span class=line><span class=cl>| Main risks   | Cable damage, bad connectors      | Collisions, interference, poor SNR     |
</span></span><span class=line><span class=cl>| Predictability | High                            | Varies with crowding and interference  |
</span></span></code></pre></div><hr><h2 id=42-sealed-envelopes-and-secret-handshakes-the-tls-ceremony>4.2 Sealed Envelopes and Secret Handshakes: The TLS Ceremony<a hidden class=anchor aria-hidden=true href=#42-sealed-envelopes-and-secret-handshakes-the-tls-ceremony>#</a></h2><p>Earlier we treated packets as envelopes travelling through the city. To add basic integrity you might imagine putting a wax seal on the flap: if the seal is intact, the letter wasn’t changed.</p><p>Modern web security needs more than that. Before you write anything sensitive in the letter, you want to be sure of two things:</p><ol><li><p><strong>Authentication – Who is on the other side?</strong><br>Am I really talking to my bank, or to an attacker in a fake building?</p></li><li><p><strong>Encryption – Can anyone read this if they intercept it?</strong><br>Even if someone on the street copies every envelope, can they understand the contents?</p></li></ol><p>On the web, these two goals are handled by <strong>TLS (Transport Layer Security)</strong> – the protocol behind the “S” in HTTPS. The process starts with the <strong>TLS handshake</strong>, which you can think of as a short <strong>diplomatic ceremony</strong> that happens before the real conversation begins.</p><h3 id=the-tls-handshake-as-a-diplomatic-ritual>The TLS Handshake as a Diplomatic Ritual<a hidden class=anchor aria-hidden=true href=#the-tls-handshake-as-a-diplomatic-ritual>#</a></h3><p>Here is a simplified view of what happens when your browser connects securely to a site:</p><ol><li><p><strong>Greetings and options</strong><br>Your browser sends a <em>ClientHello</em>:<br>“Hello, I’d like to talk securely. Here are the encryption methods I understand.”<br>The server replies with a <em>ServerHello</em>, choosing a method both sides support.</p></li><li><p><strong>Presenting credentials</strong><br>The server now hands over its <strong>certificate</strong> – a digitally signed ID card.<br>It says something like: “I am <code>www.mybank.com</code>, and here is my public key.”</p></li><li><p><strong>Checking the chain of trust</strong><br>Your browser checks who signed that ID card.<br>The certificate is signed by a <strong>Certificate Authority (CA)</strong> – a trusted notary.<br>Your operating system and browser ship with a list of CAs they already trust.<br>If the signatures check out and the name on the certificate matches the site you asked for, the browser accepts the server’s identity.</p></li><li><p><strong>Agreeing on a shared secret</strong><br>Now that identity is established, both sides need a fresh, one-time-use key for this specific session.<br>They use a key-exchange algorithm (often Diffie–Hellman based) to create a <strong>shared secret</strong> in public:</p><ul><li>Each side generates some private and public values.</li><li>They exchange the public values.</li><li>Using those, each side independently derives the same secret key.</li></ul><p>An eavesdropper can see the exchange but cannot compute the secret key. This gives us <strong>forward secrecy</strong>: even if the server’s long-term private key is stolen later, past conversations cannot be decrypted.</p></li><li><p><strong>Switching to encrypted conversation</strong><br>Once both sides agree that the handshake is complete, they start using the shared key to encrypt and authenticate all further data. From this point, your HTTP requests and responses travel inside a protected tunnel.</p></li></ol><blockquote><p><strong>In short:</strong> TLS starts with a ceremony that proves identity using certificates and then sets up a unique shared key. Only after that do you send sensitive data.</p></blockquote><h3 id=technical-deep-dive-1>Technical Deep Dive<a hidden class=anchor aria-hidden=true href=#technical-deep-dive-1>#</a></h3><p>Some important TLS details behind the analogy:</p><ul><li><p><strong>TLS vs SSL</strong><br>SSL is the older protocol that TLS replaces. People still say “SSL certificates” in conversation, but modern secure web traffic uses TLS (for example, TLS 1.2 or TLS 1.3).</p></li><li><p><strong>Certificate chains</strong><br>Your browser may not trust a server’s certificate directly. Instead, the server sends its own certificate plus one or more <strong>intermediate</strong> certificates.<br>The browser walks this chain until it reaches a <strong>root CA</strong> in its trusted store. This allows a small number of root CAs to delegate signing authority safely.</p></li><li><p><strong>Asymmetric and symmetric cryptography</strong><br>TLS uses both:</p><ul><li><strong>Asymmetric crypto</strong> (public/private keys) during the handshake for authentication and key exchange. It is flexible but relatively expensive.</li><li><strong>Symmetric crypto</strong> (a shared key) for the bulk of the data once the handshake is done. It is much faster, which is why it is used for day-to-day traffic.</li></ul></li><li><p><strong>Certificates for internal systems</strong><br>The same ideas apply inside your own infrastructure:</p><ul><li>Internal services can use TLS to secure traffic inside a data centre or VPC.</li><li>Private certificate authorities can issue certificates for internal hostnames.</li><li>Service meshes (next section) often rely on this to implement mutual TLS automatically.</li></ul></li></ul><hr><h2 id=43-the-service-mesh-personal-ushers-for-every-room>4.3 The Service Mesh: Personal Ushers for Every Room<a hidden class=anchor aria-hidden=true href=#43-the-service-mesh-personal-ushers-for-every-room>#</a></h2><p>Our cloud hotel now has:</p><ul><li>Guards at the main entrances (firewalls, gateways).</li><li>Guards at individual room doors (security groups, host-level firewalls).</li><li>Badges and keycards that control who may enter which area (IAM).</li></ul><p>This protects who can get <strong>into</strong> the building or a room. But in a modern application, most of the traffic is not coming from the outside world – it is <strong>room-to-room</strong> conversation between internal services.</p><p>If you use a microservices architecture, you might have:</p><ul><li>A room that only handles authentication.</li><li>A room that checks inventory.</li><li>A room that processes payments.</li><li>Many more that together form one product.</li></ul><p>All of these rooms are talking to each other constantly. Several problems appear:</p><ul><li>How do you ensure each internal conversation is encrypted and authenticated?</li><li>How do you apply consistent policies (timeouts, retries, rate limits) everywhere?</li><li>How do you get a clear, uniform view of who is talking to whom and how it’s going?</li></ul><p>Door guards are not enough; you also need help in the <strong>hallways</strong>.</p><h3 id=the-personal-usher-sidecar-proxies>The Personal Usher: Sidecar Proxies<a hidden class=anchor aria-hidden=true href=#the-personal-usher-sidecar-proxies>#</a></h3><p>Imagine that instead of only having guards at doors, you assign a <strong>personal usher</strong> to every room on your floor:</p><ul><li>The usher stands just outside the door.</li><li>The person inside the room only ever hands messages to their usher.</li><li>When Room A wants to talk to Room B, the usher for A coordinates with the usher for B.</li><li>The two ushers handle routing, retries, encryption and logging.</li></ul><p>The applications inside the rooms no longer have to know about:</p><ul><li>How to do TLS correctly.</li><li>Which addresses to call for each service.</li><li>How to implement complex resilience patterns.</li></ul><p>They just talk to their local usher in a simple, consistent way.</p><p>In networking terms, each usher is a <strong>sidecar proxy</strong>, and the collection of ushers plus their control system is a <strong>service mesh</strong>.</p><p>The ushers can provide powerful features:</p><ul><li><p><strong>Zero-trust security</strong><br>All traffic between ushers is encrypted, typically using <strong>mutual TLS (mTLS)</strong>.<br>That means both sides present certificates and verify each other’s identity, even inside your own network.</p></li><li><p><strong>Traffic management and resilience</strong><br>The ushers can:</p><ul><li>Retry failed requests with sensible limits.</li><li>Distribute traffic across multiple instances of a service (load balancing).</li><li>Stop sending requests to a misbehaving instance temporarily (circuit breaking).</li><li>Apply rate limits or timeouts without changing application code.</li></ul></li><li><p><strong>Observability</strong><br>Because every request passes through the ushers, they can log:</p><ul><li>Which service called which other service.</li><li>How long the request took.</li><li>Whether it succeeded or failed.<br>This gives you uniform metrics, logs and traces across the entire mesh.</li></ul></li></ul><blockquote><p><strong>Key takeaway:</strong> A service mesh moves a lot of networking and security logic out of application code and into a shared layer of proxies. Each service gets a personal usher that speaks the network’s “native language” on its behalf.</p></blockquote><h3 id=technical-deep-dive-2>Technical Deep Dive<a hidden class=anchor aria-hidden=true href=#technical-deep-dive-2>#</a></h3><p>At a high level, most service meshes share the same building blocks:</p><ul><li><p><strong>Data plane</strong><br>The network of sidecar proxies that sit next to each service instance.<br>Popular implementations include Envoy and Linkerd.<br>The data plane handles:</p><ul><li>Accepting and forwarding requests.</li><li>Applying policies (mTLS, retries, routing rules).</li><li>Emitting telemetry (metrics, logs, traces).</li></ul></li><li><p><strong>Control plane</strong><br>A central component such as Istio or Consul that:</p><ul><li>Knows which services exist and where they are.</li><li>Distributes configuration and security policies to the proxies.</li><li>Manages certificate rotation for mTLS.</li><li>Aggregates telemetry for dashboards and alerts.</li></ul></li><li><p><strong>mTLS (Mutual TLS)</strong><br>Traditional TLS on the web authenticates only the server.<br>In <strong>mutual TLS</strong>, both client and server present certificates and prove their identities.<br>This is a crucial piece of “zero-trust” networking: you do not automatically trust traffic just because it originates from the same VPC or cluster.</p></li><li><p><strong>Trade-offs</strong><br>A service mesh brings strong security and operational benefits but also:</p><ul><li>Adds another critical component to operate and monitor.</li><li>Inserts extra hops into each request path, adding some latency.</li><li>Requires thoughtful rollout and good tooling to avoid complexity.</li></ul></li></ul><p>For small systems, the cost of a mesh may not be worth it. For large, fast-moving microservice environments, it can dramatically simplify networking concerns for application teams.</p><hr><h2 id=recap-and-small-exercises>Recap and Small Exercises<a hidden class=anchor aria-hidden=true href=#recap-and-small-exercises>#</a></h2><h3 id=what-you-should-now-be-able-to-explain>What You Should Now Be Able to Explain<a hidden class=anchor aria-hidden=true href=#what-you-should-now-be-able-to-explain>#</a></h3><p>After this chapter, you should be able to explain, in your own words:</p><ul><li>Why Wi-Fi behaves like a crowded street market and how CSMA/CA helps devices share the air.</li><li>What happens during a TLS handshake and why it provides authentication and forward secrecy.</li><li>What a service mesh is, how sidecar proxies act as personal ushers for each service, and what problems this solves.</li></ul><h3 id=exercises>Exercises<a hidden class=anchor aria-hidden=true href=#exercises>#</a></h3><ol><li><p><strong>Wi-Fi observation at home or work</strong></p><ul><li>Use your router or operating system tools to inspect:<ul><li>Which Wi-Fi band you are using (2.4, 5, or 6 GHz).</li><li>How many neighbouring networks are visible.</li></ul></li><li>Relate what you see back to the street-market analogy (crowding, interference, channel selection).</li></ul></li><li><p><strong>Inspect a TLS connection</strong></p><ul><li>Visit a site that uses HTTPS in your browser.</li><li>Use the browser’s developer tools or a command like <code>openssl s_client</code> to inspect:<ul><li>The certificate chain.</li><li>The protocol version (e.g. TLS 1.2 vs TLS 1.3).</li></ul></li><li>Write down, step by step, how the diplomatic ceremony you see maps to the TLS handshake stages in this chapter.</li></ul></li><li><p><strong>Draw a service-mesh floor plan</strong></p><ul><li>Take a small microservice system you know (or invent one with 4–6 services).</li><li>Sketch:<ul><li>Each service as a room.</li><li>A sidecar proxy/usher next to each room.</li><li>The control plane as a “head usher” office.</li></ul></li><li>Mark where mTLS would be terminating for each hop.</li></ul></li><li><p><strong>Decide if you need a mesh</strong></p><ul><li>Think about an application you work on (or would like to build).</li><li>List:<ul><li>The number of services.</li><li>The security requirements.</li><li>The operational pain around retries, timeouts, and observability.</li></ul></li><li>Based on that, argue for or against adopting a service mesh, using the trade-offs discussed above.</li></ul></li></ol><hr><p>In the final part of the book, the appendices bring all these ideas together into quick-reference blueprints, troubleshooting checklists, and a glossary you can revisit whenever you feel lost in the city.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://memo.mx/posts/understanding-computer-networks-by-analogy-part-3/><span class=title>« Prev</span><br><span>Understanding Computer Networks by Analogy: Part 3 - Hotels as the Cloud</span>
</a><a class=next href=https://memo.mx/posts/multi-region-series-part-8-chaos/><span class=title>Next »</span><br><span>Multi Region Cloud Training Lab: Part 8 - Chaos Testing</span></a></nav></footer></article></main><footer class=footer></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
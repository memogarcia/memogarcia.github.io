<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Understanding Computer Networks by Analogy - Part 2 - Switches and Routers | Memo Garcia</title>
<meta name="keywords" content="">
<meta name="description" content="Switches or &ldquo;The floor concierge&rdquo; Imagine that you want to send a package from room 69 to room 62. In a typical building you cannot go to your neighbor and give them the package, it’s rude, you need to do it through the floor concierge.
The concierge or switch has a table of everyone&rsquo;s door numbers:
| Floor | Room number | Door number | |-------|-------------|-------------| | 6 | 602 | 1 | | 6 | 609 | 1 | Remember that each room can have many doors.">

<link rel="canonical"
    href="https://memo.mx/posts/understanding-computer-networks-by-analogy-part-2/">
<meta name="google-site-verification" content="G-ZRB1GGCC9B">
<link crossorigin="anonymous" href="/assets/css/stylesheet.87a6568705425956af21ae7694f132965e875d50dfea91f7793fffb7ed438ae1.css" integrity="sha256-h6ZWhwVCWVavIa52lPEyll6HXVDf6pH3eT//t&#43;1DiuE="
    rel="preload stylesheet" as="style">
<link rel="icon" href="https://memo.mx/%20favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://memo.mx/%20favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://memo.mx/%20favicon-32x32.png">
<link rel="apple-touch-icon" href="https://memo.mx/%20apple-touch-icon.png">
<link rel="mask-icon" href="https://memo.mx/%20safari-pinned-tab.svg">
<meta name="theme-color" content=" #2e2e33">
<meta name="msapplication-TileColor" content=" #2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }
    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }
    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZRB1GGCC9B"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-ZRB1GGCC9B', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Understanding Computer Networks by Analogy - Part 2 - Switches and Routers" />
<meta property="og:description" content="Switches or &ldquo;The floor concierge&rdquo; Imagine that you want to send a package from room 69 to room 62. In a typical building you cannot go to your neighbor and give them the package, it’s rude, you need to do it through the floor concierge.
The concierge or switch has a table of everyone&rsquo;s door numbers:
| Floor | Room number | Door number | |-------|-------------|-------------| | 6 | 602 | 1 | | 6 | 609 | 1 | Remember that each room can have many doors." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://memo.mx/posts/understanding-computer-networks-by-analogy-part-2/" /><meta property="og:image" content="https://memo.mx/papermod-cover.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-21T00:53:23&#43;01:00" />
<meta property="article:modified_time" content="2023-01-09T16:39:57&#43;09:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://memo.mx/papermod-cover.png"/>

<meta name="twitter:title" content="Understanding Computer Networks by Analogy - Part 2 - Switches and Routers"/>
<meta name="twitter:description" content="Switches or &ldquo;The floor concierge&rdquo; Imagine that you want to send a package from room 69 to room 62. In a typical building you cannot go to your neighbor and give them the package, it’s rude, you need to do it through the floor concierge.
The concierge or switch has a table of everyone&rsquo;s door numbers:
| Floor | Room number | Door number | |-------|-------------|-------------| | 6 | 602 | 1 | | 6 | 609 | 1 | Remember that each room can have many doors."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://memo.mx/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Understanding Computer Networks by Analogy - Part 2 - Switches and Routers",
      "item": "https://memo.mx/posts/understanding-computer-networks-by-analogy-part-2/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Understanding Computer Networks by Analogy - Part 2 - Switches and Routers",
  "name": "Understanding Computer Networks by Analogy - Part 2 - Switches and Routers",
  "description": "Switches or \u0026ldquo;The floor concierge\u0026rdquo; Imagine that you want to send a package from room 69 to room 62. In a typical building you cannot go to your neighbor and give them the package, it’s rude, you need to do it through the floor concierge.\nThe concierge or switch has a table of everyone\u0026rsquo;s door numbers:\n| Floor | Room number | Door number | |-------|-------------|-------------| | 6 | 602 | 1 | | 6 | 609 | 1 | Remember that each room can have many doors.",
  "keywords": [
    
  ],
  "articleBody": "Switches or “The floor concierge” Imagine that you want to send a package from room 69 to room 62. In a typical building you cannot go to your neighbor and give them the package, it’s rude, you need to do it through the floor concierge.\nThe concierge or switch has a table of everyone’s door numbers:\n| Floor | Room number | Door number | |-------|-------------|-------------| | 6 | 602 | 1 | | 6 | 609 | 1 | Remember that each room can have many doors.\nIn reality the switch has a table that looks like this:\n| Vlan | MAC Address | Port | |------|-------------------|-------| | 6 | aa:aa:aa:aa:aa:aa | fa0/2 | | 6 | ff:ff:ff:ff:ff:ff | fa0/3 | The concierge knows to which door exactly to deliver the package.\nIn other words, a switch connects computers in a network.\nNow, the concierge’s capacity is limited by several factors:\nSize of the sending door - speed of your interface Size of the receiving door - speed of their interface Size of the hallway in which the package is moving - “medium speed” (cable, wireless, etc.) Size of the concierge desk - switch port speed Your concierge (switch) have multple roles as well.\nPackage monitoring - Traffic monitoring Package priority - QoS Bundle many doors for improved speed or redundancy - link aggregation Block packages from unwanted rooms - MAC filtering or port disabling Door monitoring - SNMP And many more But, what if you want to send your package to your neighbor in the 2nd floor?\nEnter the…\nRouters or “The building concierge” This building concierge or router is the one handling the packages from one floor to another.\nIn other words, a router connects many networks together.\nSame as the floor concierge, it has a table of rooms, but it uses the room number rather than the door number.\n| Floor destination | Room quantity | Elevator door number | Room number | Notes | |:-----------------:|:-------------:|:--------------------:|:-----------:|------------------| | 1 | 256 | 255 | 1 | Easy to deliver | | 2 | 256 | 255 | 2 | Deliver at night | This table will translate to something like this:\n| Network destination | Netmask | Gateway | Interface | Metric | |:-------------------:|:---------------:|:-----------:|:-----------:|--------| | 192.168.1.1 | 255.255.255.255 | 192.168.1.255 | 192.168.1.1 | 1 | | 192.168.2.2 | 255.255.255.255 | 192.168.2.255 | 192.168.2.2 | 10 | The building concierge (router) has an entry for notes (metrics) to decide which route or time is best to deliver the package to its destination.\nBut it cannot do it alone, it needs the floors to be connected somehow… like with an elevator or gateway\nThis elevator behaves like a normal room, in the sense that it has a door, but it can move from floor to floor, which means that it has a door “assigned” in floor 1 and 2.\nThis door is managed by the building concierge (router) not the floor concierge (switch). When a package needs to leave the floor, the floor concierge sends the package to the building concierge and it deliver the package to its destination.\nFrom the floor concierge (switch) perspective, is another room with a door number (MAC Address) and it can send/receive packages in the same way as if the packages were in the same floor.\nOver time, the building concierge (router) can learn new ways to deliver the packages more efficiently and work with packages based on priority or QoS.\nSeries Networks and subnets or building layouts Switches and Routers or how rooms can communicate between floors Network protocols or how rooms communicate Internet, public IPs, NAT, DNS or how to connect rooms between buildings High performance networking or how to speed up the communication between rooms using high speed roads and other techniques SDN or dynamic floor arrangement Contributions If you want contribute, please send a pull request or open an issue to this repo\nLicense MIT License Copyright (c) 2022 Guillermo Ramirez Garcia Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. ",
  "wordCount" : "825",
  "inLanguage": "en",
  "datePublished": "2020-08-21T00:53:23+01:00",
  "dateModified": "2023-01-09T16:39:57+09:00",
  "author":{
    "@type": "Person",
    "name": "Memo Garcia"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://memo.mx/posts/understanding-computer-networks-by-analogy-part-2/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Memo Garcia",
    "logo": {
      "@type": "ImageObject",
      "url": "https://memo.mx/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://memo.mx" accesskey="h" title="Memo Garcia (Alt + H)">Memo Garcia</a>
                    <div class="logo-switches">
                        <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                            <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                            </svg>
                            <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <circle cx="12" cy="12" r="5"></circle>
                                <line x1="12" y1="1" x2="12" y2="3"></line>
                                <line x1="12" y1="21" x2="12" y2="23"></line>
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                <line x1="1" y1="12" x2="3" y2="12"></line>
                                <line x1="21" y1="12" x2="23" y2="12"></line>
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                            </svg>
                        </button>
                    </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://memo.mx/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://memogarcia.gitbook.io/continuous-learning/" title="Continuous Learning">
                    <span>Continuous Learning</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header><main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Understanding Computer Networks by Analogy - Part 2 - Switches and Routers
    </h1>
    <div class="post-meta"><span title='2020-08-21 00:53:23 +0100 +0100'>August 21, 2020</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Memo Garcia

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#switches-or-the-floor-concierge" aria-label="Switches or &amp;ldquo;The floor concierge&amp;rdquo;">Switches or &ldquo;The floor concierge&rdquo;</a></li>
                <li>
                    <a href="#routers-or-the-building-concierge" aria-label="Routers or &amp;ldquo;The building concierge&amp;rdquo;">Routers or &ldquo;The building concierge&rdquo;</a></li>
                <li>
                    <a href="#series" aria-label="Series">Series</a></li>
                <li>
                    <a href="#contributions" aria-label="Contributions">Contributions</a></li>
                <li>
                    <a href="#license" aria-label="License">License</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="switches-or-the-floor-concierge">Switches or &ldquo;The floor concierge&rdquo;<a hidden class="anchor" aria-hidden="true" href="#switches-or-the-floor-concierge">#</a></h2>
<p>Imagine that you want to send a package from room 69 to room 62. In a typical building you cannot go to your neighbor and give them the package, it’s rude, you need to do it through the floor concierge.</p>
<p>The concierge or <a href="https://en.wikipedia.org/wiki/Network_switch">switch</a> has a table of everyone&rsquo;s door numbers:</p>
<pre><code>| Floor | Room number | Door number |
|-------|-------------|-------------|
| 6     | 602         | 1           |
| 6     | 609         | 1           |
</code></pre>
<p>Remember that each room can have many doors.</p>
<p>In reality the switch has a table that looks like this:</p>
<pre><code>| Vlan | MAC Address       | Port  |
|------|-------------------|-------|
| 6    | aa:aa:aa:aa:aa:aa | fa0/2 |
| 6    | ff:ff:ff:ff:ff:ff | fa0/3 |
</code></pre>
<p>The concierge knows to which door exactly to deliver the package.</p>
<p>In other words, <strong>a switch connects computers in a network</strong>.</p>
<p>Now, the concierge&rsquo;s capacity is limited by several factors:</p>
<ol>
<li>Size of the sending door - <em>speed of your interface</em></li>
<li>Size of the receiving door - <em>speed of their interface</em></li>
<li>Size of the hallway in which the package is moving - <em>&ldquo;medium speed&rdquo; (cable, wireless, etc.)</em></li>
<li>Size of the concierge desk - <em>switch port speed</em></li>
</ol>
<p><img loading="lazy" src="/img/concierge1.png" alt="concierge1"  />
</p>
<p>Your concierge (switch) have multple roles as well.</p>
<ol>
<li>Package monitoring - <em>Traffic monitoring</em></li>
<li>Package priority - <em>QoS</em></li>
<li>Bundle many doors for improved speed or redundancy - <em>link aggregation</em></li>
<li>Block packages from unwanted rooms - <em>MAC filtering</em> or <em>port disabling</em></li>
<li>Door monitoring - <em>SNMP</em></li>
<li>And many more</li>
</ol>
<p>But, what if you want to send your package to your neighbor in the 2nd floor?</p>
<p>Enter the&hellip;</p>
<h2 id="routers-or-the-building-concierge">Routers or &ldquo;The building concierge&rdquo;<a hidden class="anchor" aria-hidden="true" href="#routers-or-the-building-concierge">#</a></h2>
<p>This building concierge or <a href="https://en.wikipedia.org/wiki/Router_(computing)">router</a> is the one handling the packages from one floor to another.</p>
<p>In other words, <strong>a router connects many networks together</strong>.</p>
<p>Same as the floor concierge, it has a table of rooms, but it uses the room number rather than the door number.</p>
<pre><code>| Floor destination | Room quantity | Elevator door number | Room number | Notes            |
|:-----------------:|:-------------:|:--------------------:|:-----------:|------------------|
| 1                 | 256           | 255                    | 1           | Easy to deliver  |
| 2                 | 256           | 255                    | 2           | Deliver at night |
</code></pre>
<p>This table will translate to something like this:</p>
<pre><code>| Network destination |     Netmask     |   Gateway   |  Interface  | Metric |
|:-------------------:|:---------------:|:-----------:|:-----------:|--------|
| 192.168.1.1         | 255.255.255.255 | 192.168.1.255 | 192.168.1.1 | 1      |
| 192.168.2.2         | 255.255.255.255 | 192.168.2.255 | 192.168.2.2 | 10     |
</code></pre>
<p>The building concierge (router) has an entry for notes (metrics) to decide which route or time is best to deliver the package to its destination.</p>
<p>But it cannot do it alone, it needs the floors to be connected somehow&hellip; like with an elevator or <a href="https://en.wikipedia.org/wiki/Gateway_(telecommunications)">gateway</a></p>
<p>This elevator behaves like a normal room, in the sense that it has a door, but it can move from floor to floor, which means that it has a door &ldquo;assigned&rdquo; in floor 1 and 2.</p>
<p>This door is managed by the building concierge (router) not the floor concierge (switch). When a package needs to leave the floor, the floor concierge sends the package to the building concierge and it deliver the package to its destination.</p>
<p><img loading="lazy" src="/img/concierge2.png" alt="concierge2"  />
</p>
<p>From the floor concierge (switch) perspective, is another room with a door number (MAC Address) and it can send/receive packages in the same way as if the packages were in the same floor.</p>
<p><img loading="lazy" src="/img/concierge3.png" alt="concierge3"  />
</p>
<p>Over time, the building concierge (router) can learn new ways to deliver the packages more efficiently and work with packages based on priority or <em>QoS</em>.</p>
<h2 id="series">Series<a hidden class="anchor" aria-hidden="true" href="#series">#</a></h2>
<ol>
<li><a href="../understanding-computer-networks-by-analogy/">Networks and subnets or building layouts</a></li>
<li><a href="../understanding-computer-networks-by-analogy-part-2/">Switches and Routers or how rooms can communicate between floors</a></li>
<li>Network protocols or how rooms communicate</li>
<li>Internet, public IPs, NAT, DNS or how to connect rooms between buildings</li>
<li>High performance networking or how to speed up the communication between rooms using high speed roads and other techniques</li>
<li>SDN or dynamic floor arrangement</li>
</ol>
<h2 id="contributions">Contributions<a hidden class="anchor" aria-hidden="true" href="#contributions">#</a></h2>
<p>If you want contribute, please send a pull request or open an issue to this <a href="https://github.com/memogarcia/memogarcia.github.io/">repo</a></p>
<h2 id="license">License<a hidden class="anchor" aria-hidden="true" href="#license">#</a></h2>
<pre><code>MIT License

Copyright (c) 2022 Guillermo Ramirez Garcia

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</code></pre>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://memo.mx/posts/i3wm-wsl2/">
    <span class="title">« Prev</span>
    <br>
    <span>i3 running on WSL2</span>
  </a>
  <a class="next" href="https://memo.mx/posts/understanding-computer-networks-by-analogy/">
    <span class="title">Next »</span>
    <br>
    <span>Understanding Computer Networks by Analogy - Part 1 - Networks and subnets</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">

</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script></body>

</html>

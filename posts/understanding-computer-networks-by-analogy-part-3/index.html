<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Understanding Computer Networks by Analogy: Part 3 - Hotels as the Cloud | Memo Garcia</title>
<meta name=keywords content><meta name=description content="Think of the cloud as a hotel: you rent a private floor, connect to the rest of the city through controlled doors, and use badges to decide who can go where.
License for this chapter: CC BY-NC-ND 4.0
What This Chapter Covers In Part 1, we treated your local network as a building you own and operate.
In Part 2, we walked through the city, following your envelopes across the internet."><link rel=canonical href=https://memo.mx/posts/understanding-computer-networks-by-analogy-part-3/><meta name=google-site-verification content="G-ZRB1GGCC9B"><link crossorigin=anonymous href=/assets/css/stylesheet.d1467e28595903f993a7e37893057cefe5f69aece461c850796bf5b0a3bf422a.css integrity="sha256-0UZ+KFlZA/mTp+N4kwV87+X2muzkYchQeWv1sKO/Qio=" rel="preload stylesheet" as=style><link rel=icon href=https://memo.mx/%20favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://memo.mx/%20favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://memo.mx/%20favicon-32x32.png><link rel=apple-touch-icon href=https://memo.mx/%20apple-touch-icon.png><link rel=mask-icon href=https://memo.mx/%20safari-pinned-tab.svg><meta name=theme-color content="#0d0221"><meta name=msapplication-TileColor content="#0d0221"><link rel=alternate hreflang=en href=https://memo.mx/posts/understanding-computer-networks-by-analogy-part-3/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZRB1GGCC9B"></script><script>var dnt,doNotTrack=!1;if(!0&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZRB1GGCC9B")}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://memo.mx/posts/"},{"@type":"ListItem","position":2,"name":"Understanding Computer Networks by Analogy: Part 3 - Hotels as the Cloud","item":"https://memo.mx/posts/understanding-computer-networks-by-analogy-part-3/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Understanding Computer Networks by Analogy: Part 3 - Hotels as the Cloud","name":"Understanding Computer Networks by Analogy: Part 3 - Hotels as the Cloud","description":"Think of the cloud as a hotel: you rent a private floor, connect to the rest of the city through controlled doors, and use badges to decide who can go where.\nLicense for this chapter: CC BY-NC-ND 4.0\nWhat This Chapter Covers In Part 1, we treated your local network as a building you own and operate.\nIn Part 2, we walked through the city, following your envelopes across the internet.","keywords":[],"articleBody":" Think of the cloud as a hotel: you rent a private floor, connect to the rest of the city through controlled doors, and use badges to decide who can go where.\nLicense for this chapter: CC BY-NC-ND 4.0\nWhat This Chapter Covers In Part 1, we treated your local network as a building you own and operate.\nIn Part 2, we walked through the city, following your envelopes across the internet.\nIn this chapter, we move into a hotel – a shared, professionally managed building that represents a major cloud provider.\nBy the end of this chapter, you should be able to:\nDescribe the cloud model using the hotel analogy. Explain what a Virtual Private Cloud (VPC) is and how subnets map to different wings of your floor. Distinguish between an Internet Gateway, a NAT Gateway, and VPC Endpoints, and know when to use each. Explain the role of Identity and Access Management (IAM) and the principle of least privilege. Chapter 3: Hotels as the Cloud In the earlier chapters, you owned the entire building:\nYou knew every hallway. You controlled every lock. You were responsible for fixing the plumbing at 2 a.m. Now your business is growing:\nYou need more capacity. You need presence in multiple cities. You do not want to build and operate a physical building in each place. Owning dozens of buildings is expensive and slow. You need a different model.\nYou decide to check in to the cloud hotel.\n3.1 Hotels and Serviced Offices: The Cloud Model Think of a major cloud provider like Amazon Web Services (AWS), Google Cloud, or Microsoft Azure as a global chain of hotels.\nInstead of buying land and constructing your own building from scratch, you:\nRent space in one of their skyscrapers. Let the hotel staff manage: Power and cooling. Physical security. Elevators, cabling, and hardware. Focus on running your own business inside the rooms and floors you rent. You can choose from different levels of commitment:\nA single room for a weekend experiment. A cluster of rooms for a busy week-long conference. An entire floor with its own elevator bank if you need isolation and predictability. The pricing seems simple: you pay for the rooms and services you use.\nIn practice, the details matter:\nExtra services (room service, cross-city calls, special deliveries) show up on the bill. In cloud terms, this is data transfer, managed services, storage, and per-request charges. The main advantage of the hotel model is elasticity:\nWhen demand spikes (a large conference arrives), the hotel can instantly allocate more rooms. When traffic falls, you release rooms and costs drop. You do not have to own a conference center just for a few peak days each year. The trade-off:\nYou no longer control the wiring behind the walls. You do not design the power grid or the elevator system. You get fine-grained controls at your own doors and hallways, but the hotel always retains master keys to run the building safely. Key idea: The cloud is a professionally managed hotel. You trade ownership for elasticity and pay-per-use pricing, while keeping strong control inside your own area.\n3.2 Your Private Floor: The Virtual Private Cloud (VPC) When you move into the cloud hotel, you do not want a random scatter of rooms across the building.\nYou want a secure, isolated, and organized area – your own private floor.\nIn the cloud, this is your Virtual Private Cloud (VPC).\nA VPC is a logically isolated virtual network you define inside a cloud region. You choose the IP address range (the room numbering scheme). You divide the floor into subnets, just as we divided our original building into floors and wings. You might design the floor as follows:\nA public wing: Lobby, reception, marketing offices. Rooms that must be reachable from the hotel’s main entrance (public-facing web servers, APIs). A private back-office wing: Accounting, internal tools, sensitive data. No direct doors or windows to the outside world. A shared-services wing: Internal databases, message queues, shared application services. Accessible from other rooms on your floor, but not from the public street. The elevator bank on your floor is still your connection to the rest of the world, just as in previous chapters.\nYou decide:\nWhich elevators stop on your floor. Which rooms can use which elevators. Which rooms have peepholes to the street (public IP addresses) and which stay fully private. At this point the analogy bends slightly:\nA VPC is not necessarily a single physical floor. It is often carved out of multiple physical racks and data centers. The isolation is logical, enforced by the provider’s networking fabric and security systems. Core concept: A VPC is your private, secure floor in the cloud hotel. You design the layout with subnets and control all traffic entering and leaving using gateways and routing tables.\nTechnical Deep Dive VPC\nA logically isolated virtual network in a cloud provider’s region. You control: IP address range. Subnets. Route tables. Network gateways. Subnets\nA VPC is divided into one or more subnets. Each subnet usually lives in a single Availability Zone for high availability. Common patterns: Public subnet: Routing table has a route to the Internet Gateway. Resources can be publicly reachable (if they have public IPs). Private subnet: No route to the Internet Gateway. Resources are not directly reachable from the internet. IP Addressing\nWhen you create a VPC, you choose a private IP range (e.g. 10.0.0.0/16). This defines the room numbers on your floor. Subnets carve that space into smaller ranges, like wings. ASCII Diagram – A VPC Floor Plan +--------------------------------------------------------------------+ | Your Private Floor (VPC: 10.0.0.0/16) | | | | +---------------------------+ +--------------------------------+ | | | Public Wing (Subnet) | | Private Wing (Subnet) | | | | 10.0.1.0/24 | | 10.0.10.0/24 | | | | | | | | | | +-------------------+ | | +--------------------------+ | | | | | Web Server Room |\u003c------\u003e| | Application Server Room | | | | | | (Public IP) | | | | (Private IP) | | | | | +-------------------+ | | +--------------------------+ | | | | ^ | | | | | | +---------|-----------------+ +--------------|-----------------+ | | | v | | | +--------------------------+ | | | | Database Server Room | | | | | (Private IP) | | | | +--------------------------+ | | | | | +---------v------------------+ | | | Main Elevator (Router) | | | | - Route to Internet GW | | | | - Route to Private Wing | | | +----------------------------+ | | | +--------------------------------------------------------------------+ 3.3 The Hotel’s Many Doors: Gateways and Endpoints Your private floor is isolated, but it cannot be completely sealed off.\nIn practice, you need to:\nServe websites and APIs to the public internet. Download software updates and talk to external APIs. Use the hotel’s own internal services (like shared storage, managed databases, queues). A building needs doors. In the cloud, your VPC needs gateways and endpoints.\nThe Main Entrance: The Internet Gateway An Internet Gateway (IGW) is the hotel’s main entrance for your floor:\nIt is a two-way door between your VPC and the public internet. People from the outside can reach specific rooms on your floor. Rooms on your floor can initiate connections to the internet. To make a web server publicly reachable:\nAttach an Internet Gateway to your VPC. Add a route in the public subnet’s route table that points internet-bound traffic to the IGW. Give the web server a public IP (or an Elastic IP). Configure a Security Group (door guard) to allow specific inbound traffic (for example, HTTPS on port 443). If those pieces are in place:\nThe city directory (DNS) can map a domain name to your public IP. Traffic flows from the internet, through the IGW, along your routing table, and up to the correct room. The Staff-Only Exit: The NAT Gateway Rooms in your private wing have a different requirement:\nThey must never be reachable directly from the public street. They still need to go out to fetch software updates, call external APIs, or download data. For this, you use a NAT Gateway:\nThink of it as a staff-only exit at the back of the hotel. Only people who start inside your floor can use it. Outsiders cannot initiate a conversation through this door. How it works conceptually:\nWorkers from private rooms walk to the NAT exit and step out into the city. The guard at the door (the NAT Gateway) records: Which room initiated which connection. When responses come back: The guard checks the notes. Sends the envelopes back to the correct internal room. The external world only sees the NAT Gateway’s address, not the internal room numbers.\nThis preserves privacy while still allowing outbound connectivity.\nThe Private Service Door: VPC Endpoints Sometimes your employees need to use the hotel’s own shared amenities:\nA huge storage warehouse (object storage like S3). A document archive (managed databases). Internal messaging systems (queues, notification services). The naive approach:\nLeave your floor. Go down to the lobby. Walk out onto the public street. Walk back into the hotel through the public entrance to the warehouse. It works, but:\nYou expose yourself to the public street. You may pay for unnecessary public data transfer. It adds complexity to security and routing. A VPC Endpoint is a private service door between your floor and the hotel’s internal amenities:\nTraffic to certain services never leaves the hotel’s interior network. Your data avoids the public internet entirely. This is better for security, and often cheaper and faster. There are two main types:\nGateway Endpoints\nLike a special high-speed tunnel from your floor’s main junction to a big shared utility (for example, S3 or DynamoDB). You do not assign the utility a room on your floor. Instead, your route table says: “All requests for this service go through this private tunnel.” Interface Endpoints\nLike installing a new private door directly on your hallway. The cloud service gets a private IP on your floor. It feels as if the service lives on your floor. You can attach your own Security Group to that door. Key takeaway:\nUse the Internet Gateway for two-way public access. Use the NAT Gateway for one-way outbound access from private rooms. Use VPC Endpoints to reach the hotel’s own services without touching the public street. 3.4 Badges and Permissions: Identity and Access Management (IAM) Locks on doors are only part of hotel security. The crucial question is:\nWho are you, and what are you allowed to do?\nIn a hotel, this is handled with badges and keycards.\nIn the cloud, this is Identity and Access Management (IAM).\nIAM is the hotel’s internal security department:\nIt issues identities (badges and keycards). It defines which identities can open which doors. It enforces the principle of least privilege: Give each identity only the minimum permissions needed to do its job. Examples in the hotel:\nThe CEO might have a master keycard that opens almost any door. A developer might have access to the development wing, but not to finance. A cleaning robot (a service) might: Only open doors to empty rooms. Only operate between 3 a.m. and 5 a.m. A temporary contractor might have a badge that expires automatically at the end of the week. In the cloud:\nEvery user, application, and service has an identity. Each identity has policies attached to it. When a request reaches a door (for example, an API, a storage bucket, or a database): The network guard (Security Group / firewall) checks: Is traffic allowed from this hallway? The IAM system checks: Does this identity’s badge allow this action on this resource? Checklist:\nStart with the question: “Who is this?” Apply least privilege: give only the permissions that are truly needed. Treat powerful identities (master keys) with extreme care. Technical Deep Dive IAM Components\nUser Represents a human being. Has long-term credentials (passwords, access keys) if you choose to use them. Group A collection of users. You attach policies to the group so all members share the same permissions. Role An identity that can be assumed by a user, application, or service. Provides temporary credentials. Typical use: give a server or function a role that allows it to access a specific storage bucket, without embedding static keys. Policy A JSON document that defines permissions: Which actions are allowed or denied. On which resources. Under which conditions (time, source IP, MFA requirements, etc.). Authentication vs Authorization\nAuthentication Proving who you are. Example: logging in with a password and a multi-factor token. Analogy: showing your ID at the front desk. Authorization Deciding what you are allowed to do. Example: IAM policies that grant access to a specific bucket or API. Analogy: your keycard permissions defining which floors and rooms you can enter. Recap and Small Exercises What You Should Now Be Able to Explain By the end of this chapter, you should be comfortable explaining:\nThe cloud as a hotel where you rent space instead of owning the whole building. A VPC as your private floor, subdivided into subnets (wings) with controlled routing. The roles of: Internet Gateways (two-way public entrance), NAT Gateways (one-way staff exit for private rooms), VPC Endpoints (private doors to internal hotel services). IAM as the badge and keycard system that implements least privilege. Exercises Sketch Your First Cloud Floor\nPick an example application (for example, a simple web app with a database). Draw your VPC as a floor: Public wing (web/API). Private wing (application servers, databases). Mark which subnets would be public and which would be private. Place the Doors\nOn your sketch, show: Where the Internet Gateway connects. Where a NAT Gateway would sit for private subnets. Where you would add VPC Endpoints for storage or other managed services. Design IAM for a Small Team\nImagine a small team of three people: A developer. An operator (DevOps / SRE). A finance analyst. Write down: Which “wings” each needs access to. What roles or groups you would create. One example of a permission you would explicitly deny to reduce risk. Map the Analogy to a Real Cloud Account\nIf you have access to a cloud account (even a sandbox): Find an existing VPC and identify: Its CIDR range (room numbering scheme). Its subnets and which ones are public or private. Any Internet Gateways, NAT Gateways, or VPC Endpoints. Find one IAM role and interpret it: Who can assume it? Which “doors” does it open? In the next part, we will extend the hotel analogy to more advanced architectures:\non-demand services (room service), globally distributed hotels (multi-region), and patterns that help you keep your systems resilient as they grow.\n","wordCount":"2432","inLanguage":"en","datePublished":"2025-10-18T22:39:16+09:00","dateModified":"2025-11-13T22:11:49+09:00","author":{"@type":"Person","name":"Memo Garcia"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://memo.mx/posts/understanding-computer-networks-by-analogy-part-3/"},"publisher":{"@type":"Person","name":"Memo Garcia","logo":{"@type":"ImageObject","url":"https://memo.mx/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://memo.mx/ accesskey=h title="Memo Garcia (Alt + H)">Memo Garcia</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://memo.mx/labs/ title=Labs><span>Labs</span></a></li><li><a href=https://memo.mx/books/ title=Books><span>Books</span></a></li><li><a href=https://memo.mx/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Understanding Computer Networks by Analogy: Part 3 - Hotels as the Cloud</h1><div class=post-meta><span title='2025-10-18 22:39:16 +0900 +0900'>October 18, 2025</span>&nbsp;·&nbsp;12 min&nbsp;·&nbsp;Memo Garcia</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#what-this-chapter-covers aria-label="What This Chapter Covers">What This Chapter Covers</a></li><li><a href=#chapter-3-hotels-as-the-cloud aria-label="Chapter 3: Hotels as the Cloud">Chapter 3: Hotels as the Cloud</a></li><li><a href=#31-hotels-and-serviced-offices-the-cloud-model aria-label="3.1 Hotels and Serviced Offices: The Cloud Model">3.1 Hotels and Serviced Offices: The Cloud Model</a></li><li><a href=#32-your-private-floor-the-virtual-private-cloud-vpc aria-label="3.2 Your Private Floor: The Virtual Private Cloud (VPC)">3.2 Your Private Floor: The Virtual Private Cloud (VPC)</a><ul><li><a href=#technical-deep-dive aria-label="Technical Deep Dive">Technical Deep Dive</a></li><li><a href=#ascii-diagram--a-vpc-floor-plan aria-label="ASCII Diagram – A VPC Floor Plan">ASCII Diagram – A VPC Floor Plan</a></li></ul></li><li><a href=#33-the-hotels-many-doors-gateways-and-endpoints aria-label="3.3 The Hotel’s Many Doors: Gateways and Endpoints">3.3 The Hotel’s Many Doors: Gateways and Endpoints</a><ul><li><a href=#the-main-entrance-the-internet-gateway aria-label="The Main Entrance: The Internet Gateway">The Main Entrance: The Internet Gateway</a></li><li><a href=#the-staff-only-exit-the-nat-gateway aria-label="The Staff-Only Exit: The NAT Gateway">The Staff-Only Exit: The NAT Gateway</a></li><li><a href=#the-private-service-door-vpc-endpoints aria-label="The Private Service Door: VPC Endpoints">The Private Service Door: VPC Endpoints</a></li></ul></li><li><a href=#34-badges-and-permissions-identity-and-access-management-iam aria-label="3.4 Badges and Permissions: Identity and Access Management (IAM)">3.4 Badges and Permissions: Identity and Access Management (IAM)</a><ul><li><a href=#technical-deep-dive-1 aria-label="Technical Deep Dive">Technical Deep Dive</a></li></ul></li><li><a href=#recap-and-small-exercises aria-label="Recap and Small Exercises">Recap and Small Exercises</a><ul><li><a href=#what-you-should-now-be-able-to-explain aria-label="What You Should Now Be Able to Explain">What You Should Now Be Able to Explain</a></li><li><a href=#exercises aria-label=Exercises>Exercises</a></li></ul></li></ul></div></details></div><div class=post-content><blockquote><p>Think of the cloud as a hotel: you rent a private floor, connect to the rest of the city through controlled doors, and use badges to decide who can go where.</p></blockquote><p>License for this chapter: CC BY-NC-ND 4.0</p><hr><h2 id=what-this-chapter-covers>What This Chapter Covers<a hidden class=anchor aria-hidden=true href=#what-this-chapter-covers>#</a></h2><p>In Part 1, we treated your local network as a building you own and operate.<br>In Part 2, we walked through the city, following your envelopes across the internet.</p><p>In this chapter, we move into a <strong>hotel</strong> – a shared, professionally managed building that represents a major cloud provider.</p><p>By the end of this chapter, you should be able to:</p><ul><li>Describe the <strong>cloud model</strong> using the hotel analogy.</li><li>Explain what a <strong>Virtual Private Cloud (VPC)</strong> is and how subnets map to different wings of your floor.</li><li>Distinguish between an <strong>Internet Gateway</strong>, a <strong>NAT Gateway</strong>, and <strong>VPC Endpoints</strong>, and know when to use each.</li><li>Explain the role of <strong>Identity and Access Management (IAM)</strong> and the principle of least privilege.</li></ul><hr><h2 id=chapter-3-hotels-as-the-cloud>Chapter 3: Hotels as the Cloud<a hidden class=anchor aria-hidden=true href=#chapter-3-hotels-as-the-cloud>#</a></h2><p>In the earlier chapters, you owned the entire building:</p><ul><li>You knew every hallway.</li><li>You controlled every lock.</li><li>You were responsible for fixing the plumbing at 2 a.m.</li></ul><p>Now your business is growing:</p><ul><li>You need more capacity.</li><li>You need presence in multiple cities.</li><li>You do not want to build and operate a physical building in each place.</li></ul><p>Owning dozens of buildings is expensive and slow. You need a different model.</p><p>You decide to <strong>check in to the cloud hotel</strong>.</p><hr><h2 id=31-hotels-and-serviced-offices-the-cloud-model>3.1 Hotels and Serviced Offices: The Cloud Model<a hidden class=anchor aria-hidden=true href=#31-hotels-and-serviced-offices-the-cloud-model>#</a></h2><p>Think of a major cloud provider like Amazon Web Services (AWS), Google Cloud, or Microsoft Azure as a global chain of hotels.</p><p>Instead of buying land and constructing your own building from scratch, you:</p><ul><li>Rent space in one of their skyscrapers.</li><li>Let the hotel staff manage:<ul><li>Power and cooling.</li><li>Physical security.</li><li>Elevators, cabling, and hardware.</li></ul></li><li>Focus on running your own business inside the rooms and floors you rent.</li></ul><p>You can choose from different levels of commitment:</p><ul><li>A single room for a weekend experiment.</li><li>A cluster of rooms for a busy week-long conference.</li><li>An entire floor with its own elevator bank if you need isolation and predictability.</li></ul><p>The pricing seems simple: you pay for the rooms and services you use.<br>In practice, the details matter:</p><ul><li>Extra services (room service, cross-city calls, special deliveries) show up on the bill.</li><li>In cloud terms, this is data transfer, managed services, storage, and per-request charges.</li></ul><p>The main advantage of the hotel model is <strong>elasticity</strong>:</p><ul><li>When demand spikes (a large conference arrives), the hotel can instantly allocate more rooms.</li><li>When traffic falls, you release rooms and costs drop.</li><li>You do not have to own a conference center just for a few peak days each year.</li></ul><p>The trade-off:</p><ul><li>You no longer control the wiring behind the walls.</li><li>You do not design the power grid or the elevator system.</li><li>You get fine-grained controls at your own doors and hallways, but the hotel always retains master keys to run the building safely.</li></ul><blockquote><p><strong>Key idea:</strong> The cloud is a professionally managed hotel. You trade ownership for elasticity and pay-per-use pricing, while keeping strong control inside your own area.</p></blockquote><hr><h2 id=32-your-private-floor-the-virtual-private-cloud-vpc>3.2 Your Private Floor: The Virtual Private Cloud (VPC)<a hidden class=anchor aria-hidden=true href=#32-your-private-floor-the-virtual-private-cloud-vpc>#</a></h2><p>When you move into the cloud hotel, you do not want a random scatter of rooms across the building.<br>You want a secure, isolated, and organized area – <strong>your own private floor</strong>.</p><p>In the cloud, this is your <strong>Virtual Private Cloud (VPC)</strong>.</p><ul><li>A VPC is a logically isolated virtual network you define inside a cloud region.</li><li>You choose the IP address range (the room numbering scheme).</li><li>You divide the floor into <strong>subnets</strong>, just as we divided our original building into floors and wings.</li></ul><p>You might design the floor as follows:</p><ul><li>A <strong>public wing</strong>:<ul><li>Lobby, reception, marketing offices.</li><li>Rooms that must be reachable from the hotel’s main entrance (public-facing web servers, APIs).</li></ul></li><li>A <strong>private back-office wing</strong>:<ul><li>Accounting, internal tools, sensitive data.</li><li>No direct doors or windows to the outside world.</li></ul></li><li>A <strong>shared-services wing</strong>:<ul><li>Internal databases, message queues, shared application services.</li><li>Accessible from other rooms on your floor, but not from the public street.</li></ul></li></ul><p>The elevator bank on your floor is still your connection to the rest of the world, just as in previous chapters.<br>You decide:</p><ul><li>Which elevators stop on your floor.</li><li>Which rooms can use which elevators.</li><li>Which rooms have peepholes to the street (public IP addresses) and which stay fully private.</li></ul><p>At this point the analogy bends slightly:</p><ul><li>A VPC is not necessarily a single physical floor.</li><li>It is often carved out of multiple physical racks and data centers.</li><li>The isolation is logical, enforced by the provider’s networking fabric and security systems.</li></ul><blockquote><p><strong>Core concept:</strong> A VPC is your private, secure floor in the cloud hotel. You design the layout with subnets and control all traffic entering and leaving using gateways and routing tables.</p></blockquote><h3 id=technical-deep-dive>Technical Deep Dive<a hidden class=anchor aria-hidden=true href=#technical-deep-dive>#</a></h3><ul><li><p><strong>VPC</strong></p><ul><li>A logically isolated virtual network in a cloud provider’s region.</li><li>You control:<ul><li>IP address range.</li><li>Subnets.</li><li>Route tables.</li><li>Network gateways.</li></ul></li></ul></li><li><p><strong>Subnets</strong></p><ul><li>A VPC is divided into one or more subnets.</li><li>Each subnet usually lives in a single Availability Zone for high availability.</li><li>Common patterns:<ul><li><strong>Public subnet</strong>: Routing table has a route to the Internet Gateway. Resources can be publicly reachable (if they have public IPs).</li><li><strong>Private subnet</strong>: No route to the Internet Gateway. Resources are not directly reachable from the internet.</li></ul></li></ul></li><li><p><strong>IP Addressing</strong></p><ul><li>When you create a VPC, you choose a private IP range (e.g. <code>10.0.0.0/16</code>).</li><li>This defines the room numbers on your floor.</li><li>Subnets carve that space into smaller ranges, like wings.</li></ul></li></ul><h3 id=ascii-diagram--a-vpc-floor-plan>ASCII Diagram – A VPC Floor Plan<a hidden class=anchor aria-hidden=true href=#ascii-diagram--a-vpc-floor-plan>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>+--------------------------------------------------------------------+
</span></span><span class=line><span class=cl>| Your Private Floor (VPC: 10.0.0.0/16)                              |
</span></span><span class=line><span class=cl>|                                                                    |
</span></span><span class=line><span class=cl>|  +---------------------------+  +--------------------------------+  |
</span></span><span class=line><span class=cl>|  | Public Wing (Subnet)      |  | Private Wing (Subnet)          |  |
</span></span><span class=line><span class=cl>|  | 10.0.1.0/24               |  | 10.0.10.0/24                   |  |
</span></span><span class=line><span class=cl>|  |                           |  |                                |  |
</span></span><span class=line><span class=cl>|  |  +-------------------+    |  |  +--------------------------+  |  |
</span></span><span class=line><span class=cl>|  |  | Web Server Room   |&lt;------&gt;|  | Application Server Room  |  |  |
</span></span><span class=line><span class=cl>|  |  | (Public IP)       |    |  |  | (Private IP)             |  |  |
</span></span><span class=line><span class=cl>|  |  +-------------------+    |  |  +--------------------------+  |  |
</span></span><span class=line><span class=cl>|  |         ^                 |  |              |                 |  |
</span></span><span class=line><span class=cl>|  +---------|-----------------+  +--------------|-----------------+  |
</span></span><span class=line><span class=cl>|            |                                   v                    |
</span></span><span class=line><span class=cl>|            |                      +--------------------------+      |
</span></span><span class=line><span class=cl>|            |                      |   Database Server Room   |      |
</span></span><span class=line><span class=cl>|            |                      |      (Private IP)        |      |
</span></span><span class=line><span class=cl>|            |                      +--------------------------+      |
</span></span><span class=line><span class=cl>|            |                                                        |
</span></span><span class=line><span class=cl>|  +---------v------------------+                                    |
</span></span><span class=line><span class=cl>|  | Main Elevator (Router)     |                                    |
</span></span><span class=line><span class=cl>|  |   - Route to Internet GW   |                                    |
</span></span><span class=line><span class=cl>|  |   - Route to Private Wing  |                                    |
</span></span><span class=line><span class=cl>|  +----------------------------+                                    |
</span></span><span class=line><span class=cl>|                                                                    |
</span></span><span class=line><span class=cl>+--------------------------------------------------------------------+
</span></span></code></pre></div><hr><h2 id=33-the-hotels-many-doors-gateways-and-endpoints>3.3 The Hotel’s Many Doors: Gateways and Endpoints<a hidden class=anchor aria-hidden=true href=#33-the-hotels-many-doors-gateways-and-endpoints>#</a></h2><p>Your private floor is isolated, but it cannot be completely sealed off.<br>In practice, you need to:</p><ul><li>Serve websites and APIs to the public internet.</li><li>Download software updates and talk to external APIs.</li><li>Use the hotel’s own internal services (like shared storage, managed databases, queues).</li></ul><p>A building needs doors. In the cloud, your VPC needs <strong>gateways</strong> and <strong>endpoints</strong>.</p><h3 id=the-main-entrance-the-internet-gateway>The Main Entrance: The Internet Gateway<a hidden class=anchor aria-hidden=true href=#the-main-entrance-the-internet-gateway>#</a></h3><p>An <strong>Internet Gateway (IGW)</strong> is the hotel’s main entrance for your floor:</p><ul><li>It is a <strong>two-way door</strong> between your VPC and the public internet.</li><li>People from the outside can reach specific rooms on your floor.</li><li>Rooms on your floor can initiate connections to the internet.</li></ul><p>To make a web server publicly reachable:</p><ol><li>Attach an Internet Gateway to your VPC.</li><li>Add a route in the public subnet’s route table that points internet-bound traffic to the IGW.</li><li>Give the web server a public IP (or an Elastic IP).</li><li>Configure a Security Group (door guard) to allow specific inbound traffic (for example, HTTPS on port 443).</li></ol><p>If those pieces are in place:</p><ul><li>The city directory (DNS) can map a domain name to your public IP.</li><li>Traffic flows from the internet, through the IGW, along your routing table, and up to the correct room.</li></ul><h3 id=the-staff-only-exit-the-nat-gateway>The Staff-Only Exit: The NAT Gateway<a hidden class=anchor aria-hidden=true href=#the-staff-only-exit-the-nat-gateway>#</a></h3><p>Rooms in your <strong>private wing</strong> have a different requirement:</p><ul><li>They must never be reachable directly from the public street.</li><li>They still need to go out to fetch software updates, call external APIs, or download data.</li></ul><p>For this, you use a <strong>NAT Gateway</strong>:</p><ul><li>Think of it as a <strong>staff-only exit</strong> at the back of the hotel.</li><li>Only people who start inside your floor can use it.</li><li>Outsiders cannot initiate a conversation through this door.</li></ul><p>How it works conceptually:</p><ul><li>Workers from private rooms walk to the NAT exit and step out into the city.</li><li>The guard at the door (the NAT Gateway) records:<ul><li>Which room initiated which connection.</li></ul></li><li>When responses come back:<ul><li>The guard checks the notes.</li><li>Sends the envelopes back to the correct internal room.</li></ul></li></ul><p>The external world only sees the NAT Gateway’s address, not the internal room numbers.<br>This preserves privacy while still allowing outbound connectivity.</p><h3 id=the-private-service-door-vpc-endpoints>The Private Service Door: VPC Endpoints<a hidden class=anchor aria-hidden=true href=#the-private-service-door-vpc-endpoints>#</a></h3><p>Sometimes your employees need to use the hotel’s own shared amenities:</p><ul><li>A huge storage warehouse (object storage like S3).</li><li>A document archive (managed databases).</li><li>Internal messaging systems (queues, notification services).</li></ul><p>The naive approach:</p><ul><li>Leave your floor.</li><li>Go down to the lobby.</li><li>Walk out onto the public street.</li><li>Walk back into the hotel through the public entrance to the warehouse.</li></ul><p>It works, but:</p><ul><li>You expose yourself to the public street.</li><li>You may pay for unnecessary public data transfer.</li><li>It adds complexity to security and routing.</li></ul><p>A <strong>VPC Endpoint</strong> is a <strong>private service door</strong> between your floor and the hotel’s internal amenities:</p><ul><li>Traffic to certain services never leaves the hotel’s interior network.</li><li>Your data avoids the public internet entirely.</li><li>This is better for security, and often cheaper and faster.</li></ul><p>There are two main types:</p><ol><li><p><strong>Gateway Endpoints</strong></p><ul><li>Like a special high-speed tunnel from your floor’s main junction to a big shared utility (for example, S3 or DynamoDB).</li><li>You do not assign the utility a room on your floor.</li><li>Instead, your route table says: “All requests for this service go through this private tunnel.”</li></ul></li><li><p><strong>Interface Endpoints</strong></p><ul><li>Like installing a new private door directly on your hallway.</li><li>The cloud service gets a private IP on your floor.</li><li>It feels as if the service lives on your floor.</li><li>You can attach your own Security Group to that door.</li></ul></li></ol><blockquote><p><strong>Key takeaway:</strong></p><ul><li>Use the <strong>Internet Gateway</strong> for two-way public access.</li><li>Use the <strong>NAT Gateway</strong> for one-way outbound access from private rooms.</li><li>Use <strong>VPC Endpoints</strong> to reach the hotel’s own services without touching the public street.</li></ul></blockquote><hr><h2 id=34-badges-and-permissions-identity-and-access-management-iam>3.4 Badges and Permissions: Identity and Access Management (IAM)<a hidden class=anchor aria-hidden=true href=#34-badges-and-permissions-identity-and-access-management-iam>#</a></h2><p>Locks on doors are only part of hotel security. The crucial question is:</p><blockquote><p>Who are you, and what are you allowed to do?</p></blockquote><p>In a hotel, this is handled with <strong>badges and keycards</strong>.<br>In the cloud, this is <strong>Identity and Access Management (IAM)</strong>.</p><p>IAM is the hotel’s internal security department:</p><ul><li>It issues identities (badges and keycards).</li><li>It defines which identities can open which doors.</li><li>It enforces the principle of <strong>least privilege</strong>:<ul><li>Give each identity only the minimum permissions needed to do its job.</li></ul></li></ul><p>Examples in the hotel:</p><ul><li>The CEO might have a master keycard that opens almost any door.</li><li>A developer might have access to the development wing, but not to finance.</li><li>A cleaning robot (a service) might:<ul><li>Only open doors to empty rooms.</li><li>Only operate between 3 a.m. and 5 a.m.</li></ul></li><li>A temporary contractor might have a badge that expires automatically at the end of the week.</li></ul><p>In the cloud:</p><ul><li>Every user, application, and service has an <strong>identity</strong>.</li><li>Each identity has <strong>policies</strong> attached to it.</li><li>When a request reaches a door (for example, an API, a storage bucket, or a database):<ul><li>The network guard (Security Group / firewall) checks:<ul><li>Is traffic allowed from this hallway?</li></ul></li><li>The IAM system checks:<ul><li>Does this identity’s badge allow this action on this resource?</li></ul></li></ul></li></ul><blockquote><p><strong>Checklist:</strong></p><ul><li>Start with the question: “Who is this?”</li><li>Apply least privilege: give only the permissions that are truly needed.</li><li>Treat powerful identities (master keys) with extreme care.</li></ul></blockquote><h3 id=technical-deep-dive-1>Technical Deep Dive<a hidden class=anchor aria-hidden=true href=#technical-deep-dive-1>#</a></h3><ul><li><p><strong>IAM Components</strong></p><ul><li><strong>User</strong><ul><li>Represents a human being.</li><li>Has long-term credentials (passwords, access keys) if you choose to use them.</li></ul></li><li><strong>Group</strong><ul><li>A collection of users.</li><li>You attach policies to the group so all members share the same permissions.</li></ul></li><li><strong>Role</strong><ul><li>An identity that can be assumed by a user, application, or service.</li><li>Provides temporary credentials.</li><li>Typical use: give a server or function a role that allows it to access a specific storage bucket, without embedding static keys.</li></ul></li><li><strong>Policy</strong><ul><li>A JSON document that defines permissions:<ul><li>Which actions are allowed or denied.</li><li>On which resources.</li><li>Under which conditions (time, source IP, MFA requirements, etc.).</li></ul></li></ul></li></ul></li><li><p><strong>Authentication vs Authorization</strong></p><ul><li><strong>Authentication</strong><ul><li>Proving who you are.</li><li>Example: logging in with a password and a multi-factor token.</li><li>Analogy: showing your ID at the front desk.</li></ul></li><li><strong>Authorization</strong><ul><li>Deciding what you are allowed to do.</li><li>Example: IAM policies that grant access to a specific bucket or API.</li><li>Analogy: your keycard permissions defining which floors and rooms you can enter.</li></ul></li></ul></li></ul><hr><h2 id=recap-and-small-exercises>Recap and Small Exercises<a hidden class=anchor aria-hidden=true href=#recap-and-small-exercises>#</a></h2><h3 id=what-you-should-now-be-able-to-explain>What You Should Now Be Able to Explain<a hidden class=anchor aria-hidden=true href=#what-you-should-now-be-able-to-explain>#</a></h3><p>By the end of this chapter, you should be comfortable explaining:</p><ul><li>The <strong>cloud</strong> as a hotel where you rent space instead of owning the whole building.</li><li>A <strong>VPC</strong> as your private floor, subdivided into subnets (wings) with controlled routing.</li><li>The roles of:<ul><li><strong>Internet Gateways</strong> (two-way public entrance),</li><li><strong>NAT Gateways</strong> (one-way staff exit for private rooms),</li><li><strong>VPC Endpoints</strong> (private doors to internal hotel services).</li></ul></li><li><strong>IAM</strong> as the badge and keycard system that implements least privilege.</li></ul><h3 id=exercises>Exercises<a hidden class=anchor aria-hidden=true href=#exercises>#</a></h3><ol><li><p><strong>Sketch Your First Cloud Floor</strong></p><ul><li>Pick an example application (for example, a simple web app with a database).</li><li>Draw your VPC as a floor:<ul><li>Public wing (web/API).</li><li>Private wing (application servers, databases).</li></ul></li><li>Mark which subnets would be public and which would be private.</li></ul></li><li><p><strong>Place the Doors</strong></p><ul><li>On your sketch, show:<ul><li>Where the Internet Gateway connects.</li><li>Where a NAT Gateway would sit for private subnets.</li><li>Where you would add VPC Endpoints for storage or other managed services.</li></ul></li></ul></li><li><p><strong>Design IAM for a Small Team</strong></p><ul><li>Imagine a small team of three people:<ul><li>A developer.</li><li>An operator (DevOps / SRE).</li><li>A finance analyst.</li></ul></li><li>Write down:<ul><li>Which “wings” each needs access to.</li><li>What roles or groups you would create.</li><li>One example of a permission you would explicitly <strong>deny</strong> to reduce risk.</li></ul></li></ul></li><li><p><strong>Map the Analogy to a Real Cloud Account</strong></p><ul><li>If you have access to a cloud account (even a sandbox):<ul><li>Find an existing VPC and identify:<ul><li>Its CIDR range (room numbering scheme).</li><li>Its subnets and which ones are public or private.</li><li>Any Internet Gateways, NAT Gateways, or VPC Endpoints.</li></ul></li><li>Find one IAM role and interpret it:<ul><li>Who can assume it?</li><li>Which “doors” does it open?</li></ul></li></ul></li></ul></li></ol><hr><p>In the next part, we will extend the hotel analogy to more advanced architectures:<br>on-demand services (room service), globally distributed hotels (multi-region), and patterns that help you keep your systems resilient as they grow.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://memo.mx/posts/understanding-computer-networks-by-analogy-part-2/><span class=title>« Prev</span><br><span>Understanding Computer Networks by Analogy: Part 2 - Cities as the Internet</span>
</a><a class=next href=https://memo.mx/posts/understanding-computer-networks-by-analogy-part-4/><span class=title>Next »</span><br><span>Understanding Computer Networks by Analogy: Part 4 - Advanced Architectures</span></a></nav></footer></article></main><footer class=footer></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
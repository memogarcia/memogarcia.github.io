<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Setup multiple git identities and pgp keys | Memo Garcia</title>
<meta name="keywords" content="">
<meta name="description" content="Be very carrefull in your setup : any misconfiguration make all the git config to fail silently !
Setup multiple git ssh identities for git Generate your SSH keys as per your git provider documentation. Add each public SSH keys to your git providers acounts. In your ~/.ssh/config, set each ssh key for each repository as in this exemple: Host github.com HostName github.com User git IdentityFile ~/.ssh/github_private_key IdentitiesOnly=yes Host gitlab.com Hostname gitlab.">

<link rel="canonical"
    href="https://memo.mx/posts/git-multiple-identities/">
<meta name="google-site-verification" content="G-ZRB1GGCC9B">
<link crossorigin="anonymous" href="/assets/css/stylesheet.87a6568705425956af21ae7694f132965e875d50dfea91f7793fffb7ed438ae1.css" integrity="sha256-h6ZWhwVCWVavIa52lPEyll6HXVDf6pH3eT//t&#43;1DiuE="
    rel="preload stylesheet" as="style">
<link rel="icon" href="https://memo.mx/%20favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://memo.mx/%20favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://memo.mx/%20favicon-32x32.png">
<link rel="apple-touch-icon" href="https://memo.mx/%20apple-touch-icon.png">
<link rel="mask-icon" href="https://memo.mx/%20safari-pinned-tab.svg">
<meta name="theme-color" content=" #2e2e33">
<meta name="msapplication-TileColor" content=" #2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }
    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }
    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZRB1GGCC9B"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-ZRB1GGCC9B', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Setup multiple git identities and pgp keys" />
<meta property="og:description" content="Be very carrefull in your setup : any misconfiguration make all the git config to fail silently !
Setup multiple git ssh identities for git Generate your SSH keys as per your git provider documentation. Add each public SSH keys to your git providers acounts. In your ~/.ssh/config, set each ssh key for each repository as in this exemple: Host github.com HostName github.com User git IdentityFile ~/.ssh/github_private_key IdentitiesOnly=yes Host gitlab.com Hostname gitlab." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://memo.mx/posts/git-multiple-identities/" /><meta property="og:image" content="https://memo.mx/papermod-cover.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-04T02:03:30&#43;01:00" />
<meta property="article:modified_time" content="2023-01-09T16:39:57&#43;09:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://memo.mx/papermod-cover.png"/>

<meta name="twitter:title" content="Setup multiple git identities and pgp keys"/>
<meta name="twitter:description" content="Be very carrefull in your setup : any misconfiguration make all the git config to fail silently !
Setup multiple git ssh identities for git Generate your SSH keys as per your git provider documentation. Add each public SSH keys to your git providers acounts. In your ~/.ssh/config, set each ssh key for each repository as in this exemple: Host github.com HostName github.com User git IdentityFile ~/.ssh/github_private_key IdentitiesOnly=yes Host gitlab.com Hostname gitlab."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://memo.mx/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Setup multiple git identities and pgp keys",
      "item": "https://memo.mx/posts/git-multiple-identities/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Setup multiple git identities and pgp keys",
  "name": "Setup multiple git identities and pgp keys",
  "description": "Be very carrefull in your setup : any misconfiguration make all the git config to fail silently !\nSetup multiple git ssh identities for git Generate your SSH keys as per your git provider documentation. Add each public SSH keys to your git providers acounts. In your ~/.ssh/config, set each ssh key for each repository as in this exemple: Host github.com HostName github.com User git IdentityFile ~/.ssh/github_private_key IdentitiesOnly=yes Host gitlab.com Hostname gitlab.",
  "keywords": [
    
  ],
  "articleBody": "Be very carrefull in your setup : any misconfiguration make all the git config to fail silently !\nSetup multiple git ssh identities for git Generate your SSH keys as per your git provider documentation. Add each public SSH keys to your git providers acounts. In your ~/.ssh/config, set each ssh key for each repository as in this exemple: Host github.com HostName github.com User git IdentityFile ~/.ssh/github_private_key IdentitiesOnly=yes Host gitlab.com Hostname gitlab.com User git IdentityFile ~/.ssh/gitlab_private_key IdentitiesOnly=yes Setup dynamic git user email \u0026 name depending on folder Require git 2.13+ for conditional include support.\nThe idea here is to use a different git user name and email depending on the folder you are in.\nIn your ~/.gitconfig, remove the [user] block and add the following (adapt this exemple to your needs) : [includeIf \"gitdir:~/src/personal/\"] path = .gitconfig-personal [includeIf \"gitdir:~/src/work/\"] path = .gitconfig-work In your ~/.gitconfig-personal, add your personnal user informations: [user] email = user.personal@email.com name = personal_username In your ~/.gitconfig-work, add your professional user informations: [user] email = user.professional@company.com name = professional_username Setup a GPG key If you need to add a GPG key and bind it to a user to sign your commits, you can do so like this:\nYou should have GPG installed and configured like the GPG suite\nAdd the GPG key ID to your ~/.gitconfig-{PROFILE} config and enable commit signing: [user] email = your.mail@domain.com name = Your NAME signingkey = SIGNING_KEY_ID [commit] gpgsign = true Make sure to register the right GPG binary in your ~/.gitconfig: [program] pgp = /path/to/your/gpg2/bin Test your setup Now each repository will use the custom user info setup depending on the top-level folder. Check your settings are taken into account, for instance in ~/src/git/personal/ : cd ~/src/git/personal/ git config --get user.email git config --get user.name git config --get user.signingkey Do the same for each folder you have setup. You can also display and check the global git config: git config --list --global Or just the local config for the repository folder you are in: git config --list Exporting Public GPG key gpg --list-keys gpg --armor --export {KEY-ID} References Generating a new GPG key Telling Git about your signing key ",
  "wordCount" : "358",
  "inLanguage": "en",
  "datePublished": "2022-03-04T02:03:30+01:00",
  "dateModified": "2023-01-09T16:39:57+09:00",
  "author":{
    "@type": "Person",
    "name": "Memo Garcia"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://memo.mx/posts/git-multiple-identities/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Memo Garcia",
    "logo": {
      "@type": "ImageObject",
      "url": "https://memo.mx/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://memo.mx" accesskey="h" title="Memo Garcia (Alt + H)">Memo Garcia</a>
                    <div class="logo-switches">
                        <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                            <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                            </svg>
                            <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <circle cx="12" cy="12" r="5"></circle>
                                <line x1="12" y1="1" x2="12" y2="3"></line>
                                <line x1="12" y1="21" x2="12" y2="23"></line>
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                <line x1="1" y1="12" x2="3" y2="12"></line>
                                <line x1="21" y1="12" x2="23" y2="12"></line>
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                            </svg>
                        </button>
                    </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://memo.mx/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://memogarcia.gitbook.io/continuous-learning/" title="Continuous Learning">
                    <span>Continuous Learning</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header><main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Setup multiple git identities and pgp keys
    </h1>
    <div class="post-meta"><span title='2022-03-04 02:03:30 +0100 +0100'>March 4, 2022</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Memo Garcia

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#setup-multiple-git-ssh-identities-for-git" aria-label="Setup multiple git ssh identities for git">Setup multiple git ssh identities for git</a></li>
                <li>
                    <a href="#setup-dynamic-git-user-email--name-depending-on-folder" aria-label="Setup dynamic git user email &amp;amp; name depending on folder">Setup dynamic git user email &amp; name depending on folder</a></li>
                <li>
                    <a href="#setup-a-gpg-key" aria-label="Setup a GPG key">Setup a GPG key</a></li>
                <li>
                    <a href="#test-your-setup" aria-label="Test your setup">Test your setup</a></li>
                <li>
                    <a href="#exporting-public-gpg-key" aria-label="Exporting Public GPG key">Exporting Public GPG key</a></li>
                <li>
                    <a href="#references" aria-label="References">References</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>Be very carrefull in your setup : <strong>any misconfiguration make all the git config to fail silently !</strong></p>
<h2 id="setup-multiple-git-ssh-identities-for-git">Setup multiple git ssh identities for git<a hidden class="anchor" aria-hidden="true" href="#setup-multiple-git-ssh-identities-for-git">#</a></h2>
<ul>
<li>Generate your SSH keys as per your git provider documentation.</li>
<li>Add each public SSH keys to your git providers acounts.</li>
<li>In your <code>~/.ssh/config</code>, set each ssh key for each repository as in this exemple:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Host github.com
</span></span><span class="line"><span class="cl">  HostName github.com
</span></span><span class="line"><span class="cl">  User git
</span></span><span class="line"><span class="cl">  IdentityFile ~/.ssh/github_private_key
</span></span><span class="line"><span class="cl">  <span class="nv">IdentitiesOnly</span><span class="o">=</span>yes
</span></span><span class="line"><span class="cl">Host gitlab.com
</span></span><span class="line"><span class="cl">  Hostname gitlab.com
</span></span><span class="line"><span class="cl">  User git
</span></span><span class="line"><span class="cl">  IdentityFile ~/.ssh/gitlab_private_key
</span></span><span class="line"><span class="cl">  <span class="nv">IdentitiesOnly</span><span class="o">=</span>yes
</span></span></code></pre></div><h2 id="setup-dynamic-git-user-email--name-depending-on-folder">Setup dynamic git user email &amp; name depending on folder<a hidden class="anchor" aria-hidden="true" href="#setup-dynamic-git-user-email--name-depending-on-folder">#</a></h2>
<p><strong>Require git 2.13+ for conditional include support.</strong></p>
<p>The idea here is to use a different git user name and email depending on the folder you are in.</p>
<ul>
<li>In your <code>~/.gitconfig</code>, <strong>remove</strong> the <code>[user]</code> block and add the following (adapt this exemple to your needs) :</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>includeIf <span class="s2">&#34;gitdir:~/src/personal/&#34;</span><span class="o">]</span>
</span></span><span class="line"><span class="cl">  <span class="nv">path</span> <span class="o">=</span> .gitconfig-personal
</span></span><span class="line"><span class="cl"><span class="o">[</span>includeIf <span class="s2">&#34;gitdir:~/src/work/&#34;</span><span class="o">]</span>
</span></span><span class="line"><span class="cl">  <span class="nv">path</span> <span class="o">=</span> .gitconfig-work
</span></span></code></pre></div><ul>
<li>In your <code>~/.gitconfig-personal</code>, add your personnal user informations:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>user<span class="o">]</span>
</span></span><span class="line"><span class="cl">  <span class="nv">email</span> <span class="o">=</span> user.personal@email.com
</span></span><span class="line"><span class="cl">  <span class="nv">name</span> <span class="o">=</span> personal_username
</span></span></code></pre></div><ul>
<li>In your <code>~/.gitconfig-work</code>, add your professional user informations:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>user<span class="o">]</span>
</span></span><span class="line"><span class="cl">  <span class="nv">email</span> <span class="o">=</span> user.professional@company.com
</span></span><span class="line"><span class="cl">  <span class="nv">name</span> <span class="o">=</span> professional_username
</span></span></code></pre></div><h2 id="setup-a-gpg-key">Setup a GPG key<a hidden class="anchor" aria-hidden="true" href="#setup-a-gpg-key">#</a></h2>
<p>If you need to add a GPG key and bind it to a user to sign your commits, you can do so like this:</p>
<p>You should have GPG installed and configured like the <a href="https://gpgtools.org/">GPG suite</a></p>
<ul>
<li>Add the GPG key ID to your <code>~/.gitconfig-{PROFILE}</code> config and enable commit signing:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>user<span class="o">]</span>
</span></span><span class="line"><span class="cl">  <span class="nv">email</span> <span class="o">=</span> your.mail@domain.com
</span></span><span class="line"><span class="cl">  <span class="nv">name</span> <span class="o">=</span> Your NAME
</span></span><span class="line"><span class="cl">  <span class="nv">signingkey</span> <span class="o">=</span> SIGNING_KEY_ID
</span></span><span class="line"><span class="cl"><span class="o">[</span>commit<span class="o">]</span>
</span></span><span class="line"><span class="cl">  <span class="nv">gpgsign</span> <span class="o">=</span> <span class="nb">true</span>
</span></span></code></pre></div><ul>
<li>Make sure to register the right GPG binary in your <code>~/.gitconfig</code>:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>program<span class="o">]</span>
</span></span><span class="line"><span class="cl">  <span class="nv">pgp</span> <span class="o">=</span> /path/to/your/gpg2/bin
</span></span></code></pre></div><h2 id="test-your-setup">Test your setup<a hidden class="anchor" aria-hidden="true" href="#test-your-setup">#</a></h2>
<ul>
<li>Now each repository will use the custom user info setup depending on the top-level folder.</li>
<li>Check your settings are taken into account, for instance in <code>~/src/git/personal/</code> :</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> ~/src/git/personal/
</span></span><span class="line"><span class="cl">git config --get user.email
</span></span><span class="line"><span class="cl">git config --get user.name
</span></span><span class="line"><span class="cl">git config --get user.signingkey
</span></span></code></pre></div><ul>
<li>Do the same for each folder you have setup.</li>
<li>You can also display and check the global git config: <code>git config --list --global</code>
<ul>
<li>Or just the local config for the repository folder you are in: <code>git config --list</code></li>
</ul>
</li>
</ul>
<h2 id="exporting-public-gpg-key">Exporting Public GPG key<a hidden class="anchor" aria-hidden="true" href="#exporting-public-gpg-key">#</a></h2>
<pre><code>gpg --list-keys
gpg --armor --export {KEY-ID}
</code></pre>
<h2 id="references">References<a hidden class="anchor" aria-hidden="true" href="#references">#</a></h2>
<ul>
<li><a href="https://docs.github.com/en/authentication/managing-commit-signature-verification/generating-a-new-gpg-key">Generating a new GPG key</a></li>
<li><a href="https://docs.github.com/en/authentication/managing-commit-signature-verification/telling-git-about-your-signing-key">Telling Git about your signing key</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://memo.mx/posts/gitops-in-enterprise/">
    <span class="title">« Prev</span>
    <br>
    <span>How to use GitOps in a non-cloud-native environment</span>
  </a>
  <a class="next" href="https://memo.mx/posts/i3wm-wsl2/">
    <span class="title">Next »</span>
    <br>
    <span>i3 running on WSL2</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">

</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script></body>

</html>

<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Understanding Computer Networks by Analogy: Part 5 - Follow the Envelope: Labs & Mini Exercises | Memo Garcia</title>
<meta name=keywords content><meta name=description content="License for this chapter: CC BY‑NC‑ND 4.0
Chapter 5: Follow the Envelope: Labs & Mini Exercises Welcome to the hands-on portion of our journey. In the previous chapters, we&rsquo;ve built a model of how networks operate using our building and city analogy. Now, it&rsquo;s time to get our hands dirty and see these concepts in action. It’s time to see if our theoretical building can stand on its own two feet, architecturally speaking."><link rel=canonical href=https://memo.mx/posts/understanding-computer-networks-by-analogy-part-5/><meta name=google-site-verification content="G-ZRB1GGCC9B"><link crossorigin=anonymous href=/assets/css/stylesheet.d1467e28595903f993a7e37893057cefe5f69aece461c850796bf5b0a3bf422a.css integrity="sha256-0UZ+KFlZA/mTp+N4kwV87+X2muzkYchQeWv1sKO/Qio=" rel="preload stylesheet" as=style><link rel=icon href=https://memo.mx/%20favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://memo.mx/%20favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://memo.mx/%20favicon-32x32.png><link rel=apple-touch-icon href=https://memo.mx/%20apple-touch-icon.png><link rel=mask-icon href=https://memo.mx/%20safari-pinned-tab.svg><meta name=theme-color content="#0d0221"><meta name=msapplication-TileColor content="#0d0221"><link rel=alternate hreflang=en href=https://memo.mx/posts/understanding-computer-networks-by-analogy-part-5/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZRB1GGCC9B"></script><script>var dnt,doNotTrack=!1;if(!0&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZRB1GGCC9B")}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://memo.mx/posts/"},{"@type":"ListItem","position":2,"name":"Understanding Computer Networks by Analogy: Part 5 - Follow the Envelope: Labs \u0026 Mini Exercises","item":"https://memo.mx/posts/understanding-computer-networks-by-analogy-part-5/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Understanding Computer Networks by Analogy: Part 5 - Follow the Envelope: Labs \u0026 Mini Exercises","name":"Understanding Computer Networks by Analogy: Part 5 - Follow the Envelope: Labs \u0026 Mini Exercises","description":"License for this chapter: CC BY‑NC‑ND 4.0\nChapter 5: Follow the Envelope: Labs \u0026amp; Mini Exercises Welcome to the hands-on portion of our journey. In the previous chapters, we\u0026rsquo;ve built a model of how networks operate using our building and city analogy. Now, it\u0026rsquo;s time to get our hands dirty and see these concepts in action. It’s time to see if our theoretical building can stand on its own two feet, architecturally speaking.","keywords":[],"articleBody":" License for this chapter: CC BY‑NC‑ND 4.0\nChapter 5: Follow the Envelope: Labs \u0026 Mini Exercises Welcome to the hands-on portion of our journey. In the previous chapters, we’ve built a model of how networks operate using our building and city analogy. Now, it’s time to get our hands dirty and see these concepts in action. It’s time to see if our theoretical building can stand on its own two feet, architecturally speaking. (Pun intended!)\nEach lab is designed to reinforce the analogy we’ve been exploring, focusing on the core principles of:\nAddress · Path · Permission\nKeep these labs, approach them with curiosity, and don’t be afraid to experiment.\nCore Labs (Local Experiments) Lab 01: Follow the Envelope with ping and traceroute Time: 15–20 min Difficulty: Easy Analogy: You send an envelope from your room and track its journey through concierges across the city.\nTools: Terminal or PowerShell\nSteps\nResolve the name: macOS/Linux: dig +short example.com Windows: nslookup example.com Check reachability: macOS/Linux: ping -c 5 example.com Windows: ping -n 5 example.com Map the path: macOS: traceroute example.com Linux: traceroute -n example.com Windows: tracert example.com Expected:\nLow loss and stable latency. Several hops between your router and the destination. Why it matters: You just saw Address (DNS), Path (routers), Permission (ICMP policy).\nLab 02: DNS Cache vs No-Cache with dig Time: 10–15 min Difficulty: Easy Analogy: Ask the directory before you wander.\nSteps\nCached lookup: dig example.com Check the TTL in the ANSWER section. Authority walk: dig +trace example.com No cache: dig +nocache example.com Compare query times. Expected: Cached queries are faster. Why it matters: Directories speed repeat trips and reduce city traffic.\nLab 03: Who Has That Door? Meet ARP / Neighbor Discovery Time: 10–15 min Difficulty: Easy Analogy: Find the door tag before you deliver.\nSteps\nFind your gateway IP: Linux: ip route | grep default macOS: route -n get default | grep gateway Windows: ipconfig See the door tags (MACs): Linux: ip neigh macOS/Windows: arp -a Ping another LAN device, then re-run the table. Expected: You see IP-to-MAC mappings appear. Why it matters: Same floor talk needs the door tag.\nLab 04: Meet Your Leasing Desk by Inspecting DHCP Details Time: 10–15 min Difficulty: Easy Analogy: The front desk assigns room numbers and DNS.\nSteps\nShow your IP and mask: Linux: ip -4 addr show macOS: ipconfig getifaddr en0 Windows: ipconfig /all Show gateway and DNS: Linux: ip route; cat /etc/resolv.conf Windows: ipconfig /all Renew lease (optional): Linux: sudo dhclient -r \u0026\u0026 sudo dhclient Windows: ipconfig /release then ipconfig /renew Expected: Your lease includes IP, mask, gateway, and DNS. Why it matters: Without a lease, your room has no number.\nLab 05: Ports and Sockets with a Tiny Web Server Time: 10–20 min Difficulty: Easy Analogy: Mail slots on the door.\nSteps\nStart a server: python3 -m http.server 8000 Test locally: curl http://127.0.0.1:8000 Find your LAN IP: Linux: hostname -I macOS: ipconfig getifaddr en0 Windows: ipconfig From another device: open http://:8000. Expected: Local site loads; other devices can connect if allowed. Why it matters: Each door slot (port) leads to a specific service.\nLab 06: Ephemeral Ports in Action Time: 10–15 min Difficulty: Easy Analogy: Temporary mailbox numbers for each conversation.\nSteps\nRequest a page: curl -I https://example.com List sockets: Linux: ss -tnp | head macOS: netstat -anp tcp | head Windows: netstat -ano | find \":443\" Expected: A random high-number port is used on your side. Why it matters: Replies reach the exact app that started them.\nLab 07: MTU and Path MTU Discovery Time: 10–20 min Difficulty: Medium Analogy: Oversized crate vs hallway height.\nSteps\nLinux: ping -c 1 -M do -s 1472 example.com Reduce -s until it succeeds. Windows: ping -f -l 1472 example.com Lower -l until success. Expected: The largest successful payload defines your path MTU. Why it matters: Right-sizing the crate avoids breakage.\nLab 08: TCP vs UDP with Netcat Time: 15–20 min Difficulty: Medium Analogy: Registered mail vs postcards.\nSteps\nTCP listener: nc -l 9999 TCP sender: nc 127.0.0.1 9999 and type a message. UDP listener: nc -u -l 9998 UDP sender: nc -u 127.0.0.1 9998 Expected: TCP delivers reliably, UDP does not. Why it matters: Choose the right etiquette for the job.\nLab 09: Wi-Fi Reality Check for Channels and Noise Time: 10–20 min Difficulty: Easy Analogy: Conversations in a crowded square.\nSteps\nmacOS: /System/Library/.../airport -s Linux: nmcli dev wifi list Windows: netsh wlan show networks mode=bssid Note SSIDs, channels, and signal. Count how many share your channel. Move closer to the router and compare signal. Expected: Busy channels show more contention. Why it matters: Air is a shared medium with etiquette.\nLab 10: Peek at the TLS Chain with OpenSSL Time: 10–15 min Difficulty: Medium Analogy: Diplomatic credential check.\nSteps\nopenssl s_client -connect example.com:443 -servername example.com -showcerts \u003c /dev/null Observe:\nSubject (site name) Issuer (Certificate Authority) Certificate chain Expected: Valid chain and matching hostname. Why it matters: Identity comes first, then encryption.\nLab 11: Try HTTP/3 over QUIC Time: 10–15 min Difficulty: Medium Analogy: Faster talk in a noisy square.\nSteps\ncurl -I https://example.com curl --http3 -I https://example.com Expected: Some sites respond with HTTP/3 in headers. Why it matters: QUIC reduces head-of-line blocking.\nLab 12: Round-Robin DNS as Load Balancing Time: 10 min Difficulty: Easy Analogy: One address, many concierges.\nSteps\ndig +short a www.google.com Repeat a few times and note multiple IPs.\nExpected: Several addresses rotate per query. Why it matters: DNS spreads guests across entrances.\nLab 13: NAT in the Wild with One Public Face Time: 5–10 min Difficulty: Easy Analogy: Mail forwarding at the building exit.\nSteps\ncurl -s https://api.ipify.org Run on two devices on the same network.\nExpected: Both show the same public IP. Why it matters: NAT rewrites return addresses at the exit.\nLab 14: Measure the Trip with Curl Timings Time: 10–15 min Difficulty: Easy Analogy: Concierge logbook of each delivery.\nSteps\ncurl -o /dev/null -s -w \"dns=%{time_namelookup} connect=%{time_connect} tls=%{time_appconnect} ttfb=%{time_starttransfer} total=%{time_total}\\n\" https://example.com Expected: Breakdown of total time by phase. Why it matters: Observability starts with simple timing.\nLab 15: Mini Troubleshooting Loop Time: 15–20 min Difficulty: Easy Analogy: Follow the envelope boundary by boundary.\nScenario: A website doesn’t load.\nSteps\nAddress: DNS ok? dig example.com Path: Local OK? ping Outside OK? traceroute 1.1.1.1 Permission: TLS or HTTP? curl -I https://example.com Swap DNS: dig @1.1.1.1 example.com Expected: You identify which boundary failed. Why it matters: Address, Path, Permission always guide you.\nCloud Track (Optional, Vendor-Neutral) Cloud Lab A: Build a Three-Wing VPC Floor Plan Time: 30–45 min Difficulty: Medium Analogy: Design your own private floor in the hotel.\nGoal: Create a VPC with Public, Private-App, and Private-DB subnets.\nSteps\nCreate a VPC (e.g., 10.0.0.0/16). Add subnets: Public (10.0.1.0/24), App (10.0.2.0/24), DB (10.0.3.0/24). Attach an Internet Gateway. Route tables: Public → IGW, Private → NAT. Security Groups: Web: allow 80/443 from Internet. App: allow 80 from Web subnet. DB: allow 3306 from App only. Expected: Public reachable, Private internal only.\nCloud Lab B: NAT Gateway as an Outbound-Only Staff Door Time: 20–30 min Difficulty: Medium Analogy: The monitored back exit.\nSteps\nDeploy NAT Gateway in Public subnet. Update Private subnet route: default route to NAT. Test outbound with curl https://example.com. Confirm inbound from Internet fails. Expected: Outbound works, inbound blocked.\nCloud Lab C: VPC Endpoint to Keep Traffic Off the Street Time: 15–25 min Difficulty: Medium Analogy: Private service door to hotel amenities.\nSteps\nAdd a Gateway-type endpoint (for S3 or storage). Update route table to send service traffic through it. Access the service from a private instance. Confirm no Internet egress in flow logs. Expected: Private traffic path stays inside hotel walls.\nCloud Lab D: Security Group vs NACL, Who Blocked It? Time: 20–30 min Difficulty: Medium Analogy: Door guard vs hallway rule.\nSteps\nSG allows inbound 80 to instance. NACL blocks ephemeral return ports. Try web access; it fails. Remove the block; it works. Expected: SG is stateful, NACL is not. Why it matters: Understand which guard said no.\nCloud Lab E: Flow Logs to Find the Drop Time: 20–30 min Difficulty: Medium Analogy: Review the hallway cameras.\nSteps\nEnable flow logs for the subnet. Trigger a failed connection. Filter by instance IP/port in logs. Note ACCEPT or REJECT. Identify which layer denied traffic. Expected: You can pinpoint the blocked boundary.\nTeaching Tips Keep each lab to one printed page so a learner can glance at the whole journey. Close every exercise with a In a Nutshell recap or reflection line. Repeat the mantra Address · Path · Permission until it becomes second nature. Use callbacks to earlier analogies (“remember the elevator?”) so readers connect new facts to familiar images. Adjust firewalls and guardrails minimally; never ask students to disable everything. Let’s keep following the envelope (pun intended).\n","wordCount":"1457","inLanguage":"en","datePublished":"2025-10-20T09:00:00-07:00","dateModified":"2025-11-13T22:11:49+09:00","author":{"@type":"Person","name":"Memo Garcia"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://memo.mx/posts/understanding-computer-networks-by-analogy-part-5/"},"publisher":{"@type":"Person","name":"Memo Garcia","logo":{"@type":"ImageObject","url":"https://memo.mx/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://memo.mx/ accesskey=h title="Memo Garcia (Alt + H)">Memo Garcia</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://memo.mx/labs/ title=Labs><span>Labs</span></a></li><li><a href=https://memo.mx/books/ title=Books><span>Books</span></a></li><li><a href=https://memo.mx/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Understanding Computer Networks by Analogy: Part 5 - Follow the Envelope: Labs & Mini Exercises</h1><div class=post-meta><span title='2025-10-20 09:00:00 -0700 -0700'>October 20, 2025</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Memo Garcia</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#chapter-5-follow-the-envelope-labs--mini-exercises aria-label="Chapter 5: Follow the Envelope: Labs &amp;amp; Mini Exercises">Chapter 5: Follow the Envelope: Labs & Mini Exercises</a><ul><li><a href=#core-labs-local-experiments aria-label="Core Labs (Local Experiments)">Core Labs (Local Experiments)</a><ul><li><a href=#lab-01-follow-the-envelope-with-ping-and-traceroute aria-label="Lab 01: Follow the Envelope with ping and traceroute">Lab 01: Follow the Envelope with <code>ping</code> and <code>traceroute</code></a></li><li><a href=#lab-02-dns-cache-vs-no-cache-with-dig aria-label="Lab 02: DNS Cache vs No-Cache with dig">Lab 02: DNS Cache vs No-Cache with <code>dig</code></a></li><li><a href=#lab-03-who-has-that-door-meet-arp--neighbor-discovery aria-label="Lab 03: Who Has That Door? Meet ARP / Neighbor Discovery">Lab 03: Who Has That Door? Meet ARP / Neighbor Discovery</a></li><li><a href=#lab-04-meet-your-leasing-desk-by-inspecting-dhcp-details aria-label="Lab 04: Meet Your Leasing Desk by Inspecting DHCP Details">Lab 04: Meet Your Leasing Desk by Inspecting DHCP Details</a></li><li><a href=#lab-05-ports-and-sockets-with-a-tiny-web-server aria-label="Lab 05: Ports and Sockets with a Tiny Web Server">Lab 05: Ports and Sockets with a Tiny Web Server</a></li><li><a href=#lab-06-ephemeral-ports-in-action aria-label="Lab 06: Ephemeral Ports in Action">Lab 06: Ephemeral Ports in Action</a></li><li><a href=#lab-07-mtu-and-path-mtu-discovery aria-label="Lab 07: MTU and Path MTU Discovery">Lab 07: MTU and Path MTU Discovery</a></li><li><a href=#lab-08-tcp-vs-udp-with-netcat aria-label="Lab 08: TCP vs UDP with Netcat">Lab 08: TCP vs UDP with Netcat</a></li><li><a href=#lab-09-wi-fi-reality-check-for-channels-and-noise aria-label="Lab 09: Wi-Fi Reality Check for Channels and Noise">Lab 09: Wi-Fi Reality Check for Channels and Noise</a></li><li><a href=#lab-10-peek-at-the-tls-chain-with-openssl aria-label="Lab 10: Peek at the TLS Chain with OpenSSL">Lab 10: Peek at the TLS Chain with OpenSSL</a></li><li><a href=#lab-11-try-http3-over-quic aria-label="Lab 11: Try HTTP/3 over QUIC">Lab 11: Try HTTP/3 over QUIC</a></li><li><a href=#lab-12-round-robin-dns-as-load-balancing aria-label="Lab 12: Round-Robin DNS as Load Balancing">Lab 12: Round-Robin DNS as Load Balancing</a></li><li><a href=#lab-13-nat-in-the-wild-with-one-public-face aria-label="Lab 13: NAT in the Wild with One Public Face">Lab 13: NAT in the Wild with One Public Face</a></li><li><a href=#lab-14-measure-the-trip-with-curl-timings aria-label="Lab 14: Measure the Trip with Curl Timings">Lab 14: Measure the Trip with Curl Timings</a></li><li><a href=#lab-15-mini-troubleshooting-loop aria-label="Lab 15: Mini Troubleshooting Loop">Lab 15: Mini Troubleshooting Loop</a></li></ul></li><li><a href=#cloud-track-optional-vendor-neutral aria-label="Cloud Track (Optional, Vendor-Neutral)">Cloud Track (Optional, Vendor-Neutral)</a><ul><li><a href=#cloud-lab-a-build-a-three-wing-vpc-floor-plan aria-label="Cloud Lab A: Build a Three-Wing VPC Floor Plan">Cloud Lab A: Build a Three-Wing VPC Floor Plan</a></li><li><a href=#cloud-lab-b-nat-gateway-as-an-outbound-only-staff-door aria-label="Cloud Lab B: NAT Gateway as an Outbound-Only Staff Door">Cloud Lab B: NAT Gateway as an Outbound-Only Staff Door</a></li><li><a href=#cloud-lab-c-vpc-endpoint-to-keep-traffic-off-the-street aria-label="Cloud Lab C: VPC Endpoint to Keep Traffic Off the Street">Cloud Lab C: VPC Endpoint to Keep Traffic Off the Street</a></li><li><a href=#cloud-lab-d-security-group-vs-nacl-who-blocked-it aria-label="Cloud Lab D: Security Group vs NACL, Who Blocked It?">Cloud Lab D: Security Group vs NACL, Who Blocked It?</a></li><li><a href=#cloud-lab-e-flow-logs-to-find-the-drop aria-label="Cloud Lab E: Flow Logs to Find the Drop">Cloud Lab E: Flow Logs to Find the Drop</a></li></ul></li><li><a href=#teaching-tips aria-label="Teaching Tips">Teaching Tips</a></li></ul></li></ul></div></details></div><div class=post-content><blockquote><p>License for this chapter: CC BY‑NC‑ND 4.0</p></blockquote><h1 id=chapter-5-follow-the-envelope-labs--mini-exercises>Chapter 5: Follow the Envelope: Labs & Mini Exercises<a hidden class=anchor aria-hidden=true href=#chapter-5-follow-the-envelope-labs--mini-exercises>#</a></h1><p>Welcome to the hands-on portion of our journey. In the previous chapters, we&rsquo;ve built a model of how networks operate using our building and city analogy. Now, it&rsquo;s time to get our hands dirty and see these concepts in action. It’s time to see if our theoretical building can stand on its own two feet, architecturally speaking. (Pun intended!)</p><p>Each lab is designed to reinforce the analogy we&rsquo;ve been exploring, focusing on the core principles of:</p><p><strong>Address · Path · Permission</strong></p><p>Keep these labs, approach them with curiosity, and don&rsquo;t be afraid to experiment.</p><hr><h2 id=core-labs-local-experiments>Core Labs (Local Experiments)<a hidden class=anchor aria-hidden=true href=#core-labs-local-experiments>#</a></h2><h3 id=lab-01-follow-the-envelope-with-ping-and-traceroute>Lab 01: Follow the Envelope with <code>ping</code> and <code>traceroute</code><a hidden class=anchor aria-hidden=true href=#lab-01-follow-the-envelope-with-ping-and-traceroute>#</a></h3><p><strong>Time:</strong> 15–20 min
<strong>Difficulty:</strong> Easy
<strong>Analogy:</strong> You send an envelope from your room and track its journey through concierges across the city.</p><p><strong>Tools:</strong> Terminal or PowerShell</p><p><strong>Steps</strong></p><ol><li>Resolve the name:<ul><li>macOS/Linux: <code>dig +short example.com</code></li><li>Windows: <code>nslookup example.com</code></li></ul></li><li>Check reachability:<ul><li>macOS/Linux: <code>ping -c 5 example.com</code></li><li>Windows: <code>ping -n 5 example.com</code></li></ul></li><li>Map the path:<ul><li>macOS: <code>traceroute example.com</code></li><li>Linux: <code>traceroute -n example.com</code></li><li>Windows: <code>tracert example.com</code></li></ul></li></ol><p><strong>Expected:</strong></p><ul><li>Low loss and stable latency.</li><li>Several hops between your router and the destination.</li></ul><p><strong>Why it matters:</strong>
You just saw Address (DNS), Path (routers), Permission (ICMP policy).</p><hr><h3 id=lab-02-dns-cache-vs-no-cache-with-dig>Lab 02: DNS Cache vs No-Cache with <code>dig</code><a hidden class=anchor aria-hidden=true href=#lab-02-dns-cache-vs-no-cache-with-dig>#</a></h3><p><strong>Time:</strong> 10–15 min
<strong>Difficulty:</strong> Easy
<strong>Analogy:</strong> Ask the directory before you wander.</p><p><strong>Steps</strong></p><ol><li>Cached lookup: <code>dig example.com</code></li><li>Check the TTL in the <code>ANSWER</code> section.</li><li>Authority walk: <code>dig +trace example.com</code></li><li>No cache: <code>dig +nocache example.com</code></li><li>Compare query times.</li></ol><p><strong>Expected:</strong> Cached queries are faster.
<strong>Why it matters:</strong> Directories speed repeat trips and reduce city traffic.</p><hr><h3 id=lab-03-who-has-that-door-meet-arp--neighbor-discovery>Lab 03: Who Has That Door? Meet ARP / Neighbor Discovery<a hidden class=anchor aria-hidden=true href=#lab-03-who-has-that-door-meet-arp--neighbor-discovery>#</a></h3><p><strong>Time:</strong> 10–15 min
<strong>Difficulty:</strong> Easy
<strong>Analogy:</strong> Find the door tag before you deliver.</p><p><strong>Steps</strong></p><ol><li>Find your gateway IP:<ul><li>Linux: <code>ip route | grep default</code></li><li>macOS: <code>route -n get default | grep gateway</code></li><li>Windows: <code>ipconfig</code></li></ul></li><li>See the door tags (MACs):<ul><li>Linux: <code>ip neigh</code></li><li>macOS/Windows: <code>arp -a</code></li></ul></li><li>Ping another LAN device, then re-run the table.</li></ol><p><strong>Expected:</strong> You see IP-to-MAC mappings appear.
<strong>Why it matters:</strong> Same floor talk needs the door tag.</p><hr><h3 id=lab-04-meet-your-leasing-desk-by-inspecting-dhcp-details>Lab 04: Meet Your Leasing Desk by Inspecting DHCP Details<a hidden class=anchor aria-hidden=true href=#lab-04-meet-your-leasing-desk-by-inspecting-dhcp-details>#</a></h3><p><strong>Time:</strong> 10–15 min
<strong>Difficulty:</strong> Easy
<strong>Analogy:</strong> The front desk assigns room numbers and DNS.</p><p><strong>Steps</strong></p><ol><li>Show your IP and mask:<ul><li>Linux: <code>ip -4 addr show</code></li><li>macOS: <code>ipconfig getifaddr en0</code></li><li>Windows: <code>ipconfig /all</code></li></ul></li><li>Show gateway and DNS:<ul><li>Linux: <code>ip route; cat /etc/resolv.conf</code></li><li>Windows: <code>ipconfig /all</code></li></ul></li><li>Renew lease (optional):<ul><li>Linux: <code>sudo dhclient -r && sudo dhclient</code></li><li>Windows: <code>ipconfig /release</code> then <code>ipconfig /renew</code></li></ul></li></ol><p><strong>Expected:</strong> Your lease includes IP, mask, gateway, and DNS.
<strong>Why it matters:</strong> Without a lease, your room has no number.</p><hr><h3 id=lab-05-ports-and-sockets-with-a-tiny-web-server>Lab 05: Ports and Sockets with a Tiny Web Server<a hidden class=anchor aria-hidden=true href=#lab-05-ports-and-sockets-with-a-tiny-web-server>#</a></h3><p><strong>Time:</strong> 10–20 min
<strong>Difficulty:</strong> Easy
<strong>Analogy:</strong> Mail slots on the door.</p><p><strong>Steps</strong></p><ol><li>Start a server: <code>python3 -m http.server 8000</code></li><li>Test locally: <code>curl http://127.0.0.1:8000</code></li><li>Find your LAN IP:<ul><li>Linux: <code>hostname -I</code></li><li>macOS: <code>ipconfig getifaddr en0</code></li><li>Windows: <code>ipconfig</code></li></ul></li><li>From another device: open <code>http://&lt;your-ip>:8000</code>.</li></ol><p><strong>Expected:</strong> Local site loads; other devices can connect if allowed.
<strong>Why it matters:</strong> Each door slot (port) leads to a specific service.</p><hr><h3 id=lab-06-ephemeral-ports-in-action>Lab 06: Ephemeral Ports in Action<a hidden class=anchor aria-hidden=true href=#lab-06-ephemeral-ports-in-action>#</a></h3><p><strong>Time:</strong> 10–15 min
<strong>Difficulty:</strong> Easy
<strong>Analogy:</strong> Temporary mailbox numbers for each conversation.</p><p><strong>Steps</strong></p><ol><li>Request a page: <code>curl -I https://example.com</code></li><li>List sockets:<ul><li>Linux: <code>ss -tnp | head</code></li><li>macOS: <code>netstat -anp tcp | head</code></li><li>Windows: <code>netstat -ano | find ":443"</code></li></ul></li></ol><p><strong>Expected:</strong> A random high-number port is used on your side.
<strong>Why it matters:</strong> Replies reach the exact app that started them.</p><hr><h3 id=lab-07-mtu-and-path-mtu-discovery>Lab 07: MTU and Path MTU Discovery<a hidden class=anchor aria-hidden=true href=#lab-07-mtu-and-path-mtu-discovery>#</a></h3><p><strong>Time:</strong> 10–20 min
<strong>Difficulty:</strong> Medium
<strong>Analogy:</strong> Oversized crate vs hallway height.</p><p><strong>Steps</strong></p><ul><li>Linux:<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ping -c <span class=m>1</span> -M <span class=k>do</span> -s <span class=m>1472</span> example.com
</span></span></code></pre></div>Reduce <code>-s</code> until it succeeds.</li><li>Windows:<div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>ping</span> <span class=o>-f</span> <span class=n>-l</span> <span class=mf>1472</span> <span class=n>example</span><span class=p>.</span><span class=py>com</span>
</span></span></code></pre></div>Lower <code>-l</code> until success.</li></ul><p><strong>Expected:</strong> The largest successful payload defines your path MTU.
<strong>Why it matters:</strong> Right-sizing the crate avoids breakage.</p><hr><h3 id=lab-08-tcp-vs-udp-with-netcat>Lab 08: TCP vs UDP with Netcat<a hidden class=anchor aria-hidden=true href=#lab-08-tcp-vs-udp-with-netcat>#</a></h3><p><strong>Time:</strong> 15–20 min
<strong>Difficulty:</strong> Medium
<strong>Analogy:</strong> Registered mail vs postcards.</p><p><strong>Steps</strong></p><ol><li>TCP listener: <code>nc -l 9999</code></li><li>TCP sender: <code>nc 127.0.0.1 9999</code> and type a message.</li><li>UDP listener: <code>nc -u -l 9998</code></li><li>UDP sender: <code>nc -u 127.0.0.1 9998</code></li></ol><p><strong>Expected:</strong> TCP delivers reliably, UDP does not.
<strong>Why it matters:</strong> Choose the right etiquette for the job.</p><hr><h3 id=lab-09-wi-fi-reality-check-for-channels-and-noise>Lab 09: Wi-Fi Reality Check for Channels and Noise<a hidden class=anchor aria-hidden=true href=#lab-09-wi-fi-reality-check-for-channels-and-noise>#</a></h3><p><strong>Time:</strong> 10–20 min
<strong>Difficulty:</strong> Easy
<strong>Analogy:</strong> Conversations in a crowded square.</p><p><strong>Steps</strong></p><ul><li>macOS:<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/System/Library/.../airport -s
</span></span></code></pre></div></li><li>Linux: <code>nmcli dev wifi list</code></li><li>Windows: <code>netsh wlan show networks mode=bssid</code></li></ul><ol><li>Note SSIDs, channels, and signal.</li><li>Count how many share your channel.</li><li>Move closer to the router and compare signal.</li></ol><p><strong>Expected:</strong> Busy channels show more contention.
<strong>Why it matters:</strong> Air is a shared medium with etiquette.</p><hr><h3 id=lab-10-peek-at-the-tls-chain-with-openssl>Lab 10: Peek at the TLS Chain with OpenSSL<a hidden class=anchor aria-hidden=true href=#lab-10-peek-at-the-tls-chain-with-openssl>#</a></h3><p><strong>Time:</strong> 10–15 min
<strong>Difficulty:</strong> Medium
<strong>Analogy:</strong> Diplomatic credential check.</p><p><strong>Steps</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>openssl s_client -connect example.com:443 -servername example.com -showcerts &lt; /dev/null
</span></span></code></pre></div><p><strong>Observe:</strong></p><ul><li>Subject (site name)</li><li>Issuer (Certificate Authority)</li><li>Certificate chain</li></ul><p><strong>Expected:</strong> Valid chain and matching hostname.
<strong>Why it matters:</strong> Identity comes first, then encryption.</p><hr><h3 id=lab-11-try-http3-over-quic>Lab 11: Try HTTP/3 over QUIC<a hidden class=anchor aria-hidden=true href=#lab-11-try-http3-over-quic>#</a></h3><p><strong>Time:</strong> 10–15 min
<strong>Difficulty:</strong> Medium
<strong>Analogy:</strong> Faster talk in a noisy square.</p><p><strong>Steps</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -I https://example.com
</span></span><span class=line><span class=cl>curl --http3 -I https://example.com
</span></span></code></pre></div><p><strong>Expected:</strong> Some sites respond with <code>HTTP/3</code> in headers.
<strong>Why it matters:</strong> QUIC reduces head-of-line blocking.</p><hr><h3 id=lab-12-round-robin-dns-as-load-balancing>Lab 12: Round-Robin DNS as Load Balancing<a hidden class=anchor aria-hidden=true href=#lab-12-round-robin-dns-as-load-balancing>#</a></h3><p><strong>Time:</strong> 10 min
<strong>Difficulty:</strong> Easy
<strong>Analogy:</strong> One address, many concierges.</p><p><strong>Steps</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dig +short a www.google.com
</span></span></code></pre></div><p>Repeat a few times and note multiple IPs.</p><p><strong>Expected:</strong> Several addresses rotate per query.
<strong>Why it matters:</strong> DNS spreads guests across entrances.</p><hr><h3 id=lab-13-nat-in-the-wild-with-one-public-face>Lab 13: NAT in the Wild with One Public Face<a hidden class=anchor aria-hidden=true href=#lab-13-nat-in-the-wild-with-one-public-face>#</a></h3><p><strong>Time:</strong> 5–10 min
<strong>Difficulty:</strong> Easy
<strong>Analogy:</strong> Mail forwarding at the building exit.</p><p><strong>Steps</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -s https://api.ipify.org
</span></span></code></pre></div><p>Run on two devices on the same network.</p><p><strong>Expected:</strong> Both show the same public IP.
<strong>Why it matters:</strong> NAT rewrites return addresses at the exit.</p><hr><h3 id=lab-14-measure-the-trip-with-curl-timings>Lab 14: Measure the Trip with Curl Timings<a hidden class=anchor aria-hidden=true href=#lab-14-measure-the-trip-with-curl-timings>#</a></h3><p><strong>Time:</strong> 10–15 min
<strong>Difficulty:</strong> Easy
<strong>Analogy:</strong> Concierge logbook of each delivery.</p><p><strong>Steps</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -o /dev/null -s -w <span class=s2>&#34;dns=%{time_namelookup} connect=%{time_connect} tls=%{time_appconnect} ttfb=%{time_starttransfer} total=%{time_total}\n&#34;</span> https://example.com
</span></span></code></pre></div><p><strong>Expected:</strong> Breakdown of total time by phase.
<strong>Why it matters:</strong> Observability starts with simple timing.</p><hr><h3 id=lab-15-mini-troubleshooting-loop>Lab 15: Mini Troubleshooting Loop<a hidden class=anchor aria-hidden=true href=#lab-15-mini-troubleshooting-loop>#</a></h3><p><strong>Time:</strong> 15–20 min
<strong>Difficulty:</strong> Easy
<strong>Analogy:</strong> Follow the envelope boundary by boundary.</p><p><strong>Scenario:</strong> A website doesn’t load.</p><p><strong>Steps</strong></p><ol><li>Address: DNS ok? <code>dig example.com</code></li><li>Path: Local OK? <code>ping &lt;gateway></code></li><li>Outside OK? <code>traceroute 1.1.1.1</code></li><li>Permission: TLS or HTTP? <code>curl -I https://example.com</code></li><li>Swap DNS: <code>dig @1.1.1.1 example.com</code></li></ol><p><strong>Expected:</strong> You identify which boundary failed.
<strong>Why it matters:</strong> Address, Path, Permission always guide you.</p><hr><h2 id=cloud-track-optional-vendor-neutral>Cloud Track (Optional, Vendor-Neutral)<a hidden class=anchor aria-hidden=true href=#cloud-track-optional-vendor-neutral>#</a></h2><h3 id=cloud-lab-a-build-a-three-wing-vpc-floor-plan>Cloud Lab A: Build a Three-Wing VPC Floor Plan<a hidden class=anchor aria-hidden=true href=#cloud-lab-a-build-a-three-wing-vpc-floor-plan>#</a></h3><p><strong>Time:</strong> 30–45 min
<strong>Difficulty:</strong> Medium
<strong>Analogy:</strong> Design your own private floor in the hotel.</p><p><strong>Goal:</strong> Create a VPC with Public, Private-App, and Private-DB subnets.</p><p><strong>Steps</strong></p><ol><li>Create a VPC (e.g., <code>10.0.0.0/16</code>).</li><li>Add subnets: Public (<code>10.0.1.0/24</code>), App (<code>10.0.2.0/24</code>), DB (<code>10.0.3.0/24</code>).</li><li>Attach an Internet Gateway.</li><li>Route tables: Public → IGW, Private → NAT.</li><li>Security Groups:<ul><li>Web: allow 80/443 from Internet.</li><li>App: allow 80 from Web subnet.</li><li>DB: allow 3306 from App only.</li></ul></li></ol><p><strong>Expected:</strong> Public reachable, Private internal only.</p><hr><h3 id=cloud-lab-b-nat-gateway-as-an-outbound-only-staff-door>Cloud Lab B: NAT Gateway as an Outbound-Only Staff Door<a hidden class=anchor aria-hidden=true href=#cloud-lab-b-nat-gateway-as-an-outbound-only-staff-door>#</a></h3><p><strong>Time:</strong> 20–30 min
<strong>Difficulty:</strong> Medium
<strong>Analogy:</strong> The monitored back exit.</p><p><strong>Steps</strong></p><ol><li>Deploy NAT Gateway in Public subnet.</li><li>Update Private subnet route: default route to NAT.</li><li>Test outbound with <code>curl https://example.com</code>.</li><li>Confirm inbound from Internet fails.</li></ol><p><strong>Expected:</strong> Outbound works, inbound blocked.</p><hr><h3 id=cloud-lab-c-vpc-endpoint-to-keep-traffic-off-the-street>Cloud Lab C: VPC Endpoint to Keep Traffic Off the Street<a hidden class=anchor aria-hidden=true href=#cloud-lab-c-vpc-endpoint-to-keep-traffic-off-the-street>#</a></h3><p><strong>Time:</strong> 15–25 min
<strong>Difficulty:</strong> Medium
<strong>Analogy:</strong> Private service door to hotel amenities.</p><p><strong>Steps</strong></p><ol><li>Add a Gateway-type endpoint (for S3 or storage).</li><li>Update route table to send service traffic through it.</li><li>Access the service from a private instance.</li><li>Confirm no Internet egress in flow logs.</li></ol><p><strong>Expected:</strong> Private traffic path stays inside hotel walls.</p><hr><h3 id=cloud-lab-d-security-group-vs-nacl-who-blocked-it>Cloud Lab D: Security Group vs NACL, Who Blocked It?<a hidden class=anchor aria-hidden=true href=#cloud-lab-d-security-group-vs-nacl-who-blocked-it>#</a></h3><p><strong>Time:</strong> 20–30 min
<strong>Difficulty:</strong> Medium
<strong>Analogy:</strong> Door guard vs hallway rule.</p><p><strong>Steps</strong></p><ol><li>SG allows inbound 80 to instance.</li><li>NACL blocks ephemeral return ports.</li><li>Try web access; it fails.</li><li>Remove the block; it works.</li></ol><p><strong>Expected:</strong> SG is stateful, NACL is not.
<strong>Why it matters:</strong> Understand which guard said no.</p><hr><h3 id=cloud-lab-e-flow-logs-to-find-the-drop>Cloud Lab E: Flow Logs to Find the Drop<a hidden class=anchor aria-hidden=true href=#cloud-lab-e-flow-logs-to-find-the-drop>#</a></h3><p><strong>Time:</strong> 20–30 min
<strong>Difficulty:</strong> Medium
<strong>Analogy:</strong> Review the hallway cameras.</p><p><strong>Steps</strong></p><ol><li>Enable flow logs for the subnet.</li><li>Trigger a failed connection.</li><li>Filter by instance IP/port in logs.</li><li>Note <code>ACCEPT</code> or <code>REJECT</code>.</li><li>Identify which layer denied traffic.</li></ol><p><strong>Expected:</strong> You can pinpoint the blocked boundary.</p><hr><h2 id=teaching-tips>Teaching Tips<a hidden class=anchor aria-hidden=true href=#teaching-tips>#</a></h2><ul><li>Keep each lab to one printed page so a learner can glance at the whole journey.</li><li>Close every exercise with a <strong>In a Nutshell</strong> recap or reflection line.</li><li>Repeat the mantra <strong>Address · Path · Permission</strong> until it becomes second nature.</li><li>Use callbacks to earlier analogies (&ldquo;remember the elevator?&rdquo;) so readers connect new facts to familiar images.</li><li>Adjust firewalls and guardrails minimally; never ask students to disable everything.</li></ul><hr><p>Let’s keep following the envelope (pun intended).</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=https://memo.mx/posts/understanding-computer-networks-by-analogy-part-6/><span class=title>Next »</span><br><span>Understanding Computer Networks by Analogy: Part 6 - Appendices</span></a></nav></footer></article></main><footer class=footer></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
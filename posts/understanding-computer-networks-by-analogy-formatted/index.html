<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Understanding Computer Networks by Analogy | Memo Garcia</title>
<meta name=keywords content><meta name=description content="I wrote this for the younger (and less handsome) version of myself from university who found networking concepts challenging. If you&rsquo;re reading this and you are also struggling with these concepts, just know this isn&rsquo;t a complete map of the &ldquo;networking world&rdquo;, it is simply a different way to see it. I hope you find this analogy helpful.
I&rsquo;ve decided to stick with analogies here instead of going deep into technical terms, you can find those easily anywhere, because I enjoy looking at the world from different perspectives."><link rel=canonical href=https://memo.mx/posts/understanding-computer-networks-by-analogy-formatted/><meta name=google-site-verification content="G-ZRB1GGCC9B"><link crossorigin=anonymous href=/assets/css/stylesheet.d1467e28595903f993a7e37893057cefe5f69aece461c850796bf5b0a3bf422a.css integrity="sha256-0UZ+KFlZA/mTp+N4kwV87+X2muzkYchQeWv1sKO/Qio=" rel="preload stylesheet" as=style><link rel=icon href=https://memo.mx/%20favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://memo.mx/%20favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://memo.mx/%20favicon-32x32.png><link rel=apple-touch-icon href=https://memo.mx/%20apple-touch-icon.png><link rel=mask-icon href=https://memo.mx/%20safari-pinned-tab.svg><meta name=theme-color content="#0d0221"><meta name=msapplication-TileColor content="#0d0221"><link rel=alternate hreflang=en href=https://memo.mx/posts/understanding-computer-networks-by-analogy-formatted/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZRB1GGCC9B"></script><script>var dnt,doNotTrack=!1;if(!0&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZRB1GGCC9B")}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://memo.mx/posts/"},{"@type":"ListItem","position":2,"name":"Understanding Computer Networks by Analogy","item":"https://memo.mx/posts/understanding-computer-networks-by-analogy-formatted/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Understanding Computer Networks by Analogy","name":"Understanding Computer Networks by Analogy","description":"I wrote this for the younger (and less handsome) version of myself from university who found networking concepts challenging. If you\u0026rsquo;re reading this and you are also struggling with these concepts, just know this isn\u0026rsquo;t a complete map of the \u0026ldquo;networking world\u0026rdquo;, it is simply a different way to see it. I hope you find this analogy helpful.\nI\u0026rsquo;ve decided to stick with analogies here instead of going deep into technical terms, you can find those easily anywhere, because I enjoy looking at the world from different perspectives.","keywords":[],"articleBody":"I wrote this for the younger (and less handsome) version of myself from university who found networking concepts challenging. If you‚Äôre reading this and you are also struggling with these concepts, just know this isn‚Äôt a complete map of the ‚Äúnetworking world‚Äù, it is simply a different way to see it. I hope you find this analogy helpful.\nI‚Äôve decided to stick with analogies here instead of going deep into technical terms, you can find those easily anywhere, because I enjoy looking at the world from different perspectives. It‚Äôs fascinating how many connections you can make when you approach things from a new angle.\nI understand that analogies have their limits and sometimes you have to stretch things to make them work. In those cases, maybe it‚Äôs better to stick to first principles. But honestly, I find analogies more fun, especially for abstract concepts like computer networks.\nFinally, I want to emphasize that this analogy isn‚Äôt meant to be an exact representation of the ‚Äúworld of networking‚Äù. It‚Äôs simply a learning tool to help view computer networks from a different perspective.\nWhat to Expect We‚Äôll be comparing computer networks to things you encounter in everyday life. Our main analogy is that of buildings and cities:\nPart 1 (Building the Foundation): We start small with a single building representing a network. We‚Äôll explore rooms (computers), hallways (connections), floor managers (switches), and the fundamental pieces that make a network work internally.\nPart 2 (Moving Around the City): We expand outward. Multiple buildings form a city ‚Äì an analogy for the internet. We‚Äôll see how messages travel across the city, guided by concierges (routers) and roads (cables), and how global addressing and directories help data find its destination.\nPart 3 (Hotels in the Cloud \u0026 Future Cities): We look at more advanced networking concepts. We‚Äôll check into ‚Äúhotels‚Äù (cloud computing) to see how renting a room in someone else‚Äôs building works. We‚Äôll also touch on future-forward technologies like IPv6, software-defined networking, and more.\nPart 4 (Becoming an Architect): We conclude by turning the analogy around. Now that you‚Äôve learned the layout, it‚Äôs time to become the architect. This part guides you on how to design and think about networks yourself.\nAppendix: A handy concept mapping table (network terms to analogy terms) for quick reference.\nPart 1: Building the Foundation Networks as Buildings Core Analogy: A computer network visualized as a building with many rooms and hallways.\nImagine a large building filled with countless rooms, connected by hallways and staircases. Each room represents a single computer or device, and the room number (like ‚ÄúRoom 101‚Äù) acts as that computer‚Äôs IP address. People (messages) walk through hallways to visit different rooms ‚Äì this movement is like data transfer between computers.\nIn this simple analogy, the entire building is a network. The rooms inside are the individual devices, and the hallways are the communication links that allow movement (data transfer) within the building. Just as you might talk to someone in another room by walking down the hallway and knocking on their door, one computer sends data to another by sending it through the network‚Äôs ‚Äúhallways.‚Äù\nBasic Building Components Building = Network: The whole structure containing everything is the network itself\nSmall building ‚Üí home network Huge skyscraper ‚Üí large corporate network Room + Room Number = Computer + IP Address: Each room is a computer or device\nRoom number (e.g., ‚ÄúRoom 101‚Äù) = unique identifier = IP address Uniquely identifies a device within the network Hallways = Network Connections: The corridors, staircases, and doors connecting rooms\nEthernet cables or Wi-Fi signals = hallways for data movement Language = Network Protocol: Common communication rules\nPeople speak a common language ‚Üí devices use the same protocol Protocols define how messages are formatted and transmitted Network Types as Building Types Buildings have specific purposes. Some are homes, others are offices, hospitals, or malls. Likewise, networks come in different types optimized for their use:\nHome Network = Cozy house (designed for simplicity and convenience) Business Network = Office building (designed for efficiency and security) Data Center Network = Industrial complex (optimized for large-scale processing and storage) Network Types as Building Types LAN (Local Area Network) = Single building\nUnder one roof, one entity (home or office) WAN (Wide Area Network) = Campus or building cluster\nDifferent locations connected by roads (communication lines) Data Center Network = Specialized facility\nLike a high-security bank or research lab Built for speed and reliability above all Now, one building by itself is a contained world. But networks rarely live in isolation ‚Äì just as buildings exist in neighborhoods and cities. Before we go city-wide, however, we need to further design our building‚Äôs internal structure. Let‚Äôs go floor by floor and room by room, fleshing out this analogy.\nTechnical Perspective In reality, a computer network is a collection of interconnected devices (computers, servers, phones, etc.) that communicate using standard protocols (rules). Each device is identified by an IP address (like a unique phone number or house address).\nNetworks range from small (few home devices) to enormous (thousands of corporate devices). Like buildings with internal room numbers, many networks use private IP addresses internally, while the entire network appears to the outside world (internet) as a single public IP address (the building‚Äôs street address).\nThe building analogy illustrates:\nInternal structure and addressing Network boundaries (walls) and entry/exit points (doors) How hardware (cables, routers, switches) and software work together Note: While the analogy simplifies concepts, real networks involve complex hardware and software interactions.\nDesigning Network Floors Every large building has multiple floors, and each floor groups certain rooms together. In our network-as-building analogy, each floor represents a subnetwork (subnet) ‚Äì a subdivided portion of the larger network. We design floors in a building to organize rooms (maybe by department or function), and similarly we design subnets in a network to organize computers for security or efficiency.\nFloor Analogy: Different floors in a building represent different sub-networks within a larger network.\nSuppose you have a company‚Äôs office building. The company decides that the HR department will occupy Floor 2 and the Engineering team will occupy Floor 3. By doing this, people (and communications) on the same floor can interact freely, while movement between floors is more controlled (perhaps you need to take an elevator or have permission to access a different floor).\nThis is just like a network where you create subnets: computers on the same subnet (floor) can talk to each other easily, but to communicate with a different subnet (another floor) the traffic might need to go through some controlled gateway or router.\nWhy Separate Floors? In a real building, you might separate floors by department to reduce unnecessary foot traffic and increase security. In networks, we use subnets to:\nLocalize traffic and improve performance Improve security by isolating sensitive data For example, the HR computers (handling sensitive data) stay within their own subnet so their traffic is isolated from Engineering‚Äôs streaming of code builds or test data.\nAddressing: Floor + Room Numbers If someone tells you ‚ÄúRoom 101‚Äù without context, you might ask, on which floor? In a building, Room 101 on Floor 1 is different from Room 101 on Floor 3. So usually we specify both: ‚ÄúFloor 3, Room 101.‚Äù\nNetworks do something similar. A device‚Äôs full address includes:\nSubnet info (floor) Host info (room) For example, consider an IP address like 192.168.3.101:\n192.168.3.x identifies the subnet (floor) 101 identifies the specific device (room) on that floor As an analogy, a full address might look like:\nBuilding X, Floor 3, Room 101 This is akin to saying ‚ÄúDevice at IP 192.168.3.101 in Network X.‚Äù Within Building X you only needed ‚ÄúFloor 3, Room 101,‚Äù but from outside you specify the building as well.\nDesigning Effective Floors (Subnets) Designing a floor (subnet) effectively involves several considerations:\nHallway Width (Bandwidth) Question: How wide are the corridors on this floor? Network equivalent: Hallway width represents network bandwidth on the subnet Impact: Wider hallways (higher bandwidth) allow more people (data packets) to move simultaneously Example: High-traffic floors (Engineering transferring big files) need wider hallways (faster switches/higher capacity links) Number of Rooms (Subnet Size) Question: How many rooms can you fit on this floor? Network equivalent: How many IP addresses (devices) the subnet can accommodate Planning tool: The subnet mask or prefix length is like a blueprint 255.255.255.0 (a /24 prefix) = floor plan allowing 254 rooms Need more rooms? Use different mask or add another floor Subnet Sizing Examples Big Floors Large subnet (like /16) = floor with huge number of rooms Useful for: Large office or campus (tens of thousands of devices) Drawback: Massive single floor can get unwieldy Network issue: Huge subnet can suffer from inefficiencies like broad traffic broadcasts Small Floors Tiny subnet (like /30 or /29) = handful of rooms only Useful for: Point-to-point links or very small offices Benefits: Easy to manage and secure Limitation: Not flexible if you need to add more rooms/devices In practice, network architects carefully plan how to ‚Äúfloor-plan‚Äù their networks: balancing size and performance. You wouldn‚Äôt want a single floor for your entire corporation if it makes more sense to have each department on its own floor.\nTechnical Perspective A subnet is a logically visible subdivision of an IP network. When we talk about subnets, we use terms like subnet mask or CIDR prefix (e.g., /24) to denote how IP addresses are split between:\nNetwork portion (floor) Host portion (room) The subnet mask is essentially the ‚Äúfloor plan‚Äù ‚Äì it determines which part of an IP address denotes the subnet (floor) and which part denotes the host (room).\nExample: In the IP 192.168.3.101/24\n/24 mask means first 24 bits (192.168.3) = network portion (Floor 3) Last 8 bits (101) = host identifier on that subnet Key behaviors:\nDevices within same subnet can reach each other directly (like people moving within same floor) without involving a router Communication between different subnets must go through a gateway (elevator connecting floors) Subnets help manage traffic by:\nLimiting broadcast domains Organizing network into smaller, efficient segments Security example: Separating guest Wi-Fi from internal company network is like giving guests their own floor, with elevator as checkpoint between guests and secure areas.\nComputers as Rooms If our building is the network, then each room inside it is a computer (or any networked device). Just like rooms in a building, computers in a network come in all shapes and sizes and serve different purposes:\nOne room might be a quiet office ‚Üí one computer might be a server Another room might be a noisy cafeteria ‚Üí another computer might be a user‚Äôs laptop Each room can be occupied (running applications) and has people coming in and out (data being sent/received).\nRoom Design Reflects Purpose A room‚Äôs design and content depend on its occupants:\nIn an office building:\nRoom 101 might be Accounting (filed with filing cabinets and calculators) Room 102 might be a conference room (projectors and speakerphones) In networking:\nA computer‚Äôs role (what services or software it runs) determines its ‚Äúsetup‚Äù Database server = records room with locked cabinets (lots of data stored securely) Web server = reception room with pamphlets ready to give out (serves web pages to anyone who asks) Doors = Network Interfaces How do things get in and out of a room? Through doors.\nIn networking, a door represents a network interface on the computer:\nMost rooms have at least one main door Most computers have at least one primary network interface (laptop‚Äôs Wi-Fi or Ethernet port) Some rooms have multiple doors ‚Üí some computers have multiple network interfaces Multiple Doors A single room can have several doors leading to different places, and each door provides a unique way to enter or exit the room:\nMain Door Purpose: The primary way in and out Network equivalent: Primary network interface (often Ethernet port or Wi-Fi antenna) Usage: How bulk of traffic comes and goes Analogy: Front door where regular visitors enter Examples: PC‚Äôs Ethernet port connecting to office LAN Phone‚Äôs Wi-Fi radio connecting to home router Maintenance Door Purpose: Back door for staff or deliveries Network equivalent: Secondary interface for special purposes Use cases: Management network connection VPN connection Dedicated management port (for administrators only) Examples: Servers with dedicated management port Computer with second network card or USB tethering interface Emergency Exit Purpose: Rarely used but crucial in crisis Network equivalent: Backup connection Use cases: Critical server with 4G wireless backup if wired network fails Secondary ISP link when primary goes down Automatic failover interface Behavior: Most of time sits unused (door closed), becomes vital when disaster strikes Door Identification Each door (network interface) has its own identifier, like doors in real building having unique key or number.\nIn networking, the unique ID for a door is the MAC address ‚Äì a hardware address assigned to the network interface:\nThink of MAC address as ‚Äúdoor ID‚Äù Ensures right packet goes to right door Even if two rooms have same layout, doors are uniquely labeled Floor manager (switch) can tell them apart Internal Doors Some rooms have internal doors connecting to adjacent rooms (like office suites with interior connecting doors). Similarly, a computer might have virtual or internal network connecting to another (example: virtual machines on one host connecting via internal bridge).\nBroken Doors Important: If a door is locked or broken, the room is inaccessible.\nIn network terms: if a network interface is shut down or misconfigured, that computer effectively can‚Äôt be reached from that path ‚Äì like a closed door. This is why network downtime often feels like you‚Äôre knocking on a door nobody is opening.\nWe now have a building with:\nMultiple floors (subnets) Rooms (computers) with doors (interfaces) But how do we make sure messages get to the right room efficiently? In a big building, you don‚Äôt wander the halls randomly hoping to find ‚ÄúBob in Room 203.‚Äù Instead, large buildings have some directory or at least someone to ask for directions.\nIn our network building, that role is handled by devices like switches and routers ‚Äì the subject of the next chapters.\nTechnical Perspective An individual computer or host on the network is identified by its IP address (room number) and communicates through one or more network interfaces (doors).\nKey technical details:\nEach network interface has a MAC address (unique physical identifier for that interface) Operates at Layer 2 of the OSI model (data link layer) Computer with multiple network interfaces can connect to multiple networks or segments Examples:\nWorkstation connected to both wired Ethernet and Wi-Fi simultaneously Like room with two doors to different hallways Interface management:\nNetworking software handles each interface separately System decides which interface to use based on routing rules Usually uses main interface unless specific route says otherwise Redundancy concept:\n‚ÄúEmergency exit‚Äù = redundancy in networking Mission-critical systems have redundant network connections (and power) If one fails, other picks up Example: servers with dual NICs (Network Interface Cards) configured for failover Address resolution:\nMAC addresses ensure switches can direct traffic to correct interface To send packet to IP, it gets resolved (via ARP) to MAC address Finds which door leads to that IP, delivers to specific interface If interface is down, no entry Network administration: Managing interfaces (doors) is key part of network administration:\nEnabling/disabling ports Setting up secondary links Ensuring ‚Äúrooms‚Äù stay accessible Communication flows through right ‚Äúdoors‚Äù Switches as Floor Managers So you‚Äôre on Floor 2 of the building, and you want to send a file (message) to your colleague in Room 203 on the same floor. How do you ensure it gets there?\nInefficient approach: You could wander the hallway, knocking on every door: ‚ÄúIs this 203? No‚Ä¶ Is this 203?‚Äù That‚Äôs terribly inefficient.\nEfficient approach: In well-run buildings, there‚Äôs usually a floor manager or directory on each floor to direct you.\nThe Switch‚Äôs Role In our network building, a switch is like the floor manager (or helpful concierge on that floor). The switch knows exactly which door corresponds to Room 203.\nIn practice: When you (Room 201) send data intended for Room 203:\nSwitch on that floor checks the destination Says ‚ÄúAh, Room 203 is down the hall, third door on the left‚Äù Forwards your message directly to that door Key benefit: You don‚Äôt have to broadcast your message to every room hoping it finds the right one; the switch takes care of delivering it to the correct recipient.\nHow Switches Know Where to Deliver Question: How does the switch know which door (network interface) belongs to Room 203 (specific computer)?\nAnswer: It maintains a list ‚Äì essentially a mapping of:\nRoom numbers (IP addresses) Door IDs (MAC addresses) on that floor Analogies:\nEmployee directory listing who‚Äôs in which room Guest list that floor manager checks Process: If you tell floor manager ‚ÄúI need to get this to Alice in Room 203‚Äù:\nManager quickly references the list Hands message to door for Room 203 In networking:\nSwitches keep MAC address table that maps MAC addresses to physical ports on switch ARP (Address Resolution Protocol) serves as ‚Äúguest list‚Äù mechanism Devices learn the MAC corresponding to given IP so switch can route accordingly Switch Scope: Single Floor Only Important limitation: Switches work within a single floor (single subnet).\nFloor manager doesn‚Äôt care about Floor 3 or Floor 10 They only deal with their floor‚Äôs rooms If you ask about room on another floor, they send you to: Elevator (gateway) Building concierge (router) Technical meaning: Switch typically used for LAN (Local Area Network) connectivity:\nForwards data between devices in same network segment Uses MAC addresses (layer 2 information) for forwarding decisions Ignores external networks Switch Benefits Efficiency: Connects devices within same network efficiently\nDelivers messages only to intended recipient Reduces unnecessary traffic Analogy: Imagine if every conversation on floor had to be shouted to all rooms ‚Äì chaotic!\nResult: Switches create direct line between sender and receiver on that floor once they know each other‚Äôs addresses, like good floor manager quietly delivering mail to exact office without bothering others.\nTechnical Perspective A network switch operates at the Data Link layer (Layer 2 of OSI model). It‚Äôs a device with multiple ports, each port usually connected to one device (one room).\nHow it works:\nFrame arrives: When data packet (frame) at Layer 2 arrives at switch Check destination: Switch looks at frame‚Äôs destination MAC address Consult table: Consults MAC address table to see which port (door) corresponds to that MAC Forward or learn: If match found ‚Üí forwards frame out only that port If doesn‚Äôt know MAC ‚Üí may broadcast frame to all ports asking ‚ÄúWho has this MAC address?‚Äù Learning process:\nLike someone new moved into Room 203 and floor manager hasn‚Äôt met them Analogous to calling out ‚ÄúRoom 203, where are you?‚Äù Device with that MAC responds Switch learns which port that device is on and updates its table All happens in milliseconds Efficiency improvement: Switches greatly increase network efficiency compared to older hubs:\nHubs: Like shouting to all rooms (send incoming data to all ports blindly) Switches: Send data only where needed ARP integration: ARP (Address Resolution Protocol) is the mechanism where:\nDevice knowing another device‚Äôs IP address can learn its MAC address Broadcasts query on the LAN Response from target device lets sender and switch know mapping of IP to MAC (room number to door ID) Key limitation: Switches do not typically:\nLook at IP addresses Route between networks (that‚Äôs router‚Äôs job) They simply switch frames on local network Fundamental role: Switches are one of fundamental building blocks of a LAN, ensuring traffic goes only where needed and every device‚Äôs ‚Äúdoor‚Äù is known to the network.\nRouters as Building Concierges Now let‚Äôs say you‚Äôre on Floor 1 (Engineering) and you need to send a message to Room 504 on Floor 5 (perhaps the Executive offices) in the same building.\nThe floor manager (switch) on Floor 1 looks at the destination and realizes: ‚ÄúRoom 504 isn‚Äôt on this floor.‚Äù\nSo what happens? The switch passes your message up to the building concierge, which in our analogy is the router.\nRouter‚Äôs Role: Building-Wide Knowledge A router is like the concierge or information desk in the lobby that knows the whole building‚Äôs layout:\nEach floor‚Äôs manager knows only their own floor Router knows how to get from floor to floor Effectively connects the subnets/floors together If Floor 5 is a different subnet, the router is the device that can shuttle data between Floor 1 and Floor 5 networks.\nThe Inter-Floor Message Journey Here‚Äôs how the interaction goes in the building scenario:\nYou ‚Üí Floor 1 Manager: Hand your message to Floor 1 manager (switch) saying it‚Äôs for Room 504\nFloor 1 Manager ‚Üí Router: ‚ÄúNot on this floor ‚Äì I‚Äôll forward this to the building concierge‚Äù\nRouter Analysis: Router (concierge) in lobby looks at address: ‚ÄúRoom 504, Floor 5‚Äù\nRouter has map of building (analogous to routing table) Plan of which floors exist and how to reach them Figures out best way to send message to Floor 5 Maybe knows Elevator B goes to floors 4-6, so that‚Äôs the one to use Router ‚Üí Gateway: Router puts message into correct ‚Äúelevator‚Äù (gateway) that will carry it to Floor 5\nFloor 5 Delivery: Once at Floor 5, local switch/floor manager takes over and delivers message to Room 504‚Äôs door\nRouter‚Äôs Specific Job Router‚Äôs job: Inter-floor (inter-network) navigation\nDoesn‚Äôt deliver to individual room (that‚Äôs switch‚Äôs job once on correct floor) Makes sure message gets to right floor in first place In networking terms:\nRouter connects different networks (subnets) Directs packets based on their IP addresses (which include network information like floor) Decides next ‚Äúhop‚Äù or next network to forward packet towards destination Router Authority Think of router as the one who holds the master key to the building:\nNot literally, but has authority to move between floors Aware of the big picture Without router: each floor (subnet) would be isolated Couldn‚Äôt easily send data from one to another Path Selection Routers often make decisions about which path is best:\nBuilding analogy: In huge building with multiple elevators and stairs, concierge might think:\n‚ÄúElevator A is busy, let‚Äôs send this via Elevator B‚Äù ‚ÄúUsual staircase is closed for cleaning, use the other one‚Äù Network equivalent: Router can choose between multiple routes if options exist:\nGenerally chooses most efficient path Based on programming and network state Summary: Switch vs Router Switch = local delivery on one floor Router = global delivery between floors Ensuring correct delivery:\nSwitch: Message goes door-to-door correctly Router: Message goes floor-to-floor correctly Technical Perspective A router operates at the Network layer (Layer 3 of OSI). Its primary job is to:\nExamine IP address in each incoming packet Decide where to send packet next so it eventually reaches destination network Routing table: Routers maintain data structure called routing table ‚Äì essentially the ‚Äúmap‚Äù of known networks and directions on how to reach them.\nRouting table entries: Each entry says, for example:\n‚ÄúNetwork 192.168.5.0/24 is reachable via Interface X‚Äù ‚ÄúOr via router at other end of Interface X‚Äù Forwarding process:\nPacket destined for 192.168.5.42 arrives Router checks its table Forwards packet out appropriate interface toward that network Junction point: If router connected to multiple networks (like multiple floor connections), it‚Äôs effectively the junction point.\nAdvanced functions: Routers also handle traffic between networks with different rules or architectures:\nCan perform Network Address Translation (NAT) when going between private and public networks Like front desk translating addresses Internetworking backbone: Because routers look at IP addresses, they form backbone of internetworking:\nConnect LANs into WANs Ultimately to the internet Dynamic updates: Often run routing protocols (like OSPF, BGP, etc.) to:\nExchange information with other routers Ensure their maps stay up-to-date Key difference from switches:\nSwitch: Doesn‚Äôt modify packet, just forwards frames within one network Router: Will decapsulate frame, inspect IP packet, decrement TTL (time-to-live), change source/dest MAC addresses for next hop, forward ‚Äì possibly fragmenting if necessary Process analogy: Like concierge taking your letter, reading address, maybe stamping it or repackaging it for elevator, and sending it on its way.\nScalability: Without routers, modern networks could not scale:\nEvery network would be an island With routers: can link networks of different types (Ethernet, fiber, wireless) and different address ranges into one large, global network (the internet) Final point: Routers are indeed the concierges that connect the whole ‚Äúbuilding‚Äù of the internet together, floor by floor.\nGateways as Elevators We‚Äôve hinted at elevators already, and here they come into play. In our building analogy, the gateway is like an elevator that connects floors.\nClarifying the Relationships Switch = floor manager on each floor (manages local delivery) Router = building concierge that knows how to navigate between floors Gateway = conceptually the connection point that takes you from one network to another In our analogy, that‚Äôs the elevator shaft and elevator car moving between floors.\nNote: Gateway often used interchangeably with router‚Äôs function in home networks\nHow Elevators Work When you want to move from one floor to another, you typically step into an elevator (or take stairs, but elevator is easier for our analogy because it‚Äôs single point connecting multiple floors).\nElevator characteristics:\nDoesn‚Äôt care who you are or what you‚Äôre carrying Just knows it needs to move things between floors Provides path from, say, Floor 1 to Floor 5 Network Gateway Function Similarly, a network gateway is device or node that serves as access point to another network:\nUsually, router on your local network acts as default gateway It‚Äôs the thing your computer sends data to when destination is on different network Gateway‚Äôs job is not to inspect fine details of your message (not reading mail content) Simply transport your data to correct next network (next ‚Äúfloor‚Äù) Simple Gateway Equation In simple terms: gateway = elevator\nYou‚Äôre on Floor 1 and need to get to Floor 5 ‚Üí take elevator up Your PC on Network A needs to send data to Network B ‚Üí sends to gateway (router), which moves data into Network B Protocol Translation Important capability: Gateways often handle differences between networks\nBuilding analogy:\nFloor 1 is library, Floor 2 is warehouse Maybe elevator has to adjust to carry different kinds of loads (books vs pallets) Network equivalent:\nGateway might translate or encapsulate data when moving between dissimilar systems or protocols Example: Gateway between email system and text-messaging system would translate email to SMS format For standard IP networks, gateway (router) mostly just forwards IP packets from one subnet to another User Perspective From user perspective, gateway is usually just an IP address configured on your device as ‚Äúroute to anything not on my local network.‚Äù\nLike telling your room: ‚ÄúIf destination isn‚Äôt on this floor, call the elevator at IP 192.168.1.1‚Äù (often a home router‚Äôs IP)\nThe Visual Process The elevator process:\nElevator takes message from floor‚Äôs switch up (or down) to destination floor‚Äôs switch Once it arrives, local floor manager handles it from there Technical Perspective In networking, a gateway typically refers to router interface that serves as entry/exit point to a network.\nHome network example:\nYour router might have IP 192.168.1.1 This is default gateway for all devices in 192.168.1.x network When your laptop 192.168.1.50 wants to reach device on internet (say 172.217.5.110, a Google server): Recognizes destination not in its own subnet According to routing table, sends packet to default gateway (192.168.1.1) Router receives it and routes out towards internet Complex gateway functions: Gateway can also mean more complex protocol translating devices:\nEmail-to-SMS gateway Voice-over-IP gateway converting between telephone audio and internet packets Standard IP networking: Usually just means ‚Äúthe router that I send stuff to in order to reach other networks‚Äù\nInteroperability: Gateways ensure interoperability:\nEven between different protocol families if needed Most commonly just connect IP networks Operating layers:\nAt minimum: Layer 3 (IP routing) Often Layer 4 or higher if doing fancy translations Summary understanding: Whenever you see ‚ÄúDefault Gateway‚Äù in network settings, think: ‚Äúthis is the elevator I take to get out of my floor.‚Äù\nThe gateway has:\nOne foot in your local network Another foot in the outside network Shuffling data between the two A Message‚Äôs Journey Now that we have the cast of characters (rooms, doors, switches, routers, gateways), let‚Äôs put it all together in a short story. This will illustrate the typical path of a message inside a building-network and then beyond.\nScenario Setup You are in: Room 101 on Floor 1 (your laptop on Engineering subnet)\nYou want to send message to: Room 504 on Floor 5 (CEO‚Äôs computer on Management subnet)\nStep-by-Step Journey 1. Starting Point ‚Äì Room 101 (You) Action: You write message and address it to ‚ÄúRoom 504, Floor 5‚Äù\nNetwork equivalent: Your computer prepares data packet with destination IP belonging to Floor 5 subnet\n2. Local Floor Check ‚Äì Switch on Floor 1 Action: You hand message to Floor 1 switch (your network interface sends packet to switch)\nSwitch analysis: Looks at destination. Room 504 is not on Floor 1, so switch doesn‚Äôt know which port leads there\nSwitch response: ‚ÄúThis isn‚Äôt on my floor ‚Äì I need to send this to the router (concierge)‚Äù\n3. Hand-Off to Router ‚Äì Building Concierge Action: Floor 1 switch forwards packet to router (configured as gateway)\nRouter analysis: Being the concierge, checks routing table (building map)\nRouter decision: Sees Room 504 is on Floor 5, which it can reach via appropriate interface/elevator\n4. Routing the Message ‚Äì Going Up Action: Router puts message into correct ‚Äúelevator‚Äù (gateway) that will take it to Floor 5\nTechnical process: Router has interface connected to backbone running through all floors, encapsulates packet accordingly and sends upward\n5. Arrival at Floor 5 ‚Äì Switch on Floor 5 Action: Message comes out of elevator on Floor 5, handed to Floor 5 switch\nBack to local scenario: Now on destination floor\nSwitch knowledge: Switch knows exactly where Room 504 is (has MAC table entry for Room 504‚Äôs computer)\nDelivery: Delivers message to Room 504‚Äôs door without bothering other rooms\n6. Message Received ‚Äì Room 504 Final step: CEO‚Äôs computer in Room 504 receives the message you sent\nResult: Success! üéâ\nReturn Journey If we reverse it (Room 504 replies to Room 101), same sequence happens in opposite direction: Floor 5 switch ‚Üí router ‚Üí Floor 1 switch ‚Üí Room 101\nKey Cooperation Principle Each player has specific role and they cooperate to deliver data accurately:\nRoom (computer) Switch (floor manager) Router (building concierge) Elevator (gateway) Beyond One Building All of this was within one building (one network domain).\nWhat if Room 101 wanted to send message to room in another building entirely?\nPerhaps entirely different company Someone across town This is where we extend the analogy out to a city of buildings ‚Äì which represents the wider internet beyond your local network.\nPun time: we‚Äôve been building up this analogy, and now it‚Äôs time to construct an entire city out of it!\nQuick Check: What We‚Äôve Covered Inside a network (building):\nFloors (subnets) isolating internal groups Switches/routers working together Message can travel from one room to any other room in same building Next step: Going outside the building\nImagine you‚Äôre in your building and want to deliver package to someone in another building across town:\nNeed to step outside Find the address Travel through city roads That‚Äôs what happens when you send data to different network across the internet. So let‚Äôs zoom out from one building to the entire city.\nTechnical Perspective The journey described is essentially what happens when packet travels from one host to another on different subnet within LAN or campus network.\nIn networking terms:\nStep 1 - Source Decision: Source computer determines destination IP not in its own subnet (Floor 1 vs Floor 5), so sends packet to default gateway (router)\nStep 2 - Layer 2 Forwarding: Switch (Layer 2) forwards to router‚Äôs MAC because:\nPacket‚Äôs destination MAC = router‚Äôs MAC at this point Destination IP = final target‚Äôs IP Step 3 - Router Processing: Router receives packet, consults routing table, changes source/dest MAC addresses for next hop, forwards\nStep 4 - Transport: Packet travels through backbone or inter-floor connection (trunk line analogous to elevator shaft)\nStep 5 - Destination Processing: When arrives on Floor 5‚Äôs network, process reversed: packet delivered to target host‚Äôs MAC by Floor 5 switch\nOSI Layer Correspondence: Every step corresponds to OSI model layer doing its job:\nApplication data (message contents) Packed into transport segment (perhaps TCP) Wrapped in IP packet (with IP addresses for Room 101 and 504) Wrapped in Ethernet frame with MAC addresses (hop to hop) Frame Rewriting: Each router hop rewrites Layer 2 info but preserves Layer 3 info until final delivery\nCampus vs Internet: What we described = routing process on single network campus\nInternet complexity: Moment we try to go to another building (another autonomous network, like across internet), we introduce:\nMore routers Possibly DNS lookups to find building‚Äôs address And so on (covered next) Key technical takeaway: Understanding role of each component:\nSwitches: Confine traffic to local network, do fast frame switching Routers: Move packets between networks, each time making routing decision This cooperation yields scalable network where any host can talk to any other, if allowed, via series of these steps.\n","wordCount":"5533","inLanguage":"en","datePublished":"2024-12-20T01:53:23+01:00","dateModified":"2025-08-12T21:14:00+09:00","author":{"@type":"Person","name":"Memo Garcia"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://memo.mx/posts/understanding-computer-networks-by-analogy-formatted/"},"publisher":{"@type":"Person","name":"Memo Garcia","logo":{"@type":"ImageObject","url":"https://memo.mx/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://memo.mx/ accesskey=h title="Memo Garcia (Alt + H)">Memo Garcia</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://memo.mx/tools title=Tools><span>Tools</span></a></li><li><a href=https://memo.mx/dayjob title=$DAYJOB><span>$DAYJOB</span></a></li><li><a href=https://memo.mx/startup title=Startup><span>Startup</span></a></li><li><a href=https://memo.mx/youtube title=YouTube><span>YouTube</span></a></li><li><a href=https://memo.mx/books title=Books><span>Books</span></a></li><li><a href=https://memo.mx/about title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Understanding Computer Networks by Analogy</h1><div class=post-meta><span title='2024-12-20 01:53:23 +0100 +0100'>December 20, 2024</span>&nbsp;¬∑&nbsp;26 min&nbsp;¬∑&nbsp;Memo Garcia</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><ul><li><a href=#what-to-expect aria-label="What to Expect">What to Expect</a></li></ul><li><a href=#part-1-building-the-foundation aria-label="Part 1: Building the Foundation">Part 1: Building the Foundation</a><ul><li><a href=#networks-as-buildings aria-label="Networks as Buildings">Networks as Buildings</a><ul><li><a href=#basic-building-components aria-label="Basic Building Components">Basic Building Components</a></li><li><a href=#network-types-as-building-types aria-label="Network Types as Building Types">Network Types as Building Types</a></li><li><a href=#network-types-as-building-types-1 aria-label="Network Types as Building Types">Network Types as Building Types</a><ul><li><a href=#technical-perspective aria-label="Technical Perspective">Technical Perspective</a></li></ul></li></ul></li><li><a href=#designing-network-floors aria-label="Designing Network Floors">Designing Network Floors</a><ul><li><a href=#why-separate-floors aria-label="Why Separate Floors?">Why Separate Floors?</a></li><li><a href=#addressing-floor--room-numbers aria-label="Addressing: Floor + Room Numbers">Addressing: Floor + Room Numbers</a></li><li><a href=#designing-effective-floors-subnets aria-label="Designing Effective Floors (Subnets)">Designing Effective Floors (Subnets)</a><ul><li><a href=#hallway-width-bandwidth aria-label="Hallway Width (Bandwidth)">Hallway Width (Bandwidth)</a></li><li><a href=#number-of-rooms-subnet-size aria-label="Number of Rooms (Subnet Size)">Number of Rooms (Subnet Size)</a></li></ul></li><li><a href=#subnet-sizing-examples aria-label="Subnet Sizing Examples">Subnet Sizing Examples</a><ul><li><a href=#big-floors aria-label="Big Floors">Big Floors</a></li><li><a href=#small-floors aria-label="Small Floors">Small Floors</a></li><li><a href=#technical-perspective-1 aria-label="Technical Perspective">Technical Perspective</a></li></ul></li></ul></li><li><a href=#computers-as-rooms aria-label="Computers as Rooms">Computers as Rooms</a><ul><li><a href=#room-design-reflects-purpose aria-label="Room Design Reflects Purpose">Room Design Reflects Purpose</a></li><li><a href=#doors--network-interfaces aria-label="Doors = Network Interfaces">Doors = Network Interfaces</a></li><li><a href=#multiple-doors aria-label="Multiple Doors">Multiple Doors</a><ul><li><a href=#main-door aria-label="Main Door">Main Door</a></li><li><a href=#maintenance-door aria-label="Maintenance Door">Maintenance Door</a></li><li><a href=#emergency-exit aria-label="Emergency Exit">Emergency Exit</a></li></ul></li><li><a href=#door-identification aria-label="Door Identification">Door Identification</a></li><li><a href=#internal-doors aria-label="Internal Doors">Internal Doors</a></li><li><a href=#broken-doors aria-label="Broken Doors">Broken Doors</a><ul><li><a href=#technical-perspective-2 aria-label="Technical Perspective">Technical Perspective</a></li></ul></li></ul></li><li><a href=#switches-as-floor-managers aria-label="Switches as Floor Managers">Switches as Floor Managers</a><ul><li><a href=#the-switchs-role aria-label="The Switch&amp;rsquo;s Role">The Switch&rsquo;s Role</a></li><li><a href=#how-switches-know-where-to-deliver aria-label="How Switches Know Where to Deliver">How Switches Know Where to Deliver</a></li><li><a href=#switch-scope-single-floor-only aria-label="Switch Scope: Single Floor Only">Switch Scope: Single Floor Only</a></li><li><a href=#switch-benefits aria-label="Switch Benefits">Switch Benefits</a><ul><li><a href=#technical-perspective-3 aria-label="Technical Perspective">Technical Perspective</a></li></ul></li></ul></li><li><a href=#routers-as-building-concierges aria-label="Routers as Building Concierges">Routers as Building Concierges</a><ul><li><a href=#routers-role-building-wide-knowledge aria-label="Router&amp;rsquo;s Role: Building-Wide Knowledge">Router&rsquo;s Role: Building-Wide Knowledge</a></li><li><a href=#the-inter-floor-message-journey aria-label="The Inter-Floor Message Journey">The Inter-Floor Message Journey</a></li><li><a href=#routers-specific-job aria-label="Router&amp;rsquo;s Specific Job">Router&rsquo;s Specific Job</a></li><li><a href=#router-authority aria-label="Router Authority">Router Authority</a></li><li><a href=#path-selection aria-label="Path Selection">Path Selection</a></li><li><a href=#summary-switch-vs-router aria-label="Summary: Switch vs Router">Summary: Switch vs Router</a><ul><li><a href=#technical-perspective-4 aria-label="Technical Perspective">Technical Perspective</a></li></ul></li></ul></li><li><a href=#gateways-as-elevators aria-label="Gateways as Elevators">Gateways as Elevators</a><ul><li><a href=#clarifying-the-relationships aria-label="Clarifying the Relationships">Clarifying the Relationships</a></li><li><a href=#how-elevators-work aria-label="How Elevators Work">How Elevators Work</a></li><li><a href=#network-gateway-function aria-label="Network Gateway Function">Network Gateway Function</a></li><li><a href=#simple-gateway-equation aria-label="Simple Gateway Equation">Simple Gateway Equation</a></li><li><a href=#protocol-translation aria-label="Protocol Translation">Protocol Translation</a></li><li><a href=#user-perspective aria-label="User Perspective">User Perspective</a></li><li><a href=#the-visual-process aria-label="The Visual Process">The Visual Process</a><ul><li><a href=#technical-perspective-5 aria-label="Technical Perspective">Technical Perspective</a></li></ul></li></ul></li><li><a href=#a-messages-journey aria-label="A Message&amp;rsquo;s Journey">A Message&rsquo;s Journey</a><ul><li><a href=#scenario-setup aria-label="Scenario Setup">Scenario Setup</a></li><li><a href=#step-by-step-journey aria-label="Step-by-Step Journey">Step-by-Step Journey</a><ul><li><a href=#1-starting-point--room-101-you aria-label="1. Starting Point ‚Äì Room 101 (You)">1. Starting Point ‚Äì Room 101 (You)</a></li><li><a href=#2-local-floor-check--switch-on-floor-1 aria-label="2. Local Floor Check ‚Äì Switch on Floor 1">2. Local Floor Check ‚Äì Switch on Floor 1</a></li><li><a href=#3-hand-off-to-router--building-concierge aria-label="3. Hand-Off to Router ‚Äì Building Concierge">3. Hand-Off to Router ‚Äì Building Concierge</a></li><li><a href=#4-routing-the-message--going-up aria-label="4. Routing the Message ‚Äì Going Up">4. Routing the Message ‚Äì Going Up</a></li><li><a href=#5-arrival-at-floor-5--switch-on-floor-5 aria-label="5. Arrival at Floor 5 ‚Äì Switch on Floor 5">5. Arrival at Floor 5 ‚Äì Switch on Floor 5</a></li><li><a href=#6-message-received--room-504 aria-label="6. Message Received ‚Äì Room 504">6. Message Received ‚Äì Room 504</a></li></ul></li><li><a href=#return-journey aria-label="Return Journey">Return Journey</a></li><li><a href=#key-cooperation-principle aria-label="Key Cooperation Principle">Key Cooperation Principle</a></li><li><a href=#beyond-one-building aria-label="Beyond One Building">Beyond One Building</a></li><li><a href=#quick-check-what-weve-covered aria-label="Quick Check: What We&amp;rsquo;ve Covered">Quick Check: What We&rsquo;ve Covered</a><ul><li><a href=#technical-perspective-6 aria-label="Technical Perspective">Technical Perspective</a></li></ul></li></ul></li></ul></li></ul></div></details></div><div class=post-content><p>I wrote this for the younger (and less handsome) version of myself from university who found networking concepts challenging. If you&rsquo;re reading this and you are also struggling with these concepts, just know this isn&rsquo;t a complete map of the &ldquo;networking world&rdquo;, it is simply a different way to see it. I hope you find this analogy helpful.</p><p>I&rsquo;ve decided to stick with analogies here instead of going deep into technical terms, you can find those easily anywhere, because I enjoy looking at the world from different perspectives. It&rsquo;s fascinating how many connections you can make when you approach things from a new angle.</p><p>I understand that analogies have their limits and sometimes you have to stretch things to make them work. In those cases, maybe it&rsquo;s better to stick to first principles. But honestly, I find analogies more fun, especially for abstract concepts like computer networks.</p><p>Finally, I want to emphasize that this analogy isn&rsquo;t meant to be an exact representation of the &ldquo;world of networking&rdquo;. It&rsquo;s simply a learning tool to help view computer networks from a different perspective.</p><h2 id=what-to-expect>What to Expect<a hidden class=anchor aria-hidden=true href=#what-to-expect>#</a></h2><p>We&rsquo;ll be comparing computer networks to things you encounter in everyday life. Our main analogy is that of <strong>buildings and cities</strong>:</p><ul><li><p><strong>Part 1 (Building the Foundation)</strong>: We start small with a single building representing a network. We&rsquo;ll explore rooms (computers), hallways (connections), floor managers (switches), and the fundamental pieces that make a network work internally.</p></li><li><p><strong>Part 2 (Moving Around the City)</strong>: We expand outward. Multiple buildings form a city ‚Äì an analogy for the internet. We&rsquo;ll see how messages travel across the city, guided by concierges (routers) and roads (cables), and how global addressing and directories help data find its destination.</p></li><li><p><strong>Part 3 (Hotels in the Cloud & Future Cities)</strong>: We look at more advanced networking concepts. We&rsquo;ll check into &ldquo;hotels&rdquo; (cloud computing) to see how renting a room in someone else&rsquo;s building works. We&rsquo;ll also touch on future-forward technologies like <code>IPv6</code>, software-defined networking, and more.</p></li><li><p><strong>Part 4 (Becoming an Architect)</strong>: We conclude by turning the analogy around. Now that you&rsquo;ve learned the layout, it&rsquo;s time to become the architect. This part guides you on how to design and think about networks yourself.</p></li><li><p><strong>Appendix</strong>: A handy concept mapping table (network terms to analogy terms) for quick reference.</p></li></ul><h1 id=part-1-building-the-foundation>Part 1: Building the Foundation<a hidden class=anchor aria-hidden=true href=#part-1-building-the-foundation>#</a></h1><h2 id=networks-as-buildings>Networks as Buildings<a hidden class=anchor aria-hidden=true href=#networks-as-buildings>#</a></h2><blockquote><p><strong>Core Analogy</strong>: A computer network visualized as a building with many rooms and hallways.</p><p>Imagine a large building filled with countless rooms, connected by hallways and staircases. Each room represents a single computer or device, and the room number (like &ldquo;Room 101&rdquo;) acts as that computer&rsquo;s <strong>IP address</strong>. People (messages) walk through hallways to visit different rooms ‚Äì this movement is like <strong>data transfer</strong> between computers.</p></blockquote><p>In this simple analogy, the entire building is a network. The rooms inside are the individual devices, and the hallways are the communication links that allow movement (data transfer) within the building. Just as you might talk to someone in another room by walking down the hallway and knocking on their door, one computer sends data to another by sending it through the network&rsquo;s &ldquo;hallways.&rdquo;</p><h3 id=basic-building-components>Basic Building Components<a hidden class=anchor aria-hidden=true href=#basic-building-components>#</a></h3><ul><li><p><strong>Building = Network</strong>: The whole structure containing everything is the network itself</p><ul><li>Small building ‚Üí home network</li><li>Huge skyscraper ‚Üí large corporate network</li></ul></li><li><p><strong>Room + Room Number = Computer + IP Address</strong>: Each room is a computer or device</p><ul><li>Room number (e.g., &ldquo;Room 101&rdquo;) = unique identifier = <strong>IP address</strong></li><li>Uniquely identifies a device within the network</li></ul></li><li><p><strong>Hallways = Network Connections</strong>: The corridors, staircases, and doors connecting rooms</p><ul><li><code>Ethernet cables</code> or <code>Wi-Fi signals</code> = hallways for data movement</li></ul></li><li><p><strong>Language = Network Protocol</strong>: Common communication rules</p><ul><li>People speak a common language ‚Üí devices use the same <strong>protocol</strong></li><li>Protocols define how messages are formatted and transmitted</li></ul></li></ul><h3 id=network-types-as-building-types>Network Types as Building Types<a hidden class=anchor aria-hidden=true href=#network-types-as-building-types>#</a></h3><p><strong>Buildings have specific purposes</strong>. Some are homes, others are offices, hospitals, or malls. Likewise, networks come in different types optimized for their use:</p><ul><li><strong>Home Network</strong> = Cozy house (designed for simplicity and convenience)</li><li><strong>Business Network</strong> = Office building (designed for efficiency and security)</li><li><strong>Data Center Network</strong> = Industrial complex (optimized for large-scale processing and storage)</li></ul><h3 id=network-types-as-building-types-1>Network Types as Building Types<a hidden class=anchor aria-hidden=true href=#network-types-as-building-types-1>#</a></h3><ul><li><p><strong>LAN (Local Area Network)</strong> = Single building</p><ul><li>Under one roof, one entity (home or office)</li></ul></li><li><p><strong>WAN (Wide Area Network)</strong> = Campus or building cluster</p><ul><li>Different locations connected by roads (communication lines)</li></ul></li><li><p><strong>Data Center Network</strong> = Specialized facility</p><ul><li>Like a high-security bank or research lab</li><li>Built for speed and reliability above all</li></ul></li></ul><p>Now, one building by itself is a contained world. But networks rarely live in isolation ‚Äì just as buildings exist in neighborhoods and cities. Before we go city-wide, however, we need to further design our building&rsquo;s internal structure. Let&rsquo;s go floor by floor and room by room, fleshing out this analogy.</p><h4 id=technical-perspective>Technical Perspective<a hidden class=anchor aria-hidden=true href=#technical-perspective>#</a></h4><p>In reality, a computer network is a collection of interconnected devices (<code>computers</code>, <code>servers</code>, <code>phones</code>, etc.) that communicate using standard <strong>protocols</strong> (rules). Each device is identified by an <strong>IP address</strong> (like a unique phone number or house address).</p><p>Networks range from small (few home devices) to enormous (thousands of corporate devices). Like buildings with internal room numbers, many networks use <strong>private IP addresses</strong> internally, while the entire network appears to the outside world (internet) as a single <strong>public IP address</strong> (the building&rsquo;s street address).</p><p>The building analogy illustrates:</p><ul><li>Internal structure and addressing</li><li>Network boundaries (walls) and entry/exit points (doors)</li><li>How hardware (<code>cables</code>, <code>routers</code>, <code>switches</code>) and software work together</li></ul><p><em>Note: While the analogy simplifies concepts, real networks involve complex hardware and software interactions.</em></p><h2 id=designing-network-floors>Designing Network Floors<a hidden class=anchor aria-hidden=true href=#designing-network-floors>#</a></h2><p>Every large building has multiple floors, and each floor groups certain rooms together. In our network-as-building analogy, each floor represents a <strong>subnetwork (subnet)</strong> ‚Äì a subdivided portion of the larger network. We design floors in a building to organize rooms (maybe by department or function), and similarly we design subnets in a network to organize computers for security or efficiency.</p><blockquote><p><strong>Floor Analogy</strong>: Different floors in a building represent different sub-networks within a larger network.</p><p>Suppose you have a company&rsquo;s office building. The company decides that the <strong>HR department</strong> will occupy Floor 2 and the <strong>Engineering team</strong> will occupy Floor 3. By doing this, people (and communications) on the same floor can interact freely, while movement between floors is more controlled (perhaps you need to take an elevator or have permission to access a different floor).</p></blockquote><p>This is just like a network where you create <strong>subnets</strong>: computers on the same subnet (floor) can talk to each other easily, but to communicate with a different subnet (another floor) the traffic might need to go through some controlled gateway or router.</p><h3 id=why-separate-floors>Why Separate Floors?<a hidden class=anchor aria-hidden=true href=#why-separate-floors>#</a></h3><p>In a real building, you might separate floors by department to reduce unnecessary foot traffic and increase security. In networks, we use subnets to:</p><ul><li><strong>Localize traffic</strong> and improve performance</li><li><strong>Improve security</strong> by isolating sensitive data</li></ul><p>For example, the HR computers (handling sensitive data) stay within their own subnet so their traffic is isolated from Engineering&rsquo;s streaming of code builds or test data.</p><h3 id=addressing-floor--room-numbers>Addressing: Floor + Room Numbers<a hidden class=anchor aria-hidden=true href=#addressing-floor--room-numbers>#</a></h3><p>If someone tells you &ldquo;Room 101&rdquo; without context, you might ask, <strong>on which floor?</strong> In a building, Room 101 on Floor 1 is different from Room 101 on Floor 3. So usually we specify both: &ldquo;Floor 3, Room 101.&rdquo;</p><p>Networks do something similar. A device&rsquo;s full address includes:</p><ul><li><strong>Subnet info</strong> (floor)</li><li><strong>Host info</strong> (room)</li></ul><p>For example, consider an IP address like <code>192.168.3.101</code>:</p><ul><li><code>192.168.3.x</code> identifies the subnet (floor)</li><li><code>101</code> identifies the specific device (room) on that floor</li></ul><p>As an analogy, a full address might look like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Building X, Floor 3, Room 101
</span></span></code></pre></div><p>This is akin to saying &ldquo;Device at IP <code>192.168.3.101</code> in Network X.&rdquo; Within Building X you only needed &ldquo;Floor 3, Room 101,&rdquo; but from outside you specify the building as well.</p><h3 id=designing-effective-floors-subnets>Designing Effective Floors (Subnets)<a hidden class=anchor aria-hidden=true href=#designing-effective-floors-subnets>#</a></h3><p>Designing a floor (subnet) effectively involves several considerations:</p><h4 id=hallway-width-bandwidth>Hallway Width (Bandwidth)<a hidden class=anchor aria-hidden=true href=#hallway-width-bandwidth>#</a></h4><ul><li><strong>Question</strong>: How wide are the corridors on this floor?</li><li><strong>Network equivalent</strong>: Hallway width represents <strong>network bandwidth</strong> on the subnet</li><li><strong>Impact</strong>: Wider hallways (higher bandwidth) allow more people (data packets) to move simultaneously</li><li><strong>Example</strong>: High-traffic floors (Engineering transferring big files) need wider hallways (faster switches/higher capacity links)</li></ul><h4 id=number-of-rooms-subnet-size>Number of Rooms (Subnet Size)<a hidden class=anchor aria-hidden=true href=#number-of-rooms-subnet-size>#</a></h4><ul><li><strong>Question</strong>: How many rooms can you fit on this floor?</li><li><strong>Network equivalent</strong>: How many <strong>IP addresses</strong> (devices) the subnet can accommodate</li><li><strong>Planning tool</strong>: The <strong>subnet mask</strong> or <strong>prefix length</strong> is like a blueprint<ul><li><code>255.255.255.0</code> (a <code>/24</code> prefix) = floor plan allowing 254 rooms</li><li>Need more rooms? Use different mask or add another floor</li></ul></li></ul><h3 id=subnet-sizing-examples>Subnet Sizing Examples<a hidden class=anchor aria-hidden=true href=#subnet-sizing-examples>#</a></h3><h4 id=big-floors>Big Floors<a hidden class=anchor aria-hidden=true href=#big-floors>#</a></h4><ul><li><strong>Large subnet</strong> (like <code>/16</code>) = floor with huge number of rooms</li><li><strong>Useful for</strong>: Large office or campus (tens of thousands of devices)</li><li><strong>Drawback</strong>: Massive single floor can get unwieldy</li><li><strong>Network issue</strong>: Huge subnet can suffer from inefficiencies like broad traffic broadcasts</li></ul><h4 id=small-floors>Small Floors<a hidden class=anchor aria-hidden=true href=#small-floors>#</a></h4><ul><li><strong>Tiny subnet</strong> (like <code>/30</code> or <code>/29</code>) = handful of rooms only</li><li><strong>Useful for</strong>: Point-to-point links or very small offices</li><li><strong>Benefits</strong>: Easy to manage and secure</li><li><strong>Limitation</strong>: Not flexible if you need to add more rooms/devices</li></ul><p>In practice, network architects carefully plan how to &ldquo;floor-plan&rdquo; their networks: <strong>balancing size and performance</strong>. You wouldn&rsquo;t want a single floor for your entire corporation if it makes more sense to have each department on its own floor.</p><h4 id=technical-perspective-1>Technical Perspective<a hidden class=anchor aria-hidden=true href=#technical-perspective-1>#</a></h4><p>A <strong>subnet</strong> is a logically visible subdivision of an IP network. When we talk about subnets, we use terms like <strong>subnet mask</strong> or <strong>CIDR prefix</strong> (e.g., <code>/24</code>) to denote how IP addresses are split between:</p><ul><li><strong>Network portion</strong> (floor)</li><li><strong>Host portion</strong> (room)</li></ul><p>The subnet mask is essentially the &ldquo;floor plan&rdquo; ‚Äì it determines which part of an IP address denotes the subnet (floor) and which part denotes the host (room).</p><p><strong>Example</strong>: In the IP <code>192.168.3.101/24</code></p><ul><li><code>/24</code> mask means first 24 bits (<code>192.168.3</code>) = network portion (Floor 3)</li><li>Last 8 bits (<code>101</code>) = host identifier on that subnet</li></ul><p><strong>Key behaviors</strong>:</p><ul><li>Devices within same subnet can reach each other directly (like people moving within same floor) <strong>without involving a router</strong></li><li>Communication between different subnets <strong>must go through a gateway</strong> (elevator connecting floors)</li></ul><p>Subnets help manage traffic by:</p><ul><li><strong>Limiting broadcast domains</strong></li><li><strong>Organizing network</strong> into smaller, efficient segments</li></ul><p><strong>Security example</strong>: Separating guest Wi-Fi from internal company network is like giving guests their own floor, with elevator as checkpoint between guests and secure areas.</p><h2 id=computers-as-rooms>Computers as Rooms<a hidden class=anchor aria-hidden=true href=#computers-as-rooms>#</a></h2><p>If our building is the network, then each room inside it is a <strong>computer</strong> (or any networked device). Just like rooms in a building, computers in a network come in all shapes and sizes and serve different purposes:</p><ul><li>One room might be a quiet office ‚Üí one computer might be a server</li><li>Another room might be a noisy cafeteria ‚Üí another computer might be a user&rsquo;s laptop</li></ul><p>Each room can be <strong>occupied</strong> (running applications) and has people coming in and out (data being sent/received).</p><h3 id=room-design-reflects-purpose>Room Design Reflects Purpose<a hidden class=anchor aria-hidden=true href=#room-design-reflects-purpose>#</a></h3><p>A room&rsquo;s design and content depend on its occupants:</p><p><strong>In an office building</strong>:</p><ul><li><strong>Room 101</strong> might be Accounting (filed with filing cabinets and calculators)</li><li><strong>Room 102</strong> might be a conference room (projectors and speakerphones)</li></ul><p><strong>In networking</strong>:</p><ul><li>A computer&rsquo;s <strong>role</strong> (what services or software it runs) determines its &ldquo;setup&rdquo;</li><li><strong>Database server</strong> = records room with locked cabinets (lots of data stored securely)</li><li><strong>Web server</strong> = reception room with pamphlets ready to give out (serves web pages to anyone who asks)</li></ul><h3 id=doors--network-interfaces>Doors = Network Interfaces<a hidden class=anchor aria-hidden=true href=#doors--network-interfaces>#</a></h3><p><strong>How do things get in and out of a room?</strong> Through doors.</p><p>In networking, a <strong>door</strong> represents a <strong>network interface</strong> on the computer:</p><ul><li>Most rooms have at least one main door</li><li>Most computers have at least one primary network interface (laptop&rsquo;s <code>Wi-Fi</code> or <code>Ethernet port</code>)</li><li>Some rooms have multiple doors ‚Üí some computers have multiple network interfaces</li></ul><h3 id=multiple-doors>Multiple Doors<a hidden class=anchor aria-hidden=true href=#multiple-doors>#</a></h3><p>A single room can have several doors leading to different places, and each door provides a unique way to enter or exit the room:</p><h4 id=main-door>Main Door<a hidden class=anchor aria-hidden=true href=#main-door>#</a></h4><ul><li><strong>Purpose</strong>: The primary way in and out</li><li><strong>Network equivalent</strong>: Primary network interface (often <code>Ethernet port</code> or <code>Wi-Fi antenna</code>)</li><li><strong>Usage</strong>: How bulk of traffic comes and goes</li><li><strong>Analogy</strong>: Front door where regular visitors enter</li><li><strong>Examples</strong>:<ul><li>PC&rsquo;s Ethernet port connecting to office LAN</li><li>Phone&rsquo;s Wi-Fi radio connecting to home router</li></ul></li></ul><h4 id=maintenance-door>Maintenance Door<a hidden class=anchor aria-hidden=true href=#maintenance-door>#</a></h4><ul><li><strong>Purpose</strong>: Back door for staff or deliveries</li><li><strong>Network equivalent</strong>: Secondary interface for special purposes</li><li><strong>Use cases</strong>:<ul><li><strong>Management network</strong> connection</li><li><strong>VPN</strong> connection</li><li>Dedicated management port (for administrators only)</li></ul></li><li><strong>Examples</strong>:<ul><li>Servers with dedicated management port</li><li>Computer with second network card or USB tethering interface</li></ul></li></ul><h4 id=emergency-exit>Emergency Exit<a hidden class=anchor aria-hidden=true href=#emergency-exit>#</a></h4><ul><li><strong>Purpose</strong>: Rarely used but crucial in crisis</li><li><strong>Network equivalent</strong>: Backup connection</li><li><strong>Use cases</strong>:<ul><li>Critical server with <code>4G wireless backup</code> if wired network fails</li><li>Secondary <strong>ISP link</strong> when primary goes down</li><li><strong>Automatic failover interface</strong></li></ul></li><li><strong>Behavior</strong>: Most of time sits unused (door closed), becomes vital when disaster strikes</li></ul><h3 id=door-identification>Door Identification<a hidden class=anchor aria-hidden=true href=#door-identification>#</a></h3><p>Each door (network interface) has its own identifier, like doors in real building having unique key or number.</p><p>In networking, the unique ID for a door is the <strong>MAC address</strong> ‚Äì a hardware address assigned to the network interface:</p><ul><li>Think of <strong>MAC address</strong> as &ldquo;door ID&rdquo;</li><li>Ensures right packet goes to right door</li><li>Even if two rooms have same layout, doors are uniquely labeled</li><li><strong>Floor manager (switch)</strong> can tell them apart</li></ul><h3 id=internal-doors>Internal Doors<a hidden class=anchor aria-hidden=true href=#internal-doors>#</a></h3><p>Some rooms have internal doors connecting to adjacent rooms (like office suites with interior connecting doors). Similarly, a computer might have virtual or internal network connecting to another (example: virtual machines on one host connecting via internal bridge).</p><h3 id=broken-doors>Broken Doors<a hidden class=anchor aria-hidden=true href=#broken-doors>#</a></h3><p><strong>Important</strong>: If a door is locked or broken, the room is inaccessible.</p><p>In network terms: if a <strong>network interface</strong> is shut down or misconfigured, that computer effectively can&rsquo;t be reached from that path ‚Äì like a closed door. This is why network downtime often feels like you&rsquo;re knocking on a door nobody is opening.</p><hr><p>We now have a building with:</p><ul><li>Multiple <strong>floors</strong> (subnets)</li><li><strong>Rooms</strong> (computers) with <strong>doors</strong> (interfaces)</li></ul><p>But how do we make sure messages get to the right room efficiently? In a big building, you don&rsquo;t wander the halls randomly hoping to find &ldquo;Bob in Room 203.&rdquo; Instead, large buildings have some directory or at least someone to ask for directions.</p><p>In our network building, that role is handled by devices like <strong>switches</strong> and <strong>routers</strong> ‚Äì the subject of the next chapters.</p><h4 id=technical-perspective-2>Technical Perspective<a hidden class=anchor aria-hidden=true href=#technical-perspective-2>#</a></h4><p>An individual <strong>computer or host</strong> on the network is identified by its <strong>IP address</strong> (room number) and communicates through one or more <strong>network interfaces</strong> (doors).</p><p><strong>Key technical details</strong>:</p><ul><li>Each network interface has a <strong>MAC address</strong> (unique physical identifier for that interface)</li><li>Operates at <strong>Layer 2</strong> of the OSI model (data link layer)</li><li>Computer with multiple network interfaces can connect to multiple networks or segments</li></ul><p><strong>Examples</strong>:</p><ul><li>Workstation connected to both wired <code>Ethernet</code> and <code>Wi-Fi</code> simultaneously</li><li>Like room with two doors to different hallways</li></ul><p><strong>Interface management</strong>:</p><ul><li>Networking software handles each interface separately</li><li>System decides which interface to use based on <strong>routing rules</strong></li><li>Usually uses main interface unless specific route says otherwise</li></ul><p><strong>Redundancy concept</strong>:</p><ul><li><strong>&ldquo;Emergency exit&rdquo;</strong> = redundancy in networking</li><li>Mission-critical systems have redundant network connections (and power)</li><li>If one fails, other picks up</li><li>Example: servers with dual <strong>NICs (Network Interface Cards)</strong> configured for failover</li></ul><p><strong>Address resolution</strong>:</p><ul><li><strong>MAC addresses</strong> ensure switches can direct traffic to correct interface</li><li>To send packet to IP, it gets resolved (via <strong>ARP</strong>) to MAC address</li><li>Finds which door leads to that IP, delivers to specific interface</li><li>If interface is down, no entry</li></ul><p><strong>Network administration</strong>:
Managing interfaces (doors) is key part of network administration:</p><ul><li>Enabling/disabling ports</li><li>Setting up secondary links</li><li>Ensuring &ldquo;rooms&rdquo; stay accessible</li><li>Communication flows through right &ldquo;doors&rdquo;</li></ul><h2 id=switches-as-floor-managers>Switches as Floor Managers<a hidden class=anchor aria-hidden=true href=#switches-as-floor-managers>#</a></h2><p>So you&rsquo;re on Floor 2 of the building, and you want to send a file (message) to your colleague in Room 203 on the same floor. How do you ensure it gets there?</p><p><strong>Inefficient approach</strong>: You could wander the hallway, knocking on every door: &ldquo;Is this 203? No&mldr; Is this 203?&rdquo; That&rsquo;s terribly inefficient.</p><p><strong>Efficient approach</strong>: In well-run buildings, there&rsquo;s usually a <strong>floor manager</strong> or directory on each floor to direct you.</p><h3 id=the-switchs-role>The Switch&rsquo;s Role<a hidden class=anchor aria-hidden=true href=#the-switchs-role>#</a></h3><p>In our network building, a <strong>switch</strong> is like the <strong>floor manager</strong> (or helpful concierge on that floor). The switch knows exactly which door corresponds to Room 203.</p><p><strong>In practice</strong>: When you (Room 201) send data intended for Room 203:</p><ol><li><strong>Switch</strong> on that floor checks the destination</li><li>Says &ldquo;Ah, Room 203 is down the hall, third door on the left&rdquo;</li><li><strong>Forwards your message directly</strong> to that door</li></ol><p><strong>Key benefit</strong>: You don&rsquo;t have to broadcast your message to every room hoping it finds the right one; the switch takes care of delivering it to the correct recipient.</p><h3 id=how-switches-know-where-to-deliver>How Switches Know Where to Deliver<a hidden class=anchor aria-hidden=true href=#how-switches-know-where-to-deliver>#</a></h3><p><strong>Question</strong>: How does the switch know which door (network interface) belongs to Room 203 (specific computer)?</p><p><strong>Answer</strong>: It maintains a <strong>list</strong> ‚Äì essentially a mapping of:</p><ul><li><strong>Room numbers</strong> (IP addresses)</li><li><strong>Door IDs</strong> (MAC addresses) on that floor</li></ul><p><strong>Analogies</strong>:</p><ul><li>Employee directory listing who&rsquo;s in which room</li><li>Guest list that floor manager checks</li></ul><p><strong>Process</strong>: If you tell floor manager &ldquo;I need to get this to Alice in Room 203&rdquo;:</p><ol><li>Manager quickly references the list</li><li>Hands message to door for Room 203</li></ol><p><strong>In networking</strong>:</p><ul><li>Switches keep <strong>MAC address table</strong> that maps MAC addresses to physical ports on switch</li><li><strong>ARP (Address Resolution Protocol)</strong> serves as &ldquo;guest list&rdquo; mechanism</li><li>Devices learn the MAC corresponding to given IP so switch can route accordingly</li></ul><h3 id=switch-scope-single-floor-only>Switch Scope: Single Floor Only<a hidden class=anchor aria-hidden=true href=#switch-scope-single-floor-only>#</a></h3><p><strong>Important limitation</strong>: Switches work within a <strong>single floor</strong> (single subnet).</p><ul><li>Floor manager doesn&rsquo;t care about Floor 3 or Floor 10</li><li>They only deal with their floor&rsquo;s rooms</li><li>If you ask about room on another floor, they send you to:<ul><li><strong>Elevator</strong> (gateway)</li><li><strong>Building concierge</strong> (router)</li></ul></li></ul><p><strong>Technical meaning</strong>: Switch typically used for <strong>LAN (Local Area Network)</strong> connectivity:</p><ul><li>Forwards data between devices in same network segment</li><li>Uses <strong>MAC addresses</strong> (layer 2 information) for forwarding decisions</li><li>Ignores external networks</li></ul><h3 id=switch-benefits>Switch Benefits<a hidden class=anchor aria-hidden=true href=#switch-benefits>#</a></h3><p><strong>Efficiency</strong>: Connects devices within same network efficiently</p><ul><li>Delivers messages only to intended recipient</li><li>Reduces unnecessary traffic</li></ul><p><strong>Analogy</strong>: Imagine if every conversation on floor had to be shouted to all rooms ‚Äì chaotic!</p><p><strong>Result</strong>: Switches create direct line between sender and receiver on that floor once they know each other&rsquo;s addresses, like good floor manager quietly delivering mail to exact office without bothering others.</p><h4 id=technical-perspective-3>Technical Perspective<a hidden class=anchor aria-hidden=true href=#technical-perspective-3>#</a></h4><p>A <strong>network switch</strong> operates at the <strong>Data Link layer</strong> (<strong>Layer 2</strong> of OSI model). It&rsquo;s a device with multiple ports, each port usually connected to one device (one room).</p><p><strong>How it works</strong>:</p><ol><li><strong>Frame arrives</strong>: When data packet (frame) at Layer 2 arrives at switch</li><li><strong>Check destination</strong>: Switch looks at frame&rsquo;s <strong>destination MAC address</strong></li><li><strong>Consult table</strong>: Consults <strong>MAC address table</strong> to see which port (door) corresponds to that MAC</li><li><strong>Forward or learn</strong>:<ul><li>If match found ‚Üí forwards frame out only that port</li><li>If doesn&rsquo;t know MAC ‚Üí may broadcast frame to all ports asking &ldquo;Who has this MAC address?&rdquo;</li></ul></li></ol><p><strong>Learning process</strong>:</p><ul><li>Like someone new moved into Room 203 and floor manager hasn&rsquo;t met them</li><li>Analogous to calling out &ldquo;Room 203, where are you?&rdquo;</li><li>Device with that MAC responds</li><li>Switch learns which port that device is on and updates its table</li><li><strong>All happens in milliseconds</strong></li></ul><p><strong>Efficiency improvement</strong>: Switches greatly increase network efficiency compared to older <strong>hubs</strong>:</p><ul><li><strong>Hubs</strong>: Like shouting to all rooms (send incoming data to all ports blindly)</li><li><strong>Switches</strong>: Send data only where needed</li></ul><p><strong>ARP integration</strong>: <strong>ARP (Address Resolution Protocol)</strong> is the mechanism where:</p><ul><li>Device knowing another device&rsquo;s IP address can learn its MAC address</li><li>Broadcasts query on the LAN</li><li>Response from target device lets sender and switch know mapping of IP to MAC (room number to door ID)</li></ul><p><strong>Key limitation</strong>: Switches do <strong>not</strong> typically:</p><ul><li>Look at IP addresses</li><li>Route between networks (that&rsquo;s router&rsquo;s job)</li><li>They simply switch frames on local network</li></ul><p><strong>Fundamental role</strong>: Switches are one of fundamental building blocks of a LAN, ensuring traffic goes only where needed and every device&rsquo;s &ldquo;door&rdquo; is known to the network.</p><h2 id=routers-as-building-concierges>Routers as Building Concierges<a hidden class=anchor aria-hidden=true href=#routers-as-building-concierges>#</a></h2><p>Now let&rsquo;s say you&rsquo;re on <strong>Floor 1</strong> (Engineering) and you need to send a message to <strong>Room 504</strong> on <strong>Floor 5</strong> (perhaps the Executive offices) in the same building.</p><p>The <strong>floor manager (switch)</strong> on Floor 1 looks at the destination and realizes: &ldquo;Room 504 isn&rsquo;t on this floor.&rdquo;</p><p><strong>So what happens?</strong> The switch passes your message up to the <strong>building concierge</strong>, which in our analogy is the <strong>router</strong>.</p><h3 id=routers-role-building-wide-knowledge>Router&rsquo;s Role: Building-Wide Knowledge<a hidden class=anchor aria-hidden=true href=#routers-role-building-wide-knowledge>#</a></h3><p>A <strong>router</strong> is like the <strong>concierge</strong> or <strong>information desk in the lobby</strong> that knows the whole building&rsquo;s layout:</p><ul><li>Each <strong>floor&rsquo;s manager</strong> knows only their own floor</li><li><strong>Router</strong> knows how to get from floor to floor</li><li>Effectively <strong>connects the subnets/floors</strong> together</li></ul><p>If Floor 5 is a different subnet, the router is the device that can shuttle data between Floor 1 and Floor 5 networks.</p><h3 id=the-inter-floor-message-journey>The Inter-Floor Message Journey<a hidden class=anchor aria-hidden=true href=#the-inter-floor-message-journey>#</a></h3><p>Here&rsquo;s how the interaction goes in the building scenario:</p><ol><li><p><strong>You ‚Üí Floor 1 Manager</strong>: Hand your message to Floor 1 manager (switch) saying it&rsquo;s for Room 504</p></li><li><p><strong>Floor 1 Manager ‚Üí Router</strong>: &ldquo;Not on this floor ‚Äì I&rsquo;ll forward this to the building concierge&rdquo;</p></li><li><p><strong>Router Analysis</strong>: Router (concierge) in lobby looks at address: &ldquo;Room 504, Floor 5&rdquo;</p><ul><li>Router has <strong>map of building</strong> (analogous to <strong>routing table</strong>)</li><li>Plan of which floors exist and how to reach them</li><li>Figures out best way to send message to Floor 5</li><li>Maybe knows Elevator B goes to floors 4-6, so that&rsquo;s the one to use</li></ul></li><li><p><strong>Router ‚Üí Gateway</strong>: Router puts message into correct &ldquo;elevator&rdquo; (gateway) that will carry it to Floor 5</p></li><li><p><strong>Floor 5 Delivery</strong>: Once at Floor 5, local switch/floor manager takes over and delivers message to Room 504&rsquo;s door</p></li></ol><h3 id=routers-specific-job>Router&rsquo;s Specific Job<a hidden class=anchor aria-hidden=true href=#routers-specific-job>#</a></h3><p><strong>Router&rsquo;s job</strong>: <strong>Inter-floor (inter-network) navigation</strong></p><ul><li>Doesn&rsquo;t deliver to individual room (that&rsquo;s switch&rsquo;s job once on correct floor)</li><li>Makes sure message gets to <strong>right floor</strong> in first place</li></ul><p><strong>In networking terms</strong>:</p><ul><li>Router connects different <strong>networks (subnets)</strong></li><li>Directs packets based on their <strong>IP addresses</strong> (which include network information like floor)</li><li>Decides next &ldquo;<strong>hop</strong>&rdquo; or next network to forward packet towards destination</li></ul><h3 id=router-authority>Router Authority<a hidden class=anchor aria-hidden=true href=#router-authority>#</a></h3><p>Think of router as the one who holds the <strong>master key</strong> to the building:</p><ul><li>Not literally, but has <strong>authority to move between floors</strong></li><li><strong>Aware of the big picture</strong></li><li><strong>Without router</strong>: each floor (subnet) would be isolated</li><li>Couldn&rsquo;t easily send data from one to another</li></ul><h3 id=path-selection>Path Selection<a hidden class=anchor aria-hidden=true href=#path-selection>#</a></h3><p>Routers often make decisions about <strong>which path is best</strong>:</p><p><strong>Building analogy</strong>: In huge building with multiple elevators and stairs, concierge might think:</p><ul><li>&ldquo;Elevator A is busy, let&rsquo;s send this via Elevator B&rdquo;</li><li>&ldquo;Usual staircase is closed for cleaning, use the other one&rdquo;</li></ul><p><strong>Network equivalent</strong>: Router can choose between multiple routes if options exist:</p><ul><li>Generally chooses <strong>most efficient path</strong></li><li>Based on programming and network state</li></ul><h3 id=summary-switch-vs-router>Summary: Switch vs Router<a hidden class=anchor aria-hidden=true href=#summary-switch-vs-router>#</a></h3><ul><li><strong>Switch</strong> = <strong>local delivery</strong> on one floor</li><li><strong>Router</strong> = <strong>global delivery</strong> between floors</li></ul><p><strong>Ensuring correct delivery</strong>:</p><ul><li><strong>Switch</strong>: Message goes door-to-door correctly</li><li><strong>Router</strong>: Message goes floor-to-floor correctly</li></ul><h4 id=technical-perspective-4>Technical Perspective<a hidden class=anchor aria-hidden=true href=#technical-perspective-4>#</a></h4><p>A <strong>router</strong> operates at the <strong>Network layer</strong> (<strong>Layer 3</strong> of OSI). Its primary job is to:</p><ol><li><strong>Examine IP address</strong> in each incoming packet</li><li><strong>Decide where to send</strong> packet next so it eventually reaches destination network</li></ol><p><strong>Routing table</strong>: Routers maintain data structure called <strong>routing table</strong> ‚Äì essentially the &ldquo;map&rdquo; of known networks and directions on how to reach them.</p><p><strong>Routing table entries</strong>: Each entry says, for example:</p><ul><li>&ldquo;Network <code>192.168.5.0/24</code> is reachable via Interface X&rdquo;</li><li>&ldquo;Or via router at other end of Interface X&rdquo;</li></ul><p><strong>Forwarding process</strong>:</p><ul><li>Packet destined for <code>192.168.5.42</code> arrives</li><li>Router checks its table</li><li>Forwards packet out appropriate interface toward that network</li></ul><p><strong>Junction point</strong>: If router connected to multiple networks (like multiple floor connections), it&rsquo;s effectively the junction point.</p><p><strong>Advanced functions</strong>: Routers also handle traffic between networks with different rules or architectures:</p><ul><li>Can perform <strong>Network Address Translation (NAT)</strong> when going between private and public networks</li><li>Like front desk translating addresses</li></ul><p><strong>Internetworking backbone</strong>: Because routers look at IP addresses, they form backbone of internetworking:</p><ul><li>Connect <strong>LANs</strong> into <strong>WANs</strong></li><li>Ultimately to the <strong>internet</strong></li></ul><p><strong>Dynamic updates</strong>: Often run <strong>routing protocols</strong> (like <code>OSPF</code>, <code>BGP</code>, etc.) to:</p><ul><li>Exchange information with other routers</li><li>Ensure their maps stay up-to-date</li></ul><p><strong>Key difference from switches</strong>:</p><ul><li><strong>Switch</strong>: Doesn&rsquo;t modify packet, just forwards frames within one network</li><li><strong>Router</strong>: Will decapsulate frame, inspect IP packet, decrement <strong>TTL</strong> (time-to-live), change source/dest MAC addresses for next hop, forward ‚Äì possibly fragmenting if necessary</li></ul><p><strong>Process analogy</strong>: Like concierge taking your letter, reading address, maybe stamping it or repackaging it for elevator, and sending it on its way.</p><p><strong>Scalability</strong>: Without routers, modern networks could not scale:</p><ul><li>Every network would be an island</li><li>With routers: can link networks of different types (<code>Ethernet</code>, <code>fiber</code>, <code>wireless</code>) and different address ranges into one large, global network (the internet)</li></ul><p><strong>Final point</strong>: Routers are indeed the concierges that connect the whole &ldquo;building&rdquo; of the internet together, floor by floor.</p><h2 id=gateways-as-elevators>Gateways as Elevators<a hidden class=anchor aria-hidden=true href=#gateways-as-elevators>#</a></h2><p>We&rsquo;ve hinted at elevators already, and here they come into play. In our building analogy, the <strong>gateway</strong> is like an <strong>elevator</strong> that connects floors.</p><h3 id=clarifying-the-relationships>Clarifying the Relationships<a hidden class=anchor aria-hidden=true href=#clarifying-the-relationships>#</a></h3><ul><li><strong>Switch</strong> = floor manager on each floor (manages local delivery)</li><li><strong>Router</strong> = building concierge that knows how to navigate between floors</li><li><strong>Gateway</strong> = conceptually the connection point that takes you from one network to another</li></ul><p>In our analogy, that&rsquo;s the <strong>elevator shaft and elevator car</strong> moving between floors.</p><p><em>Note: Gateway often used interchangeably with router&rsquo;s function in home networks</em></p><h3 id=how-elevators-work>How Elevators Work<a hidden class=anchor aria-hidden=true href=#how-elevators-work>#</a></h3><p>When you want to move from one floor to another, you typically step into an <strong>elevator</strong> (or take stairs, but elevator is easier for our analogy because it&rsquo;s single point connecting multiple floors).</p><p><strong>Elevator characteristics</strong>:</p><ul><li>Doesn&rsquo;t care who you are or what you&rsquo;re carrying</li><li>Just knows it needs to <strong>move things between floors</strong></li><li>Provides path from, say, Floor 1 to Floor 5</li></ul><h3 id=network-gateway-function>Network Gateway Function<a hidden class=anchor aria-hidden=true href=#network-gateway-function>#</a></h3><p>Similarly, a <strong>network gateway</strong> is device or node that serves as <strong>access point to another network</strong>:</p><ul><li>Usually, <strong>router</strong> on your local network acts as <strong>default gateway</strong></li><li>It&rsquo;s the thing your computer sends data to when destination is on <strong>different network</strong></li><li>Gateway&rsquo;s job is <strong>not</strong> to inspect fine details of your message (not reading mail content)</li><li>Simply <strong>transport your data</strong> to correct next network (next &ldquo;floor&rdquo;)</li></ul><h3 id=simple-gateway-equation>Simple Gateway Equation<a hidden class=anchor aria-hidden=true href=#simple-gateway-equation>#</a></h3><p><strong>In simple terms</strong>: <strong>gateway = elevator</strong></p><ul><li>You&rsquo;re on Floor 1 and need to get to Floor 5 ‚Üí take elevator up</li><li>Your PC on Network A needs to send data to Network B ‚Üí sends to gateway (router), which moves data into Network B</li></ul><h3 id=protocol-translation>Protocol Translation<a hidden class=anchor aria-hidden=true href=#protocol-translation>#</a></h3><p><strong>Important capability</strong>: Gateways often handle <strong>differences between networks</strong></p><p><strong>Building analogy</strong>:</p><ul><li>Floor 1 is library, Floor 2 is warehouse</li><li>Maybe elevator has to adjust to carry different kinds of loads (books vs pallets)</li></ul><p><strong>Network equivalent</strong>:</p><ul><li>Gateway might <strong>translate or encapsulate data</strong> when moving between dissimilar systems or protocols</li><li><strong>Example</strong>: Gateway between email system and text-messaging system would translate email to SMS format</li><li>For standard IP networks, gateway (router) mostly just <strong>forwards IP packets</strong> from one subnet to another</li></ul><h3 id=user-perspective>User Perspective<a hidden class=anchor aria-hidden=true href=#user-perspective>#</a></h3><p>From user perspective, gateway is usually just an <strong>IP address</strong> configured on your device as <strong>&ldquo;route to anything not on my local network.&rdquo;</strong></p><p><strong>Like telling your room</strong>: &ldquo;If destination isn&rsquo;t on this floor, call the elevator at IP <code>192.168.1.1</code>&rdquo; (often a home router&rsquo;s IP)</p><h3 id=the-visual-process>The Visual Process<a hidden class=anchor aria-hidden=true href=#the-visual-process>#</a></h3><p><strong>The elevator process</strong>:</p><ol><li>Elevator takes message from floor&rsquo;s switch up (or down) to destination floor&rsquo;s switch</li><li>Once it arrives, local floor manager handles it from there</li></ol><h4 id=technical-perspective-5>Technical Perspective<a hidden class=anchor aria-hidden=true href=#technical-perspective-5>#</a></h4><p>In networking, a <strong>gateway</strong> typically refers to <strong>router interface</strong> that serves as <strong>entry/exit point</strong> to a network.</p><p><strong>Home network example</strong>:</p><ul><li>Your router might have IP <code>192.168.1.1</code></li><li>This is <strong>default gateway</strong> for all devices in <code>192.168.1.x</code> network</li><li>When your laptop <code>192.168.1.50</code> wants to reach device on internet (say <code>172.217.5.110</code>, a Google server):<ol><li>Recognizes destination not in its own subnet</li><li>According to routing table, sends packet to <strong>default gateway</strong> (<code>192.168.1.1</code>)</li><li>Router receives it and routes out towards internet</li></ol></li></ul><p><strong>Complex gateway functions</strong>:
Gateway can also mean more complex <strong>protocol translating devices</strong>:</p><ul><li><strong>Email-to-SMS gateway</strong></li><li><strong>Voice-over-IP gateway</strong> converting between telephone audio and internet packets</li></ul><p><strong>Standard IP networking</strong>: Usually just means <strong>&ldquo;the router that I send stuff to in order to reach other networks&rdquo;</strong></p><p><strong>Interoperability</strong>: Gateways ensure interoperability:</p><ul><li>Even between different protocol families if needed</li><li>Most commonly just connect IP networks</li></ul><p><strong>Operating layers</strong>:</p><ul><li>At minimum: <strong>Layer 3</strong> (IP routing)</li><li>Often <strong>Layer 4 or higher</strong> if doing fancy translations</li></ul><p><strong>Summary understanding</strong>: Whenever you see <strong>&ldquo;Default Gateway&rdquo;</strong> in network settings, think: <strong>&ldquo;this is the elevator I take to get out of my floor.&rdquo;</strong></p><p>The gateway has:</p><ul><li><strong>One foot</strong> in your local network</li><li><strong>Another foot</strong> in the outside network</li><li><strong>Shuffling data</strong> between the two</li></ul><h2 id=a-messages-journey>A Message&rsquo;s Journey<a hidden class=anchor aria-hidden=true href=#a-messages-journey>#</a></h2><p>Now that we have the cast of characters (<strong>rooms</strong>, <strong>doors</strong>, <strong>switches</strong>, <strong>routers</strong>, <strong>gateways</strong>), let&rsquo;s put it all together in a short story. This will illustrate the typical path of a message inside a building-network and then beyond.</p><h3 id=scenario-setup>Scenario Setup<a hidden class=anchor aria-hidden=true href=#scenario-setup>#</a></h3><p><strong>You are in</strong>: Room 101 on Floor 1 (your laptop on Engineering subnet)<br><strong>You want to send message to</strong>: Room 504 on Floor 5 (CEO&rsquo;s computer on Management subnet)</p><h3 id=step-by-step-journey>Step-by-Step Journey<a hidden class=anchor aria-hidden=true href=#step-by-step-journey>#</a></h3><h4 id=1-starting-point--room-101-you>1. Starting Point ‚Äì Room 101 (You)<a hidden class=anchor aria-hidden=true href=#1-starting-point--room-101-you>#</a></h4><p><strong>Action</strong>: You write message and address it to &ldquo;Room 504, Floor 5&rdquo;<br><strong>Network equivalent</strong>: Your computer prepares data packet with destination IP belonging to Floor 5 subnet</p><h4 id=2-local-floor-check--switch-on-floor-1>2. Local Floor Check ‚Äì Switch on Floor 1<a hidden class=anchor aria-hidden=true href=#2-local-floor-check--switch-on-floor-1>#</a></h4><p><strong>Action</strong>: You hand message to Floor 1 switch (your network interface sends packet to switch)<br><strong>Switch analysis</strong>: Looks at destination. Room 504 is not on Floor 1, so switch doesn&rsquo;t know which port leads there<br><strong>Switch response</strong>: &ldquo;This isn&rsquo;t on my floor ‚Äì I need to send this to the router (concierge)&rdquo;</p><h4 id=3-hand-off-to-router--building-concierge>3. Hand-Off to Router ‚Äì Building Concierge<a hidden class=anchor aria-hidden=true href=#3-hand-off-to-router--building-concierge>#</a></h4><p><strong>Action</strong>: Floor 1 switch forwards packet to router (configured as gateway)<br><strong>Router analysis</strong>: Being the concierge, checks <strong>routing table</strong> (building map)<br><strong>Router decision</strong>: Sees Room 504 is on Floor 5, which it can reach via appropriate interface/elevator</p><h4 id=4-routing-the-message--going-up>4. Routing the Message ‚Äì Going Up<a hidden class=anchor aria-hidden=true href=#4-routing-the-message--going-up>#</a></h4><p><strong>Action</strong>: Router puts message into correct &ldquo;elevator&rdquo; (gateway) that will take it to Floor 5<br><strong>Technical process</strong>: Router has interface connected to backbone running through all floors, encapsulates packet accordingly and sends upward</p><h4 id=5-arrival-at-floor-5--switch-on-floor-5>5. Arrival at Floor 5 ‚Äì Switch on Floor 5<a hidden class=anchor aria-hidden=true href=#5-arrival-at-floor-5--switch-on-floor-5>#</a></h4><p><strong>Action</strong>: Message comes out of elevator on Floor 5, handed to Floor 5 switch<br><strong>Back to local scenario</strong>: Now on destination floor<br><strong>Switch knowledge</strong>: Switch knows exactly where Room 504 is (has <strong>MAC table entry</strong> for Room 504&rsquo;s computer)<br><strong>Delivery</strong>: Delivers message to Room 504&rsquo;s door without bothering other rooms</p><h4 id=6-message-received--room-504>6. Message Received ‚Äì Room 504<a hidden class=anchor aria-hidden=true href=#6-message-received--room-504>#</a></h4><p><strong>Final step</strong>: CEO&rsquo;s computer in Room 504 receives the message you sent<br><strong>Result</strong>: Success! üéâ</p><h3 id=return-journey>Return Journey<a hidden class=anchor aria-hidden=true href=#return-journey>#</a></h3><p>If we reverse it (Room 504 replies to Room 101), same sequence happens in <strong>opposite direction</strong>:
<strong>Floor 5 switch ‚Üí router ‚Üí Floor 1 switch ‚Üí Room 101</strong></p><h3 id=key-cooperation-principle>Key Cooperation Principle<a hidden class=anchor aria-hidden=true href=#key-cooperation-principle>#</a></h3><p>Each player has <strong>specific role</strong> and they <strong>cooperate</strong> to deliver data accurately:</p><ul><li><strong>Room</strong> (computer)</li><li><strong>Switch</strong> (floor manager)</li><li><strong>Router</strong> (building concierge)</li><li><strong>Elevator</strong> (gateway)</li></ul><h3 id=beyond-one-building>Beyond One Building<a hidden class=anchor aria-hidden=true href=#beyond-one-building>#</a></h3><p>All of this was within <strong>one building</strong> (one network domain).</p><p><strong>What if</strong> Room 101 wanted to send message to room in <strong>another building entirely</strong>?</p><ul><li>Perhaps entirely different company</li><li>Someone across town</li></ul><p>This is where we extend the analogy out to a <strong>city of buildings</strong> ‚Äì which represents the wider <strong>internet</strong> beyond your local network.</p><blockquote><p><em>Pun time: we&rsquo;ve been building up this analogy, and now it&rsquo;s time to construct an entire city out of it!</em></p></blockquote><h3 id=quick-check-what-weve-covered>Quick Check: What We&rsquo;ve Covered<a hidden class=anchor aria-hidden=true href=#quick-check-what-weve-covered>#</a></h3><p><strong>Inside a network (building)</strong>:</p><ul><li><strong>Floors</strong> (subnets) isolating internal groups</li><li><strong>Switches/routers</strong> working together</li><li>Message can travel from one room to any other room in same building</li></ul><p><strong>Next step</strong>: Going <strong>outside the building</strong></p><p>Imagine you&rsquo;re in your building and want to deliver package to someone in <strong>another building across town</strong>:</p><ul><li>Need to step outside</li><li>Find the address</li><li>Travel through city roads</li></ul><p>That&rsquo;s what happens when you send data to <strong>different network</strong> across the internet. So let&rsquo;s zoom out from one building to the <strong>entire city</strong>.</p><h4 id=technical-perspective-6>Technical Perspective<a hidden class=anchor aria-hidden=true href=#technical-perspective-6>#</a></h4><p>The journey described is essentially what happens when packet travels from one host to another on <strong>different subnet</strong> within LAN or campus network.</p><p><strong>In networking terms</strong>:</p><p><strong>Step 1 - Source Decision</strong>: Source computer determines destination IP not in its own subnet (Floor 1 vs Floor 5), so sends packet to <strong>default gateway</strong> (router)</p><p><strong>Step 2 - Layer 2 Forwarding</strong>: Switch (Layer 2) forwards to router&rsquo;s MAC because:</p><ul><li>Packet&rsquo;s <strong>destination MAC</strong> = router&rsquo;s MAC at this point</li><li><strong>Destination IP</strong> = final target&rsquo;s IP</li></ul><p><strong>Step 3 - Router Processing</strong>: Router receives packet, consults <strong>routing table</strong>, changes source/dest MAC addresses for next hop, forwards</p><p><strong>Step 4 - Transport</strong>: Packet travels through backbone or inter-floor connection (trunk line analogous to elevator shaft)</p><p><strong>Step 5 - Destination Processing</strong>: When arrives on Floor 5&rsquo;s network, process reversed: packet delivered to target host&rsquo;s MAC by Floor 5 switch</p><p><strong>OSI Layer Correspondence</strong>: Every step corresponds to <strong>OSI model layer</strong> doing its job:</p><ul><li><strong>Application data</strong> (message contents)</li><li>Packed into <strong>transport segment</strong> (perhaps TCP)</li><li>Wrapped in <strong>IP packet</strong> (with IP addresses for Room 101 and 504)</li><li>Wrapped in <strong>Ethernet frame</strong> with MAC addresses (hop to hop)</li></ul><p><strong>Frame Rewriting</strong>: Each router hop <strong>rewrites Layer 2 info</strong> but <strong>preserves Layer 3 info</strong> until final delivery</p><p><strong>Campus vs Internet</strong>: What we described = routing process on single network campus</p><p><strong>Internet complexity</strong>: Moment we try to go to another building (another <strong>autonomous network</strong>, like across internet), we introduce:</p><ul><li>More routers</li><li>Possibly <strong>DNS lookups</strong> to find building&rsquo;s address</li><li>And so on (covered next)</li></ul><p><strong>Key technical takeaway</strong>: Understanding role of each component:</p><ul><li><strong>Switches</strong>: Confine traffic to local network, do fast frame switching</li><li><strong>Routers</strong>: Move packets between networks, each time making routing decision</li></ul><p>This cooperation yields <strong>scalable network</strong> where any host can talk to any other, if allowed, via series of these steps.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://memo.mx/posts/happiness/><span class=title>¬´ Prev</span><br><span>Happiness</span>
</a><a class=next href=https://memo.mx/posts/understanding-computer-networks-by-analogy/><span class=title>Next ¬ª</span><br><span>Understanding Computer Networks by Analogy</span></a></nav></footer></article></main><footer class=footer></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>